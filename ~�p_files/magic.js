if(typeof magic!="function"){var magic=function(){}}magic.resourcePath="";magic.skinName="default";magic.version="1.1.0.4";/msie 6/i.test(navigator.userAgent)&&document.execCommand("BackgroundImageCache",false,true);(function(){magic.setup=magic.setup||function(h,d,e){var g=c(h,"tang-param")||{};for(var f in e){g[f]=e[f]}var k=new d(g);k.$mappingDom("",h);b(h,k.guid);var j=h.getElementsByTagName("*");for(var f=j.length-1;f>=0;f--){b(j[f],k.guid)}return k};function c(h,d){var k=h.getAttribute(d),j,g=false;if(k&&(j=k.match(a[0]))){g={};for(var f=0,e;f<j.length;f++){e=j[f].match(a[1]);!isNaN(e[2])&&(e[2]=+e[2]);a[2].test(e[2])&&(e[2]=e[2].replace(a[3],"\x242"));a[4].test(e[2])&&(e[2]=a[5].test(e[2]));g[e[1]]=e[2]}}return g}var a=[/\b[\w\$\-]+\s*:\s*[^;]+/g,/([\w\$\-]+)\s*:\s*([^;]+)\s*/,/\'|\"/,/^\s*(\'|\")([^\1]*)\1\s*/,/^(true|false)\s*$/i,/\btrue\b/i];function b(g,d){var f=c(g,"tang-event");if(f){for(var e in f){var h=f[e].substr(1);h.indexOf("(")<0&&(h+="()");baidu.dom(g).on(e,new Function("baiduInstance('"+d+"') && baiduInstance('"+d+"')"+h))}}}})();magic.Base=function(){baidu.lang.Class.call(this);this._ids={};this._eid=this.guid+"__"};baidu.lang.inherits(magic.Base,baidu.lang.Class,"magic.Base").extend({getElement:function(a){return document.getElementById(this.$getId(a))},getElements:function(){var a={};var c=this._ids;for(var b in c){a[b]=this.getElement(b)}return a},$getId:function(a){a=baidu.lang.isString(a)?a:"";return this._ids[a]||(this._ids[a]=this._eid+a)},$mappingDom:function(a,b){if(baidu.lang.isString(b)){this._ids[a]=b}else{if(b&&b.nodeType){b.id?this._ids[a]=b.id:b.id=this.$getId(a)}}return this},$dispose:function(){this.fire("ondispose")&&baidu.lang.Class.prototype.dispose.call(this)}});magic.control=magic.control||{};magic.control.Layer=baidu.lang.createClass(function(a){this.width="auto";this.height="auto";baidu.object.extend(this,a||{})},{type:"magic.control.Layer",superClass:magic.Base}).extend({show:function(){if(this.fire("onbeforeshow")){this.getElement().style.display="";this.fire("onshow")}},hide:function(){if(this.fire("onbeforehide")){this.getElement().style.display="none";this.fire("onhide")}},setWidth:function(a){this.width=a;baidu(this.getElement()).width(a)},setHeight:function(a){this.height=a;baidu.dom(this.getElement()).height(a)},setSize:function(a){this.setWidth(a.width||a[0]);this.setHeight(a.height||a[1])}});magic.control.Popup=baidu.lang.createClass(function(a){var b=this;b.visible=false;b.autoHide=true;b.hideOnEscape=true;b.disposeOnHide=false;b.smartPosition=false;b.offsetX=0;b.offsetY=0;baidu.object.extend(this,a||{});b._parent=null;b._host=null;b._init_control_popup()},{superClass:magic.control.Layer,type:"magic.control.Popup"}).extend({setContent:function(a){this.getElement("content").innerHTML=a},attach:function(b,a){if(baidu.dom(b).size()){baidu.object.extend(this,a||{});this._host=baidu(b)[0];this.show()}},reposition:function(b){var d=this;!b&&d._host&&(b=baidu.dom(d._host).offset());if(b){d.top=b.top+d.offsetY+d._host.offsetHeight;d.left=b.left+d.offsetX;d._resupinate=false;if(d.smartPosition){var e=d.getElement().offsetHeight;var f=baidu.page.getViewHeight();var c=baidu.page.getScrollTop();var a=b.top-d.offsetY-e;if(d.top+e>c+f&&a>c&&a<c+f){d.top=b.top-d.offsetY-e;d._resupinate=true}}}d.fire("reposition");d.setPosition([d.left,d.top])},setPosition:function(a){this.setTop(a.top||a[1]);this.setLeft(a.left||a[0])},setTop:function(a){baidu.dom(this.getElement()).css("top",(this.top=a)+"px")},setLeft:function(a){baidu.dom(this.getElement()).css("left",(this.left=a)+"px")},_init_control_popup:function(){var f=this;function b(){f.reposition()}function e(h){h.keyCode==27&&f.hideOnEscape&&f.autoHide&&f.hide()}function a(){var h=f;do{d[h.guid]=true}while(h=h._parent)}var g=baidu.global.get("popupList");var d=baidu.global.get("popupProtect");f.on("show",function(){f.reposition();setTimeout(function(){f.guid&&(g[f.guid]=true)},1);f._host&&baidu.dom(f._host).on("click",a);baidu.dom(f.getElement()).on("click",a);baidu.dom(window).on("resize",b);baidu.dom(document).on("keyup",e);f.width!="auto"&&f.setWidth(f.width);f.height!="auto"&&f.setHeight(f.height);f.visible=true});function c(h){f.visible=false;delete g[f.guid];f._host&&baidu.dom(f._host).off("click",a);baidu.dom(f.getElement()).off("click",a);baidu.dom(window).off("resize",b);baidu.dom(document).off("keyup",e);h&&f.$dispose()}f.on("hide",function(){c(f.disposeOnHide)});f.on("dispose",function(){c(false)})}});(function(){var c=baidu.global.set("popupList",{},true);var a=baidu.global.set("popupProtect",{},true);function b(){for(var e in c){var d=baiduInstance(e);!a[e]&&d.autoHide&&d.hide()}for(var e in a){delete a[e]}}baidu.dom(window).on("resize",b);baidu.dom(window).on("scroll",b);baidu.dom(document).on("click",b)})();magic.Background=baidu.lang.createClass(function(b){var c=b||{},d=this;d.coverable=c.coverable||false;d.styleBox=c.styleBox;d.tagName="div";var a="filter:progid:DXImageTransform.Microsoft.Alpha(opacity:0);position:absolute;z-index:-1;top:0;left:0;width:100%;height:100%;";d._coverDom="<div style='"+a+"opacity:0;background-color:#FFFFFF'></div>";var e=baidu.browser;e.ie<7&&(d._coverDom="<iframe frameborder='0' style='"+a+"' src='about:blank'></iframe>");if(e.ie&&(!e.isStrict||e.ie<8)){d.size=[0,0];d.timer=setInterval(function(){d._forIE()},80)}this._innerHTML="<div class='tang-background-inner' style='width:100%;height:100%;' id='"+this.$getId("inner")+"'></div>"},{type:"magic.Background",superClass:magic.Base}).extend({render:function(a){var b=baidu.dom(a).get(0);b!=document.body&&baidu.dom(b).css("position")=="static"&&(b.style.position="relative");baidu.dom(b).prepend(this.toHTMLString())},$dispose:function(){var a=this.getElement();a.parentNode.removeChild(a);clearInterval(this.timer)},toHTMLString:function(a){return["<",(a||this.tagName)," class='tang-background",(baidu.browser.ie<7?" ie6__":""),"' id='",this.$getId(),"' style='position:absolute; top:0px; left:0px;",(this.timer?"width:10px;height:10px;":"width:100%;height:100%;"),"z-index:-9; -webkit-user-select:none; -moz-user-select:none;' ","onselectstart='return false'>",this._innerHTML,(this.coverable?this._coverDom||"":""),"</",(a||this.tagName),">"].join("")},setContent:function(a){this.getElement("inner").innerHTML=a},_forIE:function(){if(this.guid&&this.layer||((this.layer=this.getElement())&&this.layer.offsetHeight)){var i=this.layer;var c=this.container||i.parentNode;if(c&&c.style){var l=c.style,k=parseInt(l.borderTopWidth)||0,m=parseInt(l.borderRightWidth)||0,e=parseInt(l.borderBottomWidth)||0,a=parseInt(l.borderLeftWidth)||0,j=c.offsetWidth-m-a,b=c.offsetHeight-k-e;if(this.size[0]!=j||this.size[1]!=b){i.style.width=(this.size[0]=j)+"px";i.style.height=(this.size[1]=b)+"px"}if(this.styleBox&&this.table||(this.table=this.getElement("table"))){var g,f,d;g=g||parseInt(baidu.dom(this.table.rows[0]).getCurrentStyle("height"));d=d||parseInt(baidu.dom(this.table.rows[2]).getCurrentStyle("height"));this.table.rows[0].style.height=g+"px";this.table.rows[2].style.height=d+"px";this.table.rows[1].style.height=(this.layer.offsetHeight-g-d)+"px"}}}}});(function(){magic.Popup=function(b){var d=this;magic.control.Popup.call(d,b);d.content="";d.className="";d.styleBox=false;baidu.object.extend(this,b||{});var c=a.produce();d.$mappingDom("",c.getElement());d.$mappingDom("content",c.getElement("content"));c.getElement().style.zIndex=baidu.global.getZIndex("popup");d.setContent(d.content);d.className&&baidu.dom(c.getElement()).addClass(d.className);d.on("dispose",function(){d.className&&baidu.dom(c.getElement()).removeClass(d.className);d.setContent("");c.busy=false})};baidu.lang.inherits(magic.Popup,magic.control.Popup,"magic.Popup");var a={list:[],produce:function(){for(var b=0,d=this.list.length;b<d;b++){if(!this.list[b].busy){this.list[b].busy=true;return this.list[b]}}var c=new magic.Base();baidu.dom(document.body).prepend(["<div class='tang-popup' id='",c.$getId(),"' ","style='position:absolute; display:none;'>",(c.background=new magic.Background({coverable:true})).toHTMLString(),"<div class='tang-foreground' id='",c.$getId("content"),"'></div>","</div>"].join(""));c.busy=true;this.list.push(c);return c}}})();magic.control.Suggestion=baidu.lang.createClass(function(a){var b=this;baidu.object.extend(this,a||{});b.dataCache={};b.enableIndexs=[];b.selectedIndex=-1;b.currentQuery="";b.oldInputValue="";b.upDownArrowTimer=null;b.on("onload",function(){var f=b.getElement("input"),g=null;baidu.dom(b.getElement("input")).attr("autocomplete","off");b.oldInputValue=b.getElement("input").value;function d(){g=setInterval(function(){var h=f.value;if(!h&&b.isShowing()){b._hide()}else{if(h!=b.oldInputValue){h&&b.fire("onneeddata",h);b.oldInputValue=h}}},100)}d();var c=(function(){return b._keydownHandler()})();var e=function(h){if(g){clearInterval(g);d()}if(b.upDownArrowTimer){clearTimeout(b.upDownArrowTimer);b.upDownArrowTimer=null}};baidu.dom(f).on("keydown",c);baidu.dom(f).on("keyup",e);b.on("onmousedownitem",function(){clearInterval(g);setTimeout(function(){d()},500)});b.on("ondispose",function(){baidu.dom(f).off("keydown",c);baidu.dom(f).off("keyup",e);clearInterval(g)})});b.on("onrender",function(){var e=b.getElement("input"),d=b.getElement("suggestion"),c=function(){b.hide()},f=function(h){var h=h||window.event,g=h.target||h.srcElement;if(!b.suggestion){return}if(g==d||baidu.dom.contains(d,g)||g==b.getElement("input")){return}b.hide()};baidu.dom(window).on("blur",c);baidu.dom(document).on("click",f);b.on("ondispose",function(){baidu.dom(window).off("blur",c);baidu.dom(document).off("click",f)})});b.on("onneeddata",function(d,e){var c=b.dataCache;b.currentQuery=e;if(typeof c[e]=="undefined"){b.getData(e)}else{b.currentData=c[e];(b.currentData.length>0)?b.show():b.hide()}});b.on("beforeshow",function(){var e=b.currentData,d=0,c=e.length;b.enableIndexs=[];for(;d<c;d++){if(typeof e[d]["disable"]=="undefined"||e[d]["disable"]==false){b.enableIndexs.push(d)}}})},{type:"magic.control.Suggestion",superClass:magic.Base}).extend({tpl:{fix:"<div id='#{0}' class='#{1}'>#{2}</div>",body:'<table cellspacing="0" cellpadding="2" class="tang-suggestion-table"><tbody>#{0}</tbody></table>',item:'<tr><td id="#{0}" onmouseover="#{2}" onmouseout="#{3}" onmousedown="#{4}" onclick="#{5}" class="#{6}">#{1}</td></tr>'},render:function(){var b=this,a=new magic.Popup({autoHide:false,autoTurn:false,disposeOnHide:false}),c=a.getElement();baidu.dom(c).addClass("tang-suggestion-popup");b.$mappingDom("suggestion",c);b.suggestion=a;b.fire("onrender");return c},isShowing:function(){var b=this,a=b.getElement("suggestion");return a&&baidu.dom(a).css("display")!="none"},show:function(){var c=this,d=c.getElement("suggestion")||c.render(),e=c.getElement("input"),a,b;c.fire("beforeshow");c.suggestion.setContent(c._getSuggestionString());c.suggestion.attach(e,{offsetX:(c.offset&&c.offset.offsetX)||0,offsetY:(c.offset&&c.offset.offsetY)||-1});baidu.dom(d).css("display","block");if(c.offset&&c.offset.width){b=c.offset.width;baidu.dom("#"+c.suggestion.$getId("content")).css("width",parseInt(b)-2+"px")}else{b=e.offsetWidth;a=d.getElementsByTagName("table")[0],baidu.dom(a).css("width",parseInt(b)-2+"px");baidu.dom("#"+c.suggestion.$getId("content")).css("width",baidu(a).width()+"px")}c.selectedIndex=-1;c.fire("onshow")},hide:function(){var d=this,a=d.getElement("suggestion");if(!a||!d.isShowing()){return}if(d.selectedIndex>=0&&d.holdHighLight){var c=d.currentData,b=d.enableIndexs[d.selectedIndex];if(c[b]&&(typeof c[b].disable=="undefined"||c[b].disable==false)){d.$pick(b)}}else{d.oldInputValue=d.getElement("input").value}d._hide()},_hide:function(){var b=this,a=b.getElement("suggestion");baidu.dom(a).css("display","none");b.selectedIndex=-1;b.fire("onhide")},_getSuggestionString:function(){var g=this,f="",e=[],h=g.currentData,a=h.length,d=0,c;function b(i){return baidu.string.format(g.tpl.fix,g.$getId(i),g._getClass(i),g[i+"HTML"])}g.prependHTML&&(f+=b("prepend"));for(;d<a;d++){c="baiduInstance('"+g.guid+"')";e.push(baidu.string.format(g.tpl.item,g.$getId("item"+d),h[d].content,c+"._mouseOver(event, "+d+")",c+"._mouseOut(event, "+d+")",c+"._mouseDown(event, "+d+")",c+"._mouseClick(event, "+d+")",(typeof h[d]["disable"]=="undefined"||h[d]["disable"]==false)?"":"tang-suggestion-disable"))}f+=baidu.string.format(g.tpl.body,e.join(""));g.appendHTML&&(f+=b("append"));return f},getInputValue:function(){return this.getElement("input").value},getDataByIndex:function(a){return this.currentData[a]},_isEnable:function(a){var b=this;return baidu.array(b.enableIndexs).contains(a)},_getItemDom:function(a){return baidu.dom("#"+this.$getId("item"+a)).get(0)},_getClass:function(a){return"tang-suggestion-"+a},_focus:function(a){var b=this.enableIndexs;this.$pick(b[a]);this.$highlight(b[a])},$highlight:function(b){var d=this,a=d.enableIndexs,c=null;if(!d._isEnable(b)){return}d.selectedIndex>=0&&d.$clearHighlight();c=d._getItemDom(b);baidu.dom(c).addClass("tang-suggestion-current");d.selectedIndex=baidu.array(a).indexOf(b);d.fire("onhighlight",{index:b,value:d.getDataByIndex(b).value})},$clearHighlight:function(){var d=this,a=d.selectedIndex,c=null,b=0;b=d.enableIndexs[a];if(a>=0){c=d._getItemDom(b);baidu.dom(c).removeClass(d._getClass("current"));d.selectedIndex=-1;d.fire("onclearhighlight",{index:b,value:d.getDataByIndex(b).value})}},$pick:function(a){var d=this,c=d.currentData,b=c[a];if(d.fire("onbeforepick",{index:a,value:b.value})){d.getElement("input").value=b.value;d.oldInputValue=b.value;d.fire("onpick",{index:a,value:b.value})}},$confirm:function(a){var b=this;if(!b._isEnable(a)){return}b.$pick(a);b.fire("onconfirm",{index:a,value:b.getDataByIndex(a).value});b._hide()},_wrapData:function(e){var d=this,c=[],b=0,a=e.length;for(;b<a;b++){if(typeof e[b].value!="undefined"){c.push(e[b])}else{c.push({value:e[b],content:baidu.string.encodeHTML(e[b])})}}return c},getData:function(a){},receiveData:function(d,c){var b=this,a=b.$cacheData(d,c);b.selectedIndex=-1;if(d==b.getInputValue()){b.currentData=a;(c.length>0)?b.show():b.hide()}},$cacheData:function(d,c){var b=this,a=b._wrapData(c);b.dataCache[d]=a;return a},_mouseOver:function(c,a){var b=this;c=baidu.event(c);c.stopPropagation();if(b._isEnable(a)){b.$highlight(a);b.selectedIndex=baidu.array(b.enableIndexs).indexOf(a)}b.fire("onmouseoveritem",{index:a,value:b.getDataByIndex(a).value})},_mouseOut:function(c,a){var b=this;c=baidu.event(c);c.stopPropagation();if(!b.holdHighLight){b._isEnable(a)&&b.$clearHighlight()}b.fire("onmouseoutitem",{index:a,value:b.getDataByIndex(a).value})},_mouseDown:function(c,a){var b=this;c=baidu.event(c);c.stopPropagation();b.fire("onmousedownitem",{index:a,value:b.getDataByIndex(a).value})},_mouseClick:function(c,a){var b=this;c=baidu.event(c);c.stopPropagation();b.fire("onmouseclick",{index:a,value:b.getDataByIndex(a).value});b.$confirm(a)},_keydownHandler:function(){var b=this;function a(f){var e=b.getInputValue(),d=b.enableIndexs,c=b.selectedIndex;if(!e){return}if((e&&!b.isShowing())){b.fire("onneeddata",e);return}if(d.length==0){return}if(b.upDownArrowTimer){return}b.upDownArrowTimer=setTimeout(function(){clearTimeout(b.upDownArrowTimer);b.upDownArrowTimer=null},200);if("up"==f){switch(c){case -1:b.$clearHighlight();c=d.length-1;b._focus(c);break;case 0:c=-1;b.$clearHighlight();b.getElement("input").value=b.currentQuery;b.oldInputValue=b.currentQuery;break;default:c--;b._focus(c);break}}else{switch(c){case -1:c=0;b._focus(c);break;case d.length-1:c=-1;b.$clearHighlight();b.getElement("input").value=b.currentQuery;b.oldInputValue=b.currentQuery;break;default:c++;b._focus(c);break}}b.selectedIndex=c}return function(d){var c="up";switch(d.keyCode){case 27:case 9:b.hide();break;case 13:d.preventDefault();d.stopPropagation();if(b.selectedIndex>=0&&b.holdHighLight){b.$confirm(b.enableIndexs[b.selectedIndex])}else{b.fire("onconfirm",{data:b.getInputValue()});if(b.isShowing()){b._hide()}}break;case 40:c="down";case 38:d.preventDefault();d.stopPropagation();a(c);break;default:break}}},$dispose:function(){var a=this;if(a.disposed){return}if(a.suggestion){a.suggestion.$dispose();a.hide()}magic.Base.prototype.$dispose.call(a)}});magic.setup.suggestion=function(c,b){var c=baidu.dom("#"+c).get(0),a=magic.setup(c,magic.control.Suggestion,b);a.$mappingDom("input",c);a.fire("onload");return a};void function(){function a(b){this._options=b;this._constructor()}a.prototype._constructor=function(){var c=this,b=c._options;c._element=baidu.lang.isElement(b.content)&&b.content;c.guid=c._element.id||baidu.lang.guid()+"-carousel-item";c._element&&!c._element.id&&(c._element.id=c.guid)};a.prototype.render=function(h,g){if(this._element){return}var f=this,d=f._options,i=baidu.dom(h).children(),c=i[0]?i[0].tagName:"li",e="<"+c+' id="#{rsid}" class="#{class}">#{content}</'+c+">",b=g=="forward"?"append":"prepend";baidu.dom(h)[b](baidu.string.format(e,{rsid:f.guid,"class":"tang-carousel-item"+(d.empty?" tang-carousel-item-empty":""),content:d.empty?"&nbsp;":""}));f._element=baidu.dom("#"+f.guid).get(0)};a.prototype.insert=function(d,c){var b=this;if(b._element){c=="forward"?d.appendChild(b._element):d.insertBefore(b._element,d.firstChild)}else{b.render(d,c)}};a.prototype.loadContent=function(){var b=this};a.prototype.getElement=function(){var b=this;return b._element||baidu.dom("#"+this.guid).get(0)};magic.control.Carousel=baidu.lang.createClass(function(b){var d=this,e=b.focusRange,c;d._options=baidu.object.extend({viewSize:3,step:1,focusRange:{min:0,max:b.viewSize-1||2},orientation:"horizontal",originalIndex:0,isLoop:false},b);c=d._options;d._selectedIndex=c.originalIndex;e&&(c.focusRange={min:Math.max(0,e.min),max:Math.min(c.viewSize-1,e.max)});d._items=c.items||[];d._dataIds=[];d._datas={};d.on("onfocus",function(){d._scrolling=false});d.on("onload",function(g){var j=d._axis[d._options.orientation],f=d._selectedIndex,h=d._options,k=h.focusRange,i=baidu.fn.bind("_onEventHandler",d);d.$mappingDom("container",baidu(".tang-carousel-container",d.getElement())[0]).$mappingDom("element",baidu(".tang-carousel-element",d.getElement())[0]);baidu.dom(baidu.dom(d.getElement("element")).children()).each(function(l,n){var m=new a({content:n});d._dataIds.push(m.guid);d._datas[m.guid]=m;baidu.dom(n)[f==l?"addClass":"removeClass"]("tang-carousel-item-selected")});d._clear(f,k[f>(d._dataIds.length-1)/2?"max":"min"],true);d._resize();baidu.dom(d.getElement("element")).on("click",i);baidu.dom(d.getElement("element")).on("mouseover",i);baidu.dom(d.getElement("element")).on("mouseout",i);d.on("ondispose",function(){baidu.dom(d.getElement("element")).off("click",i);baidu.dom(d.getElement("element")).off("mouseover",i);baidu.dom(d.getElement("element")).off("mouseout",i)})})},{type:"magic.control.Carousel",superClass:magic.Base}).extend({_axis:{horizontal:{size:"width",offsetPos:"offsetLeft",offsetSize:"offsetWidth",scrollPos:"scrollLeft"},vertical:{size:"height",offsetPos:"offsetTop",offsetSize:"offsetHeight",scrollPos:"scrollTop"}},_onEventHandler:function(c){var g=this,e=g._options,d=g.getElement("element"),h=c.target;if(!baidu.dom.contains(g.getElement("element"),h)){return}var f=baidu.dom(h).closest(".tang-carousel-item").get(0);if(c.type==="mouseover"){var b=c.fromElement||c.relatedTarget}else{if(c.type==="mouseout"){var b=c.toElement||c.relatedTarget}}if(baidu.dom(b).closest(f).size()>0){return}g.fire("on"+c.type.toLowerCase()+"item",{DOMEvent:c,index:baidu.array.indexOf(g._dataIds,f.id)})},_getItemBound:function(){var e=this,c=e._options,b=c.orientation.toLowerCase()=="horizontal",d=e._axis[c.orientation],f=e._bound,g;if(!f){g=baidu.dom(e.getElement("element")).children().get(0);if(g){f=e._bound={marginPrev:parseInt(baidu.dom(g).css("margin"+(b?"Left":"Top")),10),marginNext:parseInt(baidu.dom(g).css("margin"+(b?"Right":"Bottom")),10),size:g[d.offsetSize]};f.bound=f.size+(b?(f.marginPrev+f.marginNext):Math.max(f.marginPrev,f.marginNext))}}return f||{marginPrev:0,marginNext:0,size:0,bound:0}},_resize:function(){var d=this,c=d._axis[d._options.orientation],b=d.getElement("element"),e=baidu.dom(b).children();b.style[c.size]=e.length*d._getItemBound().bound+"px"},_clear:function(h,g,f){var i=this,e=i._axis[i._options.orientation],b=i._options,j=b.viewSize,d=b.focusRange,l=i._dataIds.length,c=baidu.makeArray(baidu.dom(i.getElement("element")).children()),k=baidu.array(c).indexOf(i._getItem(h).getElement());if(f){h-d.min<0&&(g=h);h+j-d.max>l&&(g=j-l+h)}baidu(c).each(function(m,n){(m<k-g||m>k+j-g-1)&&baidu.dom(n).remove()});i.getElement("container")[e.scrollPos]=0},_getItem:function(b){var c=this;return c._datas[typeof b=="string"?b:c._dataIds[b]]},_toggle:function(b){var c=this;baidu.dom("#"+c._dataIds[c._selectedIndex]).removeClass("tang-carousel-item-selected");c._selectedIndex=b;baidu.dom("#"+c._dataIds[b]).addClass("tang-carousel-item-selected")},_scrollTo:function(m,u){var x=this,c=x._options,v=c.focusRange,h=x._selectedIndex,g=x._axis[c.orientation],u=u||(m>h?"forward":"backward"),f=u.toLowerCase()=="forward",q=x.getElement("container"),e=x.getElement("element"),b=x._getItemBound(),y=baidu.dom("#"+x._getItem(m).guid).get(0),t=x._dataIds.length,k=baidu.makeArray(baidu.dom(e).children()),w=baidu.array.indexOf(k,x._getItem(h).getElement()),s=((f?1:-1)*(m-h)+t)%t+(f?c.viewSize-v.max-1:v.min)-(f?k.length-w-1:w),n=[],l,p,j,o,d;if(x._scrolling){return}x._scrolling=true;if(!y||y[g.offsetPos]<v.min*b.bound||y[g.offsetPos]-b.marginPrev>v.max*b.bound){for(var r=0;r<s;r++){l=(h+(f?k.length-w-1:-w)+(f?1:-1)*(r+1)+t)%t;p=baidu.dom("#"+x._dataIds[l]).get(0);o=p?new a({empty:true}):x._getItem(l);o.insert(e,u);o.loadContent();p&&n.push({empty:o.getElement(),item:p})}x._resize();!f&&(q[g.scrollPos]+=b.bound*s);if(x.fire("onbeforescroll",{index:m,distance:(f?1:-1)*b.bound*s,empty:n})){x._toggle(m);while(n.length>0){d=n.shift();e.replaceChild(d.item,d.empty);baidu.dom(d.empty).remove()}x._clear(m,v[f?"max":"min"]);x._resize();x.fire("onfocus",{direction:u})}}else{x._toggle(m);x.fire("onfocus",{direction:u})}},_basicFlip:function(g){var h=this,f=h._options,i=f.focusRange,d=(g=="forward")?1:-1,b=h._selectedIndex,c=h._dataIds.length,e=f.isLoop?(b+d*f.step+c)%c:Math.min(c-1-(f.viewSize-1-i.max),Math.max(0+i.min,b+d*f.step));h._scrollTo(e,g)},focusPrev:function(){this._basicFlip("backward")},focusNext:function(){this._basicFlip("forward")},focus:function(b,c){var b=Math.min(Math.max(0,b),this._dataIds.length-1);this._scrollTo(b,c)},getCurrentIndex:function(){return this._selectedIndex},getTotalCount:function(){return this._dataIds.length},$dispose:function(){var b=this;if(b.disposed){return}magic.Base.prototype.$dispose.call(b)}})}();magic.Carousel=baidu.lang.createClass(function(a){},{type:"magic.Carousel",superClass:magic.control.Carousel}).extend({tplItem:'<li class="#{class}">#{content}</li>',toHTMLString:function(){var c=this,a=c._options.items.length,d=[];for(var b=0;b<a;b++){d.push(baidu.string.format(c.tplItem,{"class":"tang-carousel-item",content:c._items[b].content}))}return baidu.string.format('<div class="#{containerClass}"><ul class="#{elementClass}">#{content}</ul></div>',{containerClass:"tang-carousel-container",elementClass:"tang-carousel-element",content:d.join("")})},render:function(c){var b=this,a;if(b.getElement()){return}b.$mappingDom("",baidu.dom("#"+c).get(0)||document.body);a=b.getElement();baidu.dom(a).addClass("tang-ui tang-carousel").append(b.toHTMLString());b.fire("ondomready");b.fire("onload")},$dispose:function(){var b=this,a;if(b.disposed){return}baidu.dom(b.getElement()).removeClass("tang-ui tang-carousel");a=b.getElement("container");magic.Base.prototype.$dispose.call(b);baidu.dom(a).remove();a=null}});magic.setup.carousel=function(c,b){var a=magic.setup(baidu.dom("#"+c).get(0),magic.control.Carousel,b);a.fire("onload");return a};baidu.lang.register(magic.control.Carousel,function(c){var e=this,b,d;e._options.button=baidu.object.extend({enable:true},e._options.button);if(!e._options.button.enable){return}b=baidu.fn.bind("_onButtonClick",e,"backward");d=baidu.fn.bind("_onButtonClick",e,"forward");function a(){var g=e.getElement("prev"),f=e.getElement("next");baidu.dom(g)[e.isFirst()?"addClass":"removeClass"]("tang-carousel-btn-prev-disabled");baidu.dom(f)[e.isLast()?"addClass":"removeClass"]("tang-carousel-btn-next-disabled");baidu.dom(g)[!e.isFirst()?"addClass":"removeClass"]("tang-carousel-btn-prev");baidu.dom(f)[!e.isLast()?"addClass":"removeClass"]("tang-carousel-btn-next")}e.on("onload",function(f){e.$mappingDom("prev",baidu(".tang-carousel-btn-prev",e.getElement())[0]).$mappingDom("next",baidu(".tang-carousel-btn-next",e.getElement())[0]);baidu.dom(e.getElement("prev")).on("click",b);baidu.dom(e.getElement("next")).on("click",d);a()});e.on("onfocus",function(){a()});e.on("ondispose",function(){baidu.dom(e.getElement("prev")).off("click",b);baidu.dom(e.getElement("next")).off("click",d)})},{_onButtonClick:function(c,a){var b=this;if(c=="forward"?b.isLast():b.isFirst()){return}b._basicFlip(c)},_isLimit:function(d){var c=this,b=c._options,f=b.focusRange,a=c._selectedIndex,e=(d=="forward")?a>=c.getTotalCount()-1-(b.viewSize-1-f.max):a<=f.min;return b.isLoop?false:e},isFirst:function(){return this._isLimit("backward")},isLast:function(){return this._isLimit("forward")}});baidu.lang.register(magic.Carousel,function(a){var b=this,c='<a href="#" class="tang-carousel-btn #{class}" onclick="return false;">#{content}</a>';b._options.button=baidu.object.extend({buttonLabel:{prev:"",next:""}},b._options.button);if(!b._options.button.enable){return}b.on("ondomready",function(e){var d=b.getElement();baidu.dom(d).prepend(baidu.string.format(c,{"class":"tang-carousel-btn-prev",content:b._options.button.buttonLabel.prev}));baidu.dom(d).append(baidu.string.format(c,{"class":"tang-carousel-btn-next",content:b._options.button.buttonLabel.next}));b.on("ondispose",function(){baidu(["prev","next"]).each(function(f,g){baidu.dom(b.getElement(g)).remove()})})})});baidu.lang.register(magic.control.Carousel,function(b){var c=this,a;c._options.autoScroll=baidu.object.extend({enable:true,interval:1000,direction:"forward"},c._options.autoScroll);a=c._options.autoScroll;if(!a.enable){return}a._autoScrolling=true;a.direction=a.direction.toLowerCase();c.on("onload",function(d){var e=baidu.fn.bind("_onMouseEventHandler",c);baidu.dom(c.getElement("element")).on("mouseenter",e);baidu.dom(c.getElement("element")).on("mouseleave",e);c.on("ondispose",function(){baidu.dom(c.getElement("element")).off("mouseenter",e);baidu.dom(c.getElement("element")).off("mouseleave",e)});c.start()});c.on("onfocus",function(d){if(!a._autoScrolling){return}d.target.start()});c.on("ondispose",function(d){d.target.stop()})},{_onMouseEventHandler:function(a){var c=this,d={mouseover:"mouseenter",mouseout:"mouseleave"},b=a.type;c.fire("on"+(d[b]||b),{DOMEvent:a})},start:function(){var b=this,a=b._options.autoScroll;a._autoScrolling=true;clearTimeout(a._autoScrollTimeout);a._autoScrollTimeout=setTimeout(function(){b._basicFlip(a.direction)},a.interval)},stop:function(){var b=this,a=b._options.autoScroll;clearTimeout(a._autoScrollTimeout);a._autoScrolling=false}});baidu.lang.register(magic.control.Carousel,function(a){var b=this;b._options.fx=baidu.object.extend({enable:true},b._options.fx);if(!b._options.fx.enable){return}b.on("onbeforescroll",function(e){e.returnValue=false;if(baidu.fx.current(b.getElement("container"))){return}var f=b._options,g=b._axis[f.orientation],d=f.orientation=="horizontal",c=b.getElement("container"),i=c[g.scrollPos]+e.distance,h=baidu.object.extend({onbeforeupdate:function(){if(e.empty.length<=0){return}var l=e.empty[0],j,k;if(e.distance<0?l.empty[g.offsetPos]+l.empty[g.offsetSize]-c[g.scrollPos]>=0:l.empty[g.offsetPos]-c[g.scrollPos]<=c[g.offsetSize]){j=l.empty.parentNode;k=l.empty.cloneNode(true);j.replaceChild(k,l.empty);j.replaceChild(l.empty,l.item);j.replaceChild(l.item,k);e.empty.shift()}},onafterfinish:function(){if(b.disposed){return}b._toggle(e.index);b._clear(e.index,f.focusRange[e.distance<0?"min":"max"]);b._resize();b.fire("onfocus",{direction:e.distance>0?"forward":"backward"})}},f.fx);baidu.fx.scrollTo(c,{x:d?i:0,y:d?0:i},h)})});baidu.lang.register(magic.control.Carousel,function(a){var b=this;b._options.itemsModify=baidu.object.extend({enable:true},b._options.itemsModify);if(!b._options.itemsModify.enable){return}},{removeItem:function(g){if(g>=this._dataIds.length){return}var i=this,c=i._options.focusRange,j=i._options.viewSize,d=i.getElement("element"),b=baidu.makeArray(baidu.dom(d).children()),k=i._dataIds.length,h=baidu("#"+i._dataIds[g]),f=[],e,a;baidu.array(b).each(function(l,m){f.push(m.id)});if(baidu.array(f).indexOf(i._dataIds[g])!=-1){baidu(h).remove();if(i._dataIds.length>j){e=baidu.array(i._dataIds).indexOf(b[j-1].id)+1;if(e==i._dataIds.length){e=0}a=i._getItem(e);a.insert(d,"forward");a.loadContent();i._resize()}}delete i._datas[i._getItem(g).guid];baidu.array(i._dataIds).removeAt(g);if(g>=i._dataIds.length){g=0}if(i._selectedIndex==g&&i._dataIds.length>0){i.focus(g)}}});magic.Pager=baidu.lang.createClass(function(a){var b=this;this.currentPage=1;this.totalPage=1;this.viewSize=10;this.currentPagePos=4;this.labelFirst="首页";this.labelPrev="上一页";this.labelNext="下一页";this.labelLast="尾页";this.tplURL="##{pageNum}";this.tplLabelNormal="#{pageNum}";this.tplLabelCurrent="#{pageNum}";baidu.object.extend(this,a);this.currentPage=Math.max(this.currentPage,1)},{type:"magic.Pager",superClass:magic.Base}).extend({_buildLink:function(b,a,c){return"<a onclick=\"return baiduInstance('"+this.guid+"').$update("+b+')" href="'+baidu.string.format(this.tplURL,{pageNum:b})+'" class="tang-pager-'+a+'">'+c+"</a>"},"$update":function(b){this.currentPage=b;var a=this.getElement();a.innerHTML="";this.render(this.$getId());return this.fire("pagechange",{pageNum:b})},"$toHTMLString":function(){var d,b=[],c=this.totalPage<this.viewSize||this.currentPage<=this.currentPagePos?1:Math.min(this.currentPage-this.currentPagePos,this.totalPage-this.viewSize+1),a=Math.min(this.totalPage,c+this.viewSize-1);b.push('<div id="'+this.$getId("main")+'" class="tang-pager-main">');if(1<this.currentPage){b.push(this._buildLink(1,"first",this.labelFirst));b.push(this._buildLink(this.currentPage-1,"previous",this.labelPrev))}for(d=c;d<this.currentPage;d++){b.push(this._buildLink(d,"normal",baidu.string.format(this.tplLabelNormal,{pageNum:d})))}b.push('<span class="tang-pager-current">'+baidu.string.format(this.tplLabelCurrent,{pageNum:this.currentPage})+"</span>");for(d=this.currentPage+1;d<=a;d++){b.push(this._buildLink(d,"normal",baidu.string.format(this.tplLabelNormal,{pageNum:d})))}if(this.totalPage>this.currentPage){b.push(this._buildLink(this.currentPage+1,"next",this.labelNext));b.push(this._buildLink(this.totalPage,"last",this.labelLast))}b.push("</div>");return b.join("")},render:function(a){if(!this.getElement()){this.$mappingDom("",a||document.body)}a=baidu.dom("#"+a);baidu.dom(a).addClass("tang-pager").append(this.$toHTMLString());this.fire("load")},"$dispose":function(){if(this.disposed){return}var b=this.getElement(),a=this.getElement("main");baidu.dom(b).removeClass("tang-pager");magic.Base.prototype.$dispose.call(this);baidu.dom(a).remove();b=a=null}});magic.Calendar=baidu.lang.createClass(function(a){var b=this;b._options=baidu.object.extend({weekStart:"sun",initDate:new Date(),highlightDates:[],disabledDates:[],disabledDayOfWeek:[],language:"zh-CN"},a||{});b.currentDate=new Date(b._options.initDate);b.selectedDate=new Date(b._options.initDate);b.dayNames=[]},{type:"magic.Calendar",superClass:magic.Base});magic.Calendar.extend({tplSkeleton:'<div id="#{calendarId}" class="#{calendarClass}"><div id="#{titleId}" class="#{titleClass}"></div><div id="#{tableId}" class="#{tableClass}"></div><div id="#{footerId}" class="#{footerClass}"></div></div>',tplDate:'<td id="#{id}" class="#{class}" onmouseover="#{mouseover}" onmouseout="#{mouseout}" onclick="#{click}">#{date}</td>',render:function(a){var b=this;if(baidu.type(a)==="string"){a="#"+a}b.container=baidu(a)[0];b._renderSkeleton();b._renderTitle();b._renderDateTable();b._renderNavBtn();b._bindTable();b._bindNavBtn();b.fire("render")},_rerender:function(){var a=this;a._renderTitle();a._renderDateTable();a._bindTable()},_getId:function(a){return this._eid+(a===undefined?"tang_calendar":"tang_calendar_"+a)},_getClass:function(a){return a===undefined?"tang-calendar":"tang-calendar-"+a},_renderSkeleton:function(){var b=this,a=b.container;baidu(a).append(baidu.string.format(b.tplSkeleton,{calendarId:b._getId(),calendarClass:b._getClass(),titleId:b._getId("title"),titleClass:b._getClass("title"),tableId:b._getId("table"),tableClass:b._getClass("table"),footerId:b._getId("footer"),footerClass:b._getClass("footer")}));b.titleEl=baidu("#"+b._getId("title"))[0];b.tableEl=baidu("#"+b._getId("table"))[0];var c=baidu("#"+b._getId("footer"));b.footerEl=c[0];c.hide();b.$mappingDom("",baidu("#"+b._getId())[0]);b.$mappingDom("calendar",baidu("#"+b._getId())[0]);b.$mappingDom("title",b.titleEl);b.$mappingDom("table",b.tableEl);b.$mappingDom("footer",b.footerEl)},_renderTitle:function(){var c=this,a=c.currentDate,b=a.getFullYear(),d=a.getMonth()+1;c.titleEl.innerHTML=baidu.string.format(baidu.i18n.cultures[c._options.language].calendar.titleNames,{yyyy:b,MM:baidu.i18n.cultures[c._options.language].calendar.monthNamesShort[d-1]})},_renderDateTable:function(){var b=this._getTheadString(),a=this._getTbodyString();this.tableEl.innerHTML='<table border="0" cellpadding="0" cellspacing="0">'+b+a+"</table>"},_renderNavBtn:function(){var c=this,b=baidu("#"+c._getId())[0],e=document,d=e.createElement("div"),a=e.createElement("div"),f=e.createElement("div"),g=e.createElement("div");d.className=c._getClass("prebtn");a.className=c._getClass("nextbtn");f.className=c._getClass("yprebtn");g.className=c._getClass("ynextbtn");b.appendChild(d);b.appendChild(a);b.appendChild(f);b.appendChild(g);c.preBtn=d;c.nextBtn=a;c.ypreBtn=f;c.ynextBtn=g;c.$mappingDom("premonthbtn",d);c.$mappingDom("nextmonthbtn",a);c.$mappingDom("preyearbtn",f);c.$mappingDom("preyearhbtn",g)},_bindNavBtn:function(){var p=this,m=p.preBtn,l=p.nextBtn,q=p.ypreBtn,e=p.ynextBtn,b=false,c,f,g,j,n,r,d,h,o;baidu(m).on("click",c=function(){!b&&p.preMonth();b=false;p.fire("premonth")});baidu(l).on("click",f=function(){!b&&p.nextMonth();b=false;p.fire("nextmonth")});baidu(q).on("click",g=function(){!b&&p.preYear();b=false;p.fire("preyear")});baidu(e).on("click",j=function(){!b&&p.nextYear();b=false;p.fire("nextyear")});var i=null;var a=function(u,t){if(i){return}function s(){i=setTimeout(function(){t?(u=="pre"?p.preYear():p.nextYear()):(u=="pre"?p.preMonth():p.nextMonth());b=true;s()},500)}s()};var k=function(){clearTimeout(i);i=null};baidu(m).on("mousedown",n=function(){a("pre")});baidu(l).on("mousedown",r=function(){a("next")});baidu(q).on("mousedown",d=function(){a("pre",true)});baidu(e).on("mousedown",h=function(){a("next",true)});baidu(document).on("mouseup",o=function(){if(p.disposed){return}i&&k()});p.on("dispose",function(){baidu(m).off("click",c);baidu(l).off("click",f);baidu(q).off("click",g);baidu(e).off("click",j);baidu(m).off("mousedown",n);baidu(l).off("mousedown",r);baidu(q).off("mousedown",d);baidu(e).off("mousedown",h);baidu(document).off("mouseup",o)})},_getTheadString:function(){var g=this,h=["mon","tue","wed","thu","fri","sat","sun"],b,a=[],c=g._options.weekStart.toLowerCase(),d=baidu.array.indexOf(h,c),f=baidu.i18n.cultures[g._options.language].calendar.dayNames,e=0;a.push('<thead class="'+g._getClass("weekdays")+'"><tr>');for(;e<7;e++){d>6&&(d=0);g.dayNames.push(h[d]);b=f[h[d]];a.push("<th>"+b+"</th>");d++}a.push("</tr></thead>");return a.join("")},_getTbodyString:function(){var n=this,d=n.dayNames,m=["sun","mon","tue","wed","thu","fri","sat"],f=new Date(n.currentDate),o,p=0,c=[],q=0,b=baidu.i18n.date.getDaysInMonth(f.getFullYear(),f.getMonth()),a=5,h="",e="";f.setDate(1);o=f.getDay();p=baidu.array.indexOf(d,m[o]);if(p+b>35){a=6}f.setDate(f.getDate()-p);var l=0,k=0,g="";for(;l<a;l++){c.push("<tr>");for(;k<7;k++){g=n._getClass("date");h="";if(f.getDay()==0||f.getDay()==6){g+=" "+n._getClass("weekend")}if(n._datesEqual(new Date(),f)){g+=" "+n._getClass("today")}if(n._datesContains(n._options.highlightDates,f)){g+=" "+n._getClass("highlight")}if(n._datesContains(n._options.disabledDates,f)){g+=" "+n._getClass("disable")}if(n._dayOfWeekInDisabled(f.getDay())){g+=" "+n._getClass("disable")}if(n._datesEqual(n.selectedDate,f)){g+=" "+n._getClass("selected");h='id="'+n._getId("selected")+'"'}if(f.getMonth()<n.currentDate.getMonth()||f.getFullYear()<n.currentDate.getFullYear()){g+=" "+n._getClass("premonth")}else{if(f.getMonth()>n.currentDate.getMonth()||f.getFullYear()>n.currentDate.getFullYear()){g+=" "+n._getClass("nextmonth")}}e=n._formatDate(new Date(f.getFullYear()+"/"+(f.getMonth()+1)+"/"+f.getDate()));c.push("<td "+h+' class="'+g+'" date="'+e+'" onmouseover=baiduInstance("'+n.guid+'")._mouseoverHandler(event) onmouseout=baiduInstance("'+n.guid+'")._mouseoutHandler(event)>'+f.getDate()+"</td>");f.setDate(f.getDate()+1)}c.push("</tr>");k=0}return"<tbody>"+c.join("")+"</tbody>"},_formatDate:function(e){var b=e.getFullYear(),c=e.getMonth()+1,a=e.getDate();c=c>=10?c:("0"+c);a=a>=10?a:("0"+a);return b+"/"+c+"/"+a},_mouseoverHandler:function(c){var a=this,b;b=baidu.event(c).target;baidu(b).addClass(a._getClass("hover"));a.fire("mouseover",{target:b})},_mouseoutHandler:function(c){var a=this,b;b=baidu.event(c).target;baidu(b).removeClass(a._getClass("hover"));a.fire("mouseout",{target:b})},_bindTable:function(){var e=this,a=baidu("#"+e._getId("table"))[0].getElementsByTagName("tbody")[0],f,b,c,d,g;baidu(a).on("click",g=function(i){f=i.target;if(f.tagName.toUpperCase()!="TD"){return}b=f.getAttribute("date");c=new Date(b);var h=e.selectedDate;c.setHours(h.getHours());c.setMinutes(h.getMinutes());c.setSeconds(h.getSeconds());if(e._datesContains(e._options.disabledDates,c)){return}if(e._dayOfWeekInDisabled(c.getDay())){return}d=baidu("#"+e._getId("selected"))[0];if(d){d.id="";baidu(d).removeClass(e._getClass("selected"))}f.id=e._getId("selected");baidu(f).addClass(e._getClass("selected"));b=e._formatDate(c);e.selectedDate=new Date(b);e.fire("selectdate",{date:new Date(b)})});e.on("dispose",function(){baidu(a).off("click",g)})},_datesEqual:function(f,d){if(baidu.type(f)!="date"||baidu.type(d)!="date"){return}var c=f.getFullYear(),a=f.getMonth(),g=f.getDate(),b=d.getFullYear(),h=d.getMonth(),e=d.getDate();return(c==b)&&(a==h)&&(g==e)},_days:{mon:1,tue:2,wed:3,thu:4,fri:5,sat:6,sun:0},_dayOfWeekInDisabled:function(b){var c=this._options.disabledDayOfWeek,f=this._days,a=false,d=0,e;for(;d<c.length;d++){e=c[d];typeof e=="object"?(f[e.start]||0)<=b&&b<=f[e.end]&&(a=true):f[e]==b&&(a=true);if(a){break}}return a},_datesContains:function(g,f){var e=this,c=0,a=g.length,d,b=true;if(baidu.type(f)!="date"){return}for(;c<a;c++){d=g[c];if(baidu.lang.isDate(d)){if(e._datesEqual(d,f)){return true}}else{if(d.end){d.end=new Date(baidu.date.format(d.end,"yyyy/MM/dd")+" 23:59:59")}if((!d.start||f.getTime()>=d.start.getTime())&&(!d.end||f.getTime()<=d.end.getTime())){return true}}}return false},go:function(a,c){var b=this;b.currentDate.setFullYear(a);b.currentDate.setDate(1);c=c===undefined?b.currentDate.getMonth():c-1;b.currentDate.setMonth(c);b._rerender()},getDate:function(){return new Date(this.selectedDate)},setDate:function(b){var c=this,a=new Date(b);if(baidu.type(b)!="date"){return false}if(c._datesContains(c._options.disabledDates,a)){return}if(c._dayOfWeekInDisabled(a.getDay())){return}c.currentDate=new Date(b);c.selectedDate=new Date(b);c._rerender();return true},preMonth:function(){var d=this,a=d.currentDate,c=a.getMonth()+1,b=a.getFullYear();d.go(b,c-1)},nextMonth:function(){var d=this,a=d.currentDate,c=a.getMonth()+1,b=a.getFullYear();d.go(b,c+1)},preYear:function(){var b=this,a=b.currentDate;b.go(a.getFullYear()-1,a.getMonth()+1)},nextYear:function(){var b=this,a=b.currentDate;b.go(a.getFullYear()+1,a.getMonth()+1)},_preDay:function(){var b=this,a=new Date(b.selectedDate);a.setDate(a.getDate()-1);b.setDate(a);b.fire("selectdate",{date:a})},_nextDay:function(){var b=this,a=new Date(b.selectedDate);a.setDate(a.getDate()+1);b.setDate(a);b.fire("selectdate",{date:a})},$dispose:function(){var a=this;if(a.disposed){return}a.container.removeChild(baidu("#"+a._getId())[0]);magic.Base.prototype.$dispose.call(a)}});magic.control.DatePicker=baidu.lang.createClass(function(a){var b=this;b._options=a;b.language=a.language||"zh-CN";b.format=a.format||baidu.i18n.cultures[b.language].calendar.dateFormat||"yyyy-MM-dd HH:mm:ss";b.popupOption=baidu.object.merge({autoHide:false,autoTurn:false,disposeOnHide:false},a.popupOptions);b.calendarOption=baidu.object.merge({},a.calendarOptions);b.calendarOption.language=b.language;b.showing=false},{type:"magic.control.DatePicker",superClass:magic.Base}).extend({init:function(){var d=this,a=d.popup=new magic.Popup(d.popupOption),e=d.calendar=new magic.Calendar(d.calendarOption),c=d.input=d.getElement("input");if(d._options.title&&d._options.title.enable){d.init$title()}e.render(a.getElement("content"));d.calendar.on("selectdate",function(g,h){c.value=baidu.date.format(g.date,d.format);if(!(h&&h.ignoreHide)){d.hide()}d.fire("selectdate",{date:new Date(g.date)})});function b(){d.show()}function f(i){var h=baidu.event(i).target,g=e.getElement("calendar");if(h!=c&&!(baidu.dom.contains(g,h)||g==h)){d.hide()}}baidu(c).on("click focus",b);if(!("oninput" in document.body)){c.onpropertychange=function(){if(d.disposed){return}if(event.propertyName=="value"){this.oninput&&this.oninput(event)}}}c.oninput=function(){if(d.disposed){return}d._getInputDate()&&d.calendar.setDate(d._getInputDate())};baidu(document).on("click",f);d.on("dispose",function(){baidu(c).off("click",b);baidu(c).off("focus",b);baidu(document).off("click",f)});d.$mappingDom("calendar",e.getElement("calendar"))},show:function(){var b=this,a=new Date();if(b.showing){return}b.showing=true;b.calendar.setDate(b._getInputDate()||b.calendarOption.initDate||new Date());b.popup.attach(b.input,{offsetY:b.popupOption.offsetY||-1,offsetX:b.popupOption.offsetX||0});b.fire("show")},hide:function(){var a=this;if(!a.showing){return}a.showing=false;a.popup.hide();a.fire("hide")},getDate:function(){return new Date()},getSelectedDate:function(){return new Date(this.calendar.getDate())},_getInputDate:function(){var g=this,a=g.input.value,j=[/yyyy|yy/,/M{1,2}/,/d{1,2}/,/H{1,2}/,/m{1,2}/,/s{1,2}/],f=j.length,b=[],h,e,c;if(!a){return}for(var d=0;d<f;d++){if(h=j[d].exec(g.format)){e=h.index;b[d]=a.substring(e,e+h[0].length)}}c=new Date(b[0],b[1]-1,b[2],b[3]||null,b[4]||null,b[5]||null);if(baidu.lang.isDate(c)){return c}else{return}},$dispose:function(){var a=this;if(a.disposed){return}a.calendar.$dispose();a.popup.$dispose();magic.Base.prototype.$dispose.call(a)}});magic.setup.datePicker=function(c,b){if(baidu.type(c)==="string"){c="#"+c}var c=baidu(c)[0],a=magic.setup(c,magic.control.DatePicker,b);a.$mappingDom("input",c);a.init();return a};baidu.lang.register(magic.control.DatePicker,function(){var a=this;a._options.title=baidu.object.extend({enable:true},a._options.title);if(!a._options.title.enable){return}a.init$title=function(){var b=a.calendar;b.on("titlerender",function(){var e=baidu("#"+b._getId("year"))[0],d=baidu("#"+b._getId("month"))[0],h=baidu("#"+b._getId("yearselect"))[0],c=baidu("#"+b._getId("monthselect"))[0],g,f;baidu(e).on("click",function(){g=b.currentDate.getFullYear()-10;baidu(e).css("display","none");baidu(h).css("display","");while(g<=b.currentDate.getFullYear()+10){f=document.createElement("option");f.value=g;f.text=String(g);f.innerText=String(g);h.appendChild(f);g++}h.value=b.currentDate.getFullYear()});baidu(d).on("click",function(){baidu(d).css("display","none");baidu(c).css("display","");for(var j=1;j<13;j++){f=document.createElement("option");f.value=j;f.text=baidu.i18n.cultures[b._options.language].calendar.monthNamesShort[j-1];f.innerText=baidu.i18n.cultures[b._options.language].calendar.monthNamesShort[j-1];c.appendChild(f)}c.value=b.currentDate.getMonth()+1});baidu(h).on("change",function(j){var i=j.target.value;b.go(i,b.currentDate.getMonth()+1)});baidu(c).on("change",function(j){var i=j.target.value;b.go(b.currentDate.getFullYear(),i)})});b.tplTitle='<span id="#{id}" class="#{class}" style="cursor:pointer;">#{text}</span>';b._renderTitle=function(){var f=b.currentDate,h=f.getFullYear(),j=f.getMonth()+1,g="",e="",i='<select id="'+b._getId("yearselect")+'" style="display:none"></select>',c='<select id="'+b._getId("monthselect")+'" style="display:none"></select>';var d=baidu.i18n.cultures[b._options.language].calendar.titleNames;d=d.split("&nbsp;");if(/y/.test(d[0])){g=baidu.string.format(d[0],{yyyy:h});e=baidu.string.format(d[1],{MM:baidu.i18n.cultures[b._options.language].calendar.monthNamesShort[j-1]});this.titleEl.innerHTML=baidu.string.format(b.tplTitle,{id:b._getId("year"),"class":b._getClass("year"),text:g})+i+"&nbsp;&nbsp;"+baidu.string.format(b.tplTitle,{id:b._getId("month"),"class":b._getClass("month"),text:e})+c}else{g=baidu.string.format(d[1],{yyyy:h});e=baidu.string.format(d[0],{MM:baidu.i18n.cultures[b._options.language].calendar.monthNamesShort[j-1]});this.titleEl.innerHTML=baidu.string.format(b.tplTitle,{id:b._getId("month"),"class":b._getClass("month"),text:e})+c+"&nbsp;&nbsp;"+baidu.string.format(b.tplTitle,{id:b._getId("year"),"class":b._getClass("year"),text:g})+i}b.fire("titlerender")}}},{});magic.control.ComboBox=baidu.lang.createClass(function(a){var b=this;b._options=baidu.object.extend({items:[],originIndex:-1,readonly:false,viewSize:5,disabled:false,width:"100%"},a);b.selectValue="";b.highlightIndex=-1;b.menu=new magic.Popup();b.isFocus=false;b.disabled=this._options.disabled;b.tempValue="";b.menufocusing=false;if(!magic.control.ComboBox.instanceArray){magic.control.ComboBox.instanceArray=[]}magic.control.ComboBox.instanceArray.push(b.guid);b.on("load",function(){b.setWidth(b._options.width);b.menu._host=b.getElement("container");b.menu.offsetY=-1;b.menu.setContent(b._menuContainerToHTMLString());this._renderMenu();b.menu.on("show",function(){b.fire("show")});b.menu.on("beforeshow",function(c){c.returnValue=b.fire("beforeshow")});b.menu.on("beforehide",function(c){c.returnValue=b.fire("beforehide")});b.menu.on("hide",function(){b.fire("hide")});baidu(b.getElement("input-container")).keydown(function(){!b.disabled&&(magic.control.ComboBox.globalActive=b.guid)});baidu(b.getElement("input-container")).click(function(){!b.disabled&&(magic.control.ComboBox.globalActive=b.guid)});if(!b._options.readonly){baidu(b.getElement("arrow")).click(function(){this.focus();!b.disabled&&b.menu.show()});baidu(b.getElement("input")).keydown(function(c){b._keydownHandler(c)})}else{baidu(b.getElement("input-container")).click(function(){b.getElement("arrow").focus();(!b.disabled)&&b.menu.show()})}baidu(b.getElement("arrow")).keydown(function(c){c.preventDefault();b._keydownHandler(c)});if(b.disabled){baidu(b.getElement("container")).addClass("magic-combobox-disable");b.getElement("input").disabled=true}b._initInput();baidu(this.getElement("menu")).click(function(d){magic.control.ComboBox.globalActive=b.guid;var c=d.target;if(c==this){return}while(c.tagName!="LI"){c=c.parentNode}b.$confirm(c);b.fire("clickitem",{result:b._getResult(c)})});baidu(this.getElement("menu")).mouseover(function(d){b.$clearHighlight();var c=d.target;if(c==this){return}while(c.tagName!="LI"){c=c.parentNode}b.$highlight(c)})});b.on("show",function(){b._setViewSize()});b.on("hide",function(){b.menufocusing=false});b.on("focus",function(){b.isFocus=true});b.on("blur",function(){b.isFocus=false});b.on("highlight",function(c){b.highlightIndex=c.index});b.on("beforeshow",function(c){if(b._options.items.length==0){c.returnValue=false}})},{type:"magic.control.ComboBox",superClass:magic.Base}).extend({_initInput:function(){var a=this._options.originIndex;if(this._options.readonly&&a==-1){a=0}if(a!=-1){this.$setByIndex(a)}else{this.selectValue=this.getElement("input").value=""}},_setViewSize:function(){baidu(this.getElement("menu")).css("height","");var a=baidu(".magic-combobox-menu-item",this.getElement("menu"))[0].offsetHeight*this._options.viewSize,b=this.getElement("menu").offsetHeight,c=b>a?a:b;baidu(this.getElement("menu")).css("height",c)},_renderMenu:function(c){var b=this;c=c||this._options.items;var a=this.$menuContentToHTMLString(c);this.getElement("menu").innerHTML=a;baidu(b.menu.getElement()).addClass("magic-combobox-popup")},_keydownHandler:function(d){var b=38,g=40,a=13,f=baidu(".magic-combobox-menu-item",this.getElement("menu")),c=f.length;if(d.keyCode==a){this.menu.visible&&this.$confirm(f[this.highlightIndex])}else{if(d.keyCode==g||d.keyCode==b){if(!this.menu.visible){this.menu.show()}if(!this.menufocusing){this.menufocusing=true;this.tempValue=this.getElement("input").value}}}if(d.keyCode==g){this.$clearHighlight();if(++this.highlightIndex==c){this.highlightIndex=-1;this.getElement("input").value=this.tempValue;this.fire("pickOrigin",{content:this.tempValue})}else{this.$menufocus(f[this.highlightIndex])}}else{if(d.keyCode==b){d.preventDefault();this.$clearHighlight();if(this.highlightIndex==-1){this.highlightIndex=c}if(--this.highlightIndex==-1){this.getElement("input").value=this.tempValue;this.fire("pickOrigin",{content:this.tempValue})}else{this.$menufocus(f[this.highlightIndex])}}}},_getResult:function(a){return{value:baidu(a).attr("data-value"),index:baidu(a).attr("data-index"),content:baidu(a).text()}},_getValue:function(c){var a=this._options.items,b=a.length;while(b--){if(a[b].content==c){return a[b].value+""}}return null},"$pick":function(b){var a=this._getResult(b);if(this.fire("beforepick")){this.getElement("input").value=a.content;this.fire("pick",{result:a})}return a},"$menufocus":function(b){this.$highlight(b);var a=this.$pick(b);this.fire("menufocus",{result:a});return a},"$confirm":function(b){var a=b?this.$pick(b):{result:this.tempValue};this.menu.hide();this.fire("confirm",{result:a});if(this.selectValue!=a.value){this.fire("change",{from:"confirm",result:a})}this.selectValue=a.value;return a},"$highlight":function(a){baidu(a).addClass("magic-combobox-menu-item-hover");var b=baidu(a).attr("data-index");this.fire("highlight",{index:b})},"$clearHighlight":function(){var a=baidu(".magic-combobox-menu-item",this.getElement("menu"));a.removeClass("magic-combobox-menu-item-hover")},getValue:function(){return this.selectValue||this._getValue(this.getElement("input").value)||this.getElement("input").value},getSelectIndex:function(){for(var b=this._options.items,a=b.length;a--;){if(b[a].value+""===this.selectValue){return a}}return -1},setByValue:function(c){for(var b=this._options.items,a=b.length;a--;){if(b[a].value==c){this.selectValue=c;this.getElement("input").value=b[a].content;if(this.select){this.select.options[a].selected=true}break}}},"$setByIndex":function(a){var b=this._options.items[a]||this._options.items[0];this.getElement("input").value=b.content;this.selectValue=b.value;if(this.select){this.select.options[a].selected=true}},focus:function(){if(!this.isFocus){this.fire("focus")}},blur:function(){if(this.isFocus){var a=this._getValue(this.getElement("input").value);a=a?a:this.getElement("input").value;if(a!=this.selectValue){this.fire("change",{from:"blur"});this.selectValue=a}this.fire("blur")}},reset:function(){this._initInput();if(this.select){var a=this._options.originIndex==-1?0:this._options.originIndex;this.select.options[a].selected=true}},reload:function(a){this._options.items=a;this._renderMenu();this._initInput();this.highlightIndex=-1;this.fire("reload",{data:a})},disable:function(){if(!this.disabled){baidu(this.getElement("container")).addClass("magic-combobox-disable");this.getElement("input").disabled=true;this.disabled=true}},enable:function(){if(this.disabled){baidu(this.getElement("container")).removeClass("magic-combobox-disable");this.getElement("input").disabled=false;this.disabled=false}},setWidth:function(a){this.width=a;baidu(this.getElement("container")).css("width",a);this.menu.setWidth(this.getElement("container").offsetWidth)},"$dispose":function(){baidu(this.getElement("input-container")).off("click").off("keydown");baidu(this.getElement("input")).off("keydown").off("keyup");baidu(this.getElement("arrow")).off("click").off("keydown");baidu(this.getElement("menu")).off("click").off("mouseover").off("mouseout");this.menu.hide();this.menu.$dispose();baidu.array(magic.control.ComboBox.instanceArray).remove(this.guid);magic.Base.prototype.$dispose.call(this)}});(function(){magic.control.ComboBox.globalActive=null;function a(){var b=magic.control.ComboBox.globalActive;if(b!=null){var f=baiduInstance(b);f.focus()}var e=magic.control.ComboBox.instanceArray;if(e){for(var c=e.length;c--;){if(e[c]==b){continue}var d=baiduInstance(e[c]);if(d.isFocus){d.blur();break}}magic.control.ComboBox.globalActive=null}}baidu(document).click(a).keydown(a)})();magic.ComboBox=baidu.lang.createClass(function(a){},{type:"magic.ComboBox",superClass:magic.control.ComboBox}).extend({"$toHTMLString":function(){return['<div id="'+this.$getId("container")+'" class="magic-combobox">','<div id="'+this.$getId("input-container")+'" class="magic-combobox-input-container clearfix">','<div class="magic-combobox-input-outter">','<div class="magic-combobox-input-inner">','<input id="'+this.$getId("input")+'" class="magic-combobox-input"'+(this._options.readonly?"readonly":"")+">","</div>","</div>",'<a href="#" id="'+this.$getId("arrow")+'" class="magic-combobox-arrow" onclick="return false"></a>',"</div>","</div>"].join("")},_menuContainerToHTMLString:function(){return'<ul id="'+this.$getId("menu")+'" class="magic-combobox-menu"></ul>'},"$menuContentToHTMLString":function(b){var a=[];baidu(b).each(function(c,d){a.push('<li data-index="'+c+'" data-value="'+b[c].value+'" class="magic-combobox-menu-item">'+b[c].content+"</li>")});return a.join("")},render:function(a){baidu(a).append(this.$toHTMLString(this._options.items));this.fire("load")},"$dispose":function(){if(this.disposed){return}if(this.select){var c=this.select,b=c.parentNode}var a=this.getElement("container");magic.control.ComboBox.prototype.$dispose.call(this);baidu(a).remove();if(c){b.parentNode.insertBefore(c,b);baidu(b).remove();c.style.visibility="";c.style.width=""}a=null}});(function(){magic.setup.comboBox=function(e,d){d=d||{};var e=baidu.dom(e).get(0),c=a(e),g=null;baidu.object.extend(c,{width:e.offsetWidth+10,disabled:e.disabled});d=baidu.object.extend(c,d);var b=magic.setup(e,magic.ComboBox,d);baidu.dom(e).before('<span id="'+b.guid+'-host" class="magic-combobox-host"></span>');var f=baidu("#"+b.guid+"-host");f.append(e);b.select=e;e.style.width=(e.offsetWidth+15)+"px";e.style.visibility="hidden";b.render(f,"afterBegin");baidu(b.getElement("container")).addClass("magic-combobox-container-setup");b.on("change",function(i){if(i.from=="confirm"){if(i.result.index){e.options[i.result.index].selected=true}}else{if(i.from=="blur"){var h=this.getElement("input").value;if(!g){g=document.createElement("OPTION");g.selected=true;e.add(g)}g.value=g.text=h}}});b.on("reload",function(l){var m=l.data,k=m.length,j=0;e.options.length=0;for(;j<k;j++){var h=document.createElement("OPTION");h.value=m[j].value;h.text=m[j].content;e.add(h)}});return b};function a(c){var b=[],e=-1,d=c.options;baidu.each(d,function(f,g){b.push({value:g.value,content:g.text});if(g.selected){e=f}});return{items:b,originIndex:e}}})();(function(){var a=baidu.lang.createClass(function(b){var c=this;c._options=baidu.object.extend({circleTime:10,waitingTime:100,originValue:"",getValue:function(){return null}},b);c.previous=null;c.now="";c.fireTimer=0;c.timer=0;c.originValue=c._options.originValue;c.focusValue=null}).extend({_compare:function(b){if(!this.timer){return}b.now=b._options.getValue();if(b.now==b.previous&&b.focusValue!=b.now&&b.now!=b.originValue){if(b.fireTimer==0){b.fireTimer=setTimeout(function(){b.fire("fire",{value:b.now})},b._options.waitingTime)}}else{clearTimeout(b.fireTimer);b.fireTimer=0;b.previous=b.now;if(b.now!=b.originValue){b.originValue=null}if(b.now!=b.focusValue){b.focusValue=null}}},start:function(){var b=this;b.timer=setInterval(function(){b._compare(b)},b._options.circleTime)},stop:function(){clearInterval(this.timer);this.timer=null}});baidu.lang.register(magic.control.ComboBox,function(b){var c=this;c._options.suggestion=baidu.object.extend({enable:true},b.suggestion);if(!c._options.suggestion.enable||c._options.readonly){return}this.on("load",function(){c.timer=new a({getValue:function(){return c.getElement("input").value},originValue:this.getElement("input").value});c.timer.on("fire",function(f){if(f.value==""){c._renderMenu();c.menu.show()}else{var d=c._getMenuData(f.value);if(d.length>0){c._renderMenu(d);c.menu.show()}else{c.menu.visible&&c.menu.hide()}}});c.timer.start()});this.on("pick",function(d){c.timer.focusValue=d.result.content});this.on("pickOrigin",function(d){c.timer.focusValue=d.content});this.on("reload",function(d){c.timer.focusValue=this.getElement("input").value});this.on("dispose",function(d){if(c.timer){c.timer.stop()}})},{_getMenuData:function(b){return baidu.array(this._options.items).filter(function(d,c){return(d.content.indexOf(b)!=-1)})}})})();magic.control.Dialog=baidu.lang.createClass(function(a){var b=this;a=baidu.object.extend({width:400,height:300,left:0,top:0,contentType:"html",draggable:true},a||{});baidu.object.extend(b._options||(b._options={}),a);b._footerHeight=0;if(a.width<100){a.width=100}if(a.height<100){a.height=100}this.zIndex=baidu.global.getZIndex("dialog",5);this.disposeProcess=[];this.on("load",function(){var e=this.getElement(),i=this,l=i._options;if(typeof l.left=="number"||typeof l.top=="number"){this.setPosition(l)}if(typeof l.width=="number"||typeof l.height=="number"){this.setSize(this._options)}this._isShown=true;this.focus();var d=function(m){i.focus(m)};baidu(document).on("mousedown",d);this.disposeProcess.unshift(function(){baidu(document).off("mousedown",d)});if(l.draggable){var k=this.getElement("title"),j;var h=baidu.fn.bind;var i=this;var f=e.parentNode;var g=baidu(f).position();k.className+=" tang-title-dragable";var c={top:function(){var m=baidu(f).css("borderTopWidth");if(!/px/.test(m)){m=0}else{m=parseInt(m)}if(f==document.body){return 0-m}else{return 0-(g.top+m)}},right:function(){var n=baidu(".tang-background-inner",e)[0];var m=baidu(n).css("marginLeft")=="auto"?n.offsetLeft+"px":baidu(n).css("marginLeft");return baidu.page.getWidth()+c.left()-parseInt(m)},bottom:function(){var n=baidu(".tang-background-inner",e)[0];var m=baidu(n).css("marginTop")=="auto"?n.offsetTop+"px":baidu(n).css("marginTop");return baidu.page.getHeight()+c.top()-parseInt(m)},left:function(){var m=baidu(f).css("borderLeftWidth");if(!/px/.test(m)){m=0}else{m=parseInt(m)}if(f==document.body){return 0-m}else{return 0-(g.top+m)}}};baidu(k).on("mousedown",j=h(function(m){m.preventDefault();baidu.dom.drag(e,{ondragstart:h(function(){this.fire("dragstart")},this),ondrag:h(function(){this.fire("drag")},this),ondragend:h(function(){this.fire("dragstop")},this),range:[c.top(),c.right(),c.bottom(),c.left()]})},this));this.disposeProcess.unshift(function(){baidu(k).off("mousedown",j)})}});this.on("resize",function(e,f){var c=this.getElement("titleText");var d=this.getElement("titleButtons");if(typeof f.width=="number"){baidu(c).css("width",Math.max(0,f.width-d.clientWidth-20)+"px")}})},{type:"magic.control.Dialog",superClass:magic.Base});magic.control.Dialog.extend({isShowing:function(){return this._isShown},show:function(){if(this.fire("beforeshow")===false){return this}this.getElement().style.display="";this._isShown=true;this.fire("show")},hide:function(){if(this.fire("beforehide")===false){return this}this._isShown=false;this.getElement().style.display="none";this.fire("hide")},setTitleText:function(b){var a=this.getElement("titleText");a.innerHTML=baidu.string.encodeHTML(b)||"&nbsp;";return this},setContent:function(d,f){var b=this.getElement("content");var c,e,a;if(c=this._lastDom){a=c.parent;if(c.content===d){return this}if(c.target){a.insertBefore(c.content,c.target)}else{a.appendChild(c.content)}this._lastDom=null}switch(f){case"text":b.innerHTML=baidu.string.encodeHTML(d);baidu(b).removeClass("contentFrame");break;case"element":if(a=d.parentNode){a.insertBefore(e=document.createTextNode(""),d);this._lastDom={content:d,parent:d.parentNode,target:e}}b.innerHTML="";b.appendChild(d);break;case"frame":baidu(b).css("height",baidu(this.getElement("body")).css("height"));b.innerHTML="<iframe frameborder='no' src='"+d+"'></iframe>";baidu(b).hasClass("contentFrame")||baidu(b).addClass("contentFrame");break;default:b.innerHTML=d;baidu(b).removeClass("contentFrame");break}return this},focus:function(f){var c=baidu.global.get("dialogFocused").map,b=this.$getId()+"focus",a=function(){for(var e in c){e!=b&&(c[e]=false)}};c||(baidu.global.get("dialogFocused").map=c={});if(arguments.length){var d=f.target;if(baidu(d).closest(this.getElement()).size()>0){baidu(this.getElement()).css("zIndex",this.zIndex=baidu.global.getZIndex("dialog",5));if(c[b]!=true){this.fire("focus");a();c[b]=true}}else{c[b]=false}}else{baidu(this.getElement()).css("zIndex",this.zIndex=baidu.global.getZIndex("dialog",5));c[b]=true;a();this.fire("focus")}},setSize:function(b){var d=this.getElement("foreground");if(typeof b.width=="number"){baidu(d).css("width",(this._options.width=b.width)+"px")}if(typeof b.height=="number"){baidu(d).css("height",(this._options.height=b.height)+"px");var a=Math.max(0,this._options.height-this._titleHeight-this._footerHeight)+"px",c=baidu(this.getElement("content"));baidu(this.getElement("body")).css("height",a);c.hasClass("contentFrame")&&c.css("height",a)}this.fire("resize",b)},getSize:function(){return{width:this._options.width,height:this._options.height}},setPosition:function(a){if(typeof a.left=="number"){baidu(this.getElement()).css("left",(this._options.left=a.left)+"px")}if(typeof a.top=="number"){baidu(this.getElement()).css("top",(this._options.top=a.top)+"px")}this.fire("move",a)},getPosition:function(){return{left:this._options.left,top:this._options.top}},center:function(){var b=document[baidu.browser.isStrict?"documentElement":"body"];var a=b.clientWidth;var e=b.clientHeight;var d=(((a-this._options.width)/2)|0)+baidu.page.getScrollLeft();var c=(((e-this._options.height)/2)|0)+baidu.page.getScrollTop();this.setPosition({left:d,top:c})},$dispose:function(){var b=baidu.global.get("dialogFocused").map;if(b){delete b[this.$getId()+"focus"]}for(var c=0,a=this.disposeProcess.length;c<a;c++){this.disposeProcess[c].call(this)}magic.Base.prototype.$dispose.call(this)}});magic.Dialog=baidu.lang.createClass(function(a){},{type:"magic.Dialog",superClass:magic.control.Dialog});magic.Dialog.extend({render:function(d){var b=true;if(baidu.type(d)==="string"){d="#"+d}d=baidu(d)[0];if(!d){document.body.appendChild(d=document.createElement("div")),b=false}var c=magic.Dialog.template.join(""),a=this._options;baidu(d).addClass("tang-ui tang-dialog").css("display","block");baidu(d).append(baidu.string.format(c,{content:"",titleId:this.$getId("title"),bodyId:this.$getId("body"),contentId:this.$getId("content"),foregroundId:this.$getId("foreground"),footerId:this.$getId("footer"),footerContainerId:this.$getId("footerContainer")}));this._background=new magic.Background({coverable:true});this._background.render(d);this.$mappingDom("",d);this._renderHeader();this._titleHeight=this.getElement("title").offsetHeight||30;baidu(this.getElement("footer")).hide();this.fire("footer");this.setSize(a);this.setPosition(a);if(a.content){this.setContent(a.content,a.contentType)}this.fire("load");this.show();this.disposeProcess.push(function(){baidu(this.getElement("closeBtn")).off("click",this._closeBtnFn);this._background.$dispose();d.innerHTML="";baidu(d).removeClass("tang-ui tang-dialog");b||document.body.removeChild(d)})},_renderHeader:function(){var a=["<div class='buttons' id='",this.$getId("titleButtons"),"'>","<a id='",this.$getId("closeBtn"),"' class='close-btn' href='' onmousedown='event.stopPropagation && event.stopPropagation(); event.cancelBubble = true; return false;' onclick='return false;'></a>","</div>","<span id='",this.$getId("titleText"),"'>",baidu.string.encodeHTML(this._options.titleText||"")||"&nbsp;","</span>"];baidu(this.getElement("title")).append(a.join(""));baidu(this.getElement("closeBtn")).on("click",this._closeBtnFn=baidu.fn.bind(this.hide,this))}});magic.Dialog.template=["<div class='tang-foreground' id='#{foregroundId}'>","<div class='tang-title' id='#{titleId}'>","</div>","<div class='tang-body' id='#{bodyId}'>","<div class='tang-content' id='#{contentId}'>#{content}</div>","</div>","<div class='tang-footer' id='#{footerId}'>","<div id='#{footerContainerId}'></div>","</div>","</div>"];baidu.lang.register(magic.control.Dialog,function(a){a&&a.buttons&&a.buttons.enable&&this.on("footer",function(){this.buttons=null,baidu(this.getElement("footer")).show();this._createButton(a.buttons);baidu(this.getElement("footerContainer")).addClass("tang-footerContainer");var b=this.getElement("footer").offsetHeight;(!this.buttons||this.buttons.length==0)&&(b=30)&&baidu(this.getElement("footer")).css("height",30);this._footerHeight=b})},{_createButton:function(){var f=this,c=arguments.length>0?arguments[0]:{},d=baidu(f.getElement("footerContainer")),e=f.buttons||(f.buttons=[]),b=false,a=(function(){var g=['<a href="#" onClick="return false;" class="tang-dialog-button ',"",'">','<span class="tang-dialog-button-s">','<span class="tang-dialog-button-s-space">&nbsp;</span>','<span class="tang-dialog-button-s-text">',"","</span>","</span>","</a>"];return function(i,h){i.disabled?(g[1]="tang-dialog-button-disabled"):(g[1]="");g[6]=i.text||"&nbsp;";baidu(h).append(g.join(""));return baidu(h).children().get(0)}})();baidu.forEach(c.items||[],function(i,g){var j,h;d.append(h=baidu('<span class="tang-dialog-button-carrier"></span>')[0]);h=typeof i=="object"?(i.builder||a).call(this,i,h,f,g):i;!b&&i.focused&&!i.disabled&&(b=true)&&h.focus();e.push(h);i.disabled||i.click&&baidu(h).on("click",j=function(){i.click.call(this,f)});j&&this.disposeProcess.push(function(){baidu(h).off("click",j)})},f);d.addClass("tang-button-"+(c.align||"right"))}});(function(){var a=[];function c(){for(var e=0,d=a.length;e<d;e++){a[e]()}a=[]}function b(){var g=baidu.browser.ie;var e=document.createElement("div");e.className="tang-mask";g==6&&baidu(e).css("position","absolute");baidu(e).css("zIndex",baidu.global.getZIndex("dialog",-5));document.body.appendChild(e);function f(){e.style.display="none";baidu(e).css("height",baidu.page.getViewHeight()+"px");baidu(e).css("width",baidu.page.getViewWidth()+"px");e.style.display=""}function d(){e.style.display="none";baidu(e).css("top",baidu.page.getScrollTop()+"px");baidu(e).css("left",baidu.page.getScrollLeft()+"px");e.style.display=""}f();g==6&&d();baidu(window).on("resize",f);a.push(function(){baidu(window).off("resize",f)});g==6&&baidu(window).on("scroll",d);g==6&&a.push(function(){baidu(window).off("scroll",d)});a.push(function(){document.body.removeChild(e)})}magic.Dialog.alert=function(){var k={},g={width:360,height:140,titleText:"",content:"",buttons:{enable:true,items:[k]}},f={},h,e,i,j;if(!baidu.object.isPlain(arguments[0])){arguments[0]&&(f.content=arguments[0]);arguments[1]&&(f.titleText=arguments[1]);arguments[2]&&(f.ok=arguments[2])}else{f=arguments[0]}if(baidu.object.isPlain(f.ok)){k.text=f.ok.label;h=f.ok.callback}else{k.text=baidu.i18n.cultures[baidu.i18n.currentLocale].language.ok;h=f.ok}h||(h=baidu.fn.blank);f.ok=null;delete f.ok;baidu.object.extend(g,f||{});var d=new magic.Dialog(g);k.click=function(){c();h.call(d)};d.render();d.center();j=baidu("#"+d.$getId());baidu(d.getElement("closeBtn")).on("click",e=function(){c();h.call(d)});a.push(function(){baidu(d.getElement("closeBtn")).off("click",e)});baidu(document).on("keydown",i=function(l){l=l||window.event;switch(l.keyCode){case 27:k.click();break;case 13:l.preventDefault();l.stopPropagation();k.click();break;default:break}});a.push(function(){baidu(document).off("keydown",i)});a.push(function(){d.$dispose()});b();return d};magic.alert=magic.Dialog.alert;magic.Dialog.confirm=function(){var h={},l={},f={width:360,height:140,titleText:"",content:"",buttons:{enable:true,items:[h,l]}},k={},e,d,g,i;if(!baidu.object.isPlain(arguments[0])){arguments[0]&&(k.content=arguments[0]);arguments[1]&&(k.titleText=arguments[1]);arguments[2]&&(k.ok=arguments[2]);arguments[3]&&(k.cancel=arguments[3])}else{k=arguments[0]}if(baidu.object.isPlain(k.ok)){h.text=k.ok.label;e=k.ok.callback}else{h.text=baidu.i18n.cultures[baidu.i18n.currentLocale].language.ok;e=k.ok}if(baidu.object.isPlain(k.cancel)){l.text=k.cancel.label;d=k.cancel.callback}else{l.text=baidu.i18n.cultures[baidu.i18n.currentLocale].language.cancel;d=k.cancel}e||(e=baidu.fn.blank);k.ok=null;delete k.ok;d||(d=baidu.fn.blank);k.cancel=null;delete k.cancel;baidu.object.extend(f,k||{});var j=new magic.Dialog(f);h.click=function(){e.call(j);c()};l.click=function(){d.call(j);c()};j.render();j.center();var m=baidu("#"+j.$getId());baidu(j.getElement("closeBtn")).on("click",g=function(){c();d.call(j)});a.push(function(){baidu(j.getElement("closeBtn")).off("click",g)});baidu(document).on("keydown",i=function(n){n=n||window.event;switch(n.keyCode){case 27:l.click();break;case 13:n.preventDefault();n.stopPropagation();h.click();break;default:break}});a.push(function(){baidu(document).off("keydown",i)});a.push(function(){j.$dispose()});b();return j};magic.confirm=magic.Dialog.confirm})();magic.setup.background=function(e,a){var c=a||{};var b=magic.setup(baidu.dom(e).get(0)||e,magic.Background,c);var g=b.getElement(),d=g.style,f=g.parentNode;d.top="0px";d.left="0px";d.width=b.timer?"10px":"100%";d.height=b.timer?"10px":"100%";d.position="absolute";d.zIndex=-9;b.coverable&&baidu.dom(g).append(b._coverDom||"");f!=document.body&&baidu.dom(f).css("position")=="static"&&(f.style.position="relative");return b};magic.setup.dialog=function(d,k){if(baidu.type(d)==="string"){d="#"+d}d=baidu(d)[0];var c=k||{};var h=magic.setup(d,magic.control.Dialog,c),b=h.getElement(),j=d.childNodes,e;for(var g=0,f=j.length;g<f;g++){if(j[g].nodeType!=3&&~j[g].className.indexOf("tang-background")){magic.setup.background(j[g],{coverable:true});break}}h.$mappingDom("title",baidu(".tang-title",b)[0]);h.$mappingDom("titleText",baidu("span",h.getElement("title"))[0]);h.$mappingDom("titleButtons",baidu(".buttons",h.getElement("title"))[0]);h.$mappingDom("body",baidu(".tang-body",b)[0]);h.$mappingDom("content",baidu(".content",h.getElement("body"))[0]);h.$mappingDom("closeBtn",baidu(".close-btn",h.getElement("title"))[0]);h.$mappingDom("foreground",baidu(".tang-foreground",b)[0]);h.$mappingDom("footer",(e=baidu(".tang-footer",b))[0]);h.$mappingDom("footerContainer",e.children()[0]);e.hide();h._titleHeight=h.getElement("title").offsetHeight||30;h.fire("footer");var a=h._options;if(typeof c.left=="undefined"){a.left=baidu(b).css("left")=="auto"?0:baidu(b).css("left")}if(typeof c.top=="undefined"){a.top=baidu(b).css("top")=="auto"?0:baidu(b).css("top")}if(typeof a.width!="number"){a.width=b.clientWidth}if(typeof a.height!="number"){a.height=b.clientHeight}if(a.width<100){a.width=100}if(a.height<100){a.height=100}h.fire("load");h.show();if(a.titleText){h.setTitleText(a.titleText)}if(a.content){h.setContent(a.content,a.contentType||"html")}return h};magic.Mask=function(c){var e=this;magic.control.Layer.call(this);e.zIndex=999;e.opacity=0.3;e.bgColor="#000000";e.coverable=false;e.container=document.body;baidu.object.extend(e,c||{});var d=baidu.browser.safari,f=baidu.browser.ie;baidu.dom(e.container).prepend(e.toHTMLString());if(f==6){e.getElement().style.position="absolute"}function b(){if(e.container==document.body){var h=e.getElement().style;h.display="none";e.setSize([baidu.page.getViewWidth(),baidu.page.getViewHeight()]);h.display=""}}function a(){if(e.container==document.body){var h=e.getElement().style;h.display="none";h.top=baidu.page.getScrollTop()+"px";h.left=baidu.page.getScrollLeft()+"px";h.display=""}}function g(k){var n=document.getElementsByTagName("object");var j=k?"visible":"hidden";for(var m=0,p,h=n.length;m<h;m++){p=n[m];p.style.visibility=j}}e.on("show",function(){b();f==6&&a();baidu.dom(window).on("resize",b);f==6&&baidu.dom(window).on("scroll",a);var h=e.getElement().style;h.opacity=e.opacity;h.zIndex=e.zIndex;h.filter="alpha(opacity="+e.opacity*100+")";h.backgroundColor=e.bgColor;d&&g(false)});e.on("hide",function(){baidu.dom(window).off("resize",b);f==6&&baidu.dom(window).off("scroll",a);d&&g(true)})};baidu.lang.inherits(magic.Mask,magic.control.Layer,"magic.Mask").extend({toHTMLString:function(){return"<div id='"+this.$getId()+"' style='top:0px; left:0px; position:fixed; display:none;'>"+("<iframe frameborder='0' style='filter:progid:DXImageTransform.Microsoft.Alpha(opacity:0);position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:-1' src='about:blank'></iframe><div style='position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:-1;'>&nbsp;</div>")+"</div>"},$dispose:function(){var a=this.getElement();this.fire("hide");a.parentNode.removeChild(a)}});baidu.lang.register(magic.control.Dialog,function(a){if(a&&a.mask&&a.mask.enable){this.renderMask();this.on("load",function(){if(!this._options.left){this.center()}});this.on("show",function(){this.showMask()});this.on("hide",function(){this.hideMask()});this.disposeProcess.push(function(){this._mask.$dispose()})}},{renderMask:function(){if(this._mask){return this}var a=this._options.mask;this._mask=new magic.Mask({opacity:a.opacity||0.15,bgColor:a.bgColor||"#000",zIndex:this.zIndex-1});return this},showMask:function(){this._mask.show();return this},hideMask:function(){this._mask.hide();return this}});magic.control.Slider=baidu.lang.createClass(function(b){var c=this,d=c._info=baidu.object.extend({accuracy:0,_status:"enable"},b),a=d._isVertical=d.orientation=="vertical";d.direction=="backward"&&(d._oppsite=true);baidu.object.extend(d,{_suffix:a?"vtl":"htl",_knobKey:a?"top":"left",_mouseKey:a?"y":"x",_accuracyKey:a?"height":"width"});c.on("load",function(){var e=c.getElement("view"),f=c.getElement("inner"),i=["mousedown","click"],g=baidu.fn.bind(c._eventControl,c),h=d._accuracyKey;d._val="offset"+h.replace(/([a-z])([a-z]*)/,function(j,l,k){return l.toUpperCase()+k});d.width=e.clientWidth;d.height=e.clientHeight;d._range=[0,d[h]];d._limit=f[d._val];d._const=(d._range[1]-d._limit)/2;baidu(i).each(function(j,k){baidu.dom(e).on(k,g)});c.on("dispose",function(){baidu(i).each(function(j,k){baidu.dom(e).off(k,g)})});c._setAccuracy(d.accuracy);c.setValue(d.currentValue)})},{type:"magic.control.Slider",superClass:magic.Base});magic.control.Slider.extend({disable:function(){this._info._status="disabled"},enable:function(){this._info._status="enable"},setValue:function(b){var a=this,d=a._info,c=d._accuracyKey,b=b||0,e=d[c]*b;if(d._oppsite){e=d[c]*a._accSub(1,b)}a._setPosition({target:null,noAccuracy:true,noFx:true},e);d.currentValue=b},getValue:function(){return this._info.currentValue},setRange:function(d){var c=this,e=c._info,a=e[e._accuracyKey],b=d*a;if(e.accuracy){return}e._oppsite?e._range[0]=b:e._range[1]=b;e._percent=b/a},$dispose:function(){var a=this;if(a.disposed){return}magic.Base.prototype.$dispose.call(a)},_accSub:function(f,d){var c,b,a,h;try{c=f.toString().split(".")[1].length}catch(g){c=0}try{b=d.toString().split(".")[1].length}catch(g){b=0}a=Math.pow(10,Math.max(c,b));h=(c>=b)?c:b;return +((f*a-d*a)/a).toFixed(h)},_startDrag:function(n){var l=this,d=l._info,b=l.getElement("knob"),a=l.getElement("process"),g=d.accuracy,e=d.width,c=d.height,k=0,j=0,f=b[d._val],i=d._range,m=[],h=parseInt(baidu.dom(b).css("margin-"+d._knobKey));n.stopPropagation();if(d._isVertical){c=i[1]+f;k=i[0]}else{e=i[1]+f;j=i[0]}m=[k,e,c,j];if(n.target!=b||l._isMoving){return}l._recover();baidu.dom.drag(b,{range:m,fix:[d._knobKey,h],ondragstart:function(){l.fire("onslidestart")},ondrag:function(){var o=l._getRealPos(b,d._knobKey);baidu.dom(a).css(d._accuracyKey,l._getProcessPos(o));l._setCurrentValue(o);l.fire("onslide");l.fire("onchange",{value:d.currentValue})},ondragend:function(o,q,p){p=p[d._knobKey];l._reset(p);g&&l._useAdsorbr(p);l.fire("onslidestop")}})},_resize:function(){var e=this,f=e._info,d=isNaN(Math.min(f._percent,1))?1:Math.min(f._percent,1),c=e.getElement("inner"),b=e.getElement("view"),a;f.width=b.clientWidth;f.height=b.clientHeight;f._limit=c[f._val];a=f[f._accuracyKey];if(f._oppsite){f._range=d<1?[a*d,a]:[0,a]}else{f._range=[0,a*d]}e._setAccuracy(f.accuracy)},_recover:function(){var d=this,g=d._info,a=d.getElement("knob"),f=d.getElement("process"),e=g._accuracyKey,c=a.style[g._knobKey],b=f.style[e];if(/px|auto/.test(c)){return}if(!c.length){c=0}if(!b.length){b=0}c=parseFloat(c)/100*g[e]+"px";b=parseFloat(b)/100*g._limit+"px";baidu.dom(a).css(g._knobKey,c);baidu.dom(f).css(e,b)},_reset:function(e){var b=this,d=b._info,a=b.getElement("knob"),c=b.getElement("process");if(/%/.test(e)){return}baidu.dom(a).css(d._knobKey,b._knobPercent(e));baidu.dom(c).css(d._accuracyKey,b._processPercent(b._getProcessPos(e)))},_knobPercent:function(b){var a=this._info;return parseFloat(b)/a[a._accuracyKey]*100+"%"},_processPercent:function(a){return this._info._limit==0?"0":parseFloat(a)/this._info._limit*100+"%"},_getRealPos:function(b,a){return b.style[a]},_getProcessPos:function(f){var c=this,d=c._info,b=d._range,a=d._limit,f=parseFloat(f)-d._const;if(b[0]&&f<b[0]){var e=b[0]-d._const;return e>0?e+"px":0}else{if(f>b[1]){return b[1]-d._const+"px"}}f<0&&(f=0);f>a&&(f=a);d._oppsite&&(f=a-f);return f+"px"},_getKnobPos:function(c){var c=parseFloat(c),b=this._info,a=b._range;if(b._oppsite){c=c<a[0]?a[0]:c}else{c=c>a[1]?a[1]:c}return c+"px"},_getMousePos:function(){var a=this.getElement("view"),c=baidu.page.getMousePosition(),b=baidu.dom(a).offset();if(this._info._mouseKey=="x"){return c.x-b.left}else{return c.y-b.top}},_move:function(b,f,h){var d=this,e=d._info,c=e._range,a=d._getKnobPos(h),g=d._getProcessPos(h);d._setCurrentValue(a);baidu.dom(b).css(e._knobKey,d._knobPercent(a));baidu.dom(f).css(e._accuracyKey,d._processPercent(g))},_setCurrentValue:function(d){var a=this,c=a._info,b=(parseFloat(d)*10)/(c[c._accuracyKey]*10);if(c._oppsite){b=a._accSub(1,b)}c.currentValue=b},_slide:function(g,b,f){var c=this,e=c._info,a=c.getElement("knob"),d=c.getElement("process");if(c.fire("startFx",{knob:a,process:d,pos:g,fn:b})){c._move(a,d,g);b&&b()}},_setPosition:function(h,g,e){var f=this,d=f._info,c=f.getElement("knob"),b=f.getElement("process"),a=h.noAccuracy||!d.accuracy,i=function(j){f._isMoving=false;f.fire("onchange",{value:d.currentValue})};g==e&&(g=f._getMousePos());if(h.target===c){return}f._isMoving=true;a?f._slide(g,i,h.noFx):f._useAdsorbr(g,i,h.noFx)},_useAdsorbr:function(h,j,a){var g=this,b=g._info,h=parseFloat(h)||0,e=b._range,c=b._accuracyZone.slice(0),f=c.length,d=0,m=h,l;if(h==0||h>e[1]){l=h}else{if(b.accuracy){for(;d<f;d++){var k=Math.abs(c[d]-h);if(k<=m){m=k;l=c[d]}}}else{l=h}}g._slide(l,j,a)},_setAccuracy:function(e){var g=this._info,b=g._range,f=g._accuracyKey,d=e*g[f],a=0,c=[0],h;if(e==0){g.accuracy=0;delete g._accuracyZone}g.accuracy=e;while((h=a+d)&&h<b[1]){a=h;c.push(h)}g._accuracyZone=c.concat(g[f])},_eventControl:function(b){var c=this,a=c.getElement("knob"),d=c.getElement("process");b.preventDefault();c._resize();if(c._info._status=="enable"){if(b.target==a&&b.type=="mousedown"){c._startDrag(b)}else{if(b.type=="mousedown"){if(c.fire("onbeforeslideclick")){c._setPosition(b);c.fire("onslideclick")}}}}}});magic.control.Slider=baidu.lang.createClass(function(b){var c=this,d=c._info=baidu.object.extend({accuracy:0,_status:"enable"},b),a=d._isVertical=d.orientation=="vertical";d.direction=="backward"&&(d._oppsite=true);baidu.object.extend(d,{_suffix:a?"vtl":"htl",_knobKey:a?"top":"left",_mouseKey:a?"y":"x",_accuracyKey:a?"height":"width"});c.on("load",function(){var e=c.getElement("view"),f=c.getElement("inner"),i=["mousedown","click"],g=baidu.fn.bind(c._eventControl,c),h=d._accuracyKey;d._val="offset"+h.replace(/([a-z])([a-z]*)/,function(j,l,k){return l.toUpperCase()+k});d.width=e.clientWidth;d.height=e.clientHeight;d._range=[0,d[h]];d._limit=f[d._val];d._const=(d._range[1]-d._limit)/2;baidu(i).each(function(j,k){baidu.dom(e).on(k,g)});c.on("dispose",function(){baidu(i).each(function(j,k){baidu.dom(e).off(k,g)})});c._setAccuracy(d.accuracy);c.setValue(d.currentValue)})},{type:"magic.control.Slider",superClass:magic.Base});magic.control.Slider.extend({disable:function(){this._info._status="disabled"},enable:function(){this._info._status="enable"},setValue:function(b){var a=this,d=a._info,c=d._accuracyKey,b=b||0,e=d[c]*b;if(d._oppsite){e=d[c]*a._accSub(1,b)}a._setPosition({target:null,noAccuracy:true,noFx:true},e);d.currentValue=b},getValue:function(){return this._info.currentValue},setRange:function(d){var c=this,e=c._info,a=e[e._accuracyKey],b=d*a;if(e.accuracy){return}e._oppsite?e._range[0]=b:e._range[1]=b;e._percent=b/a},$dispose:function(){var a=this;if(a.disposed){return}magic.Base.prototype.$dispose.call(a)},_accSub:function(f,d){var c,b,a,h;try{c=f.toString().split(".")[1].length}catch(g){c=0}try{b=d.toString().split(".")[1].length}catch(g){b=0}a=Math.pow(10,Math.max(c,b));h=(c>=b)?c:b;return +((f*a-d*a)/a).toFixed(h)},_startDrag:function(n){var l=this,d=l._info,b=l.getElement("knob"),a=l.getElement("process"),g=d.accuracy,e=d.width,c=d.height,k=0,j=0,f=b[d._val],i=d._range,m=[],h=parseInt(baidu.dom(b).css("margin-"+d._knobKey));n.stopPropagation();if(d._isVertical){c=i[1]+f;k=i[0]}else{e=i[1]+f;j=i[0]}m=[k,e,c,j];if(n.target!=b||l._isMoving){return}l._recover();baidu.dom.drag(b,{range:m,fix:[d._knobKey,h],ondragstart:function(){l.fire("onslidestart")},ondrag:function(){var o=l._getRealPos(b,d._knobKey);baidu.dom(a).css(d._accuracyKey,l._getProcessPos(o));l._setCurrentValue(o);l.fire("onslide");l.fire("onchange",{value:d.currentValue})},ondragend:function(o,q,p){p=p[d._knobKey];l._reset(p);g&&l._useAdsorbr(p);l.fire("onslidestop")}})},_resize:function(){var e=this,f=e._info,d=isNaN(Math.min(f._percent,1))?1:Math.min(f._percent,1),c=e.getElement("inner"),b=e.getElement("view"),a;f.width=b.clientWidth;f.height=b.clientHeight;f._limit=c[f._val];a=f[f._accuracyKey];if(f._oppsite){f._range=d<1?[a*d,a]:[0,a]}else{f._range=[0,a*d]}e._setAccuracy(f.accuracy)},_recover:function(){var d=this,g=d._info,a=d.getElement("knob"),f=d.getElement("process"),e=g._accuracyKey,c=a.style[g._knobKey],b=f.style[e];if(/px|auto/.test(c)){return}if(!c.length){c=0}if(!b.length){b=0}c=parseFloat(c)/100*g[e]+"px";b=parseFloat(b)/100*g._limit+"px";baidu.dom(a).css(g._knobKey,c);baidu.dom(f).css(e,b)},_reset:function(e){var b=this,d=b._info,a=b.getElement("knob"),c=b.getElement("process");if(/%/.test(e)){return}baidu.dom(a).css(d._knobKey,b._knobPercent(e));baidu.dom(c).css(d._accuracyKey,b._processPercent(b._getProcessPos(e)))},_knobPercent:function(b){var a=this._info;return parseFloat(b)/a[a._accuracyKey]*100+"%"},_processPercent:function(a){return this._info._limit==0?"0":parseFloat(a)/this._info._limit*100+"%"},_getRealPos:function(b,a){return b.style[a]},_getProcessPos:function(f){var c=this,d=c._info,b=d._range,a=d._limit,f=parseFloat(f)-d._const;if(b[0]&&f<b[0]){var e=b[0]-d._const;return e>0?e+"px":0}else{if(f>b[1]){return b[1]-d._const+"px"}}f<0&&(f=0);f>a&&(f=a);d._oppsite&&(f=a-f);return f+"px"},_getKnobPos:function(c){var c=parseFloat(c),b=this._info,a=b._range;if(b._oppsite){c=c<a[0]?a[0]:c}else{c=c>a[1]?a[1]:c}return c+"px"},_getMousePos:function(){var a=this.getElement("view"),c=baidu.page.getMousePosition(),b=baidu.dom(a).offset();if(this._info._mouseKey=="x"){return c.x-b.left}else{return c.y-b.top}},_move:function(b,f,h){var d=this,e=d._info,c=e._range,a=d._getKnobPos(h),g=d._getProcessPos(h);d._setCurrentValue(a);baidu.dom(b).css(e._knobKey,d._knobPercent(a));baidu.dom(f).css(e._accuracyKey,d._processPercent(g))},_setCurrentValue:function(d){var a=this,c=a._info,b=(parseFloat(d)*10)/(c[c._accuracyKey]*10);if(c._oppsite){b=a._accSub(1,b)}c.currentValue=b},_slide:function(g,b,f){var c=this,e=c._info,a=c.getElement("knob"),d=c.getElement("process");if(c.fire("startFx",{knob:a,process:d,pos:g,fn:b})){c._move(a,d,g);b&&b()}},_setPosition:function(h,g,e){var f=this,d=f._info,c=f.getElement("knob"),b=f.getElement("process"),a=h.noAccuracy||!d.accuracy,i=function(j){f._isMoving=false;f.fire("onchange",{value:d.currentValue})};g==e&&(g=f._getMousePos());if(h.target===c){return}f._isMoving=true;a?f._slide(g,i,h.noFx):f._useAdsorbr(g,i,h.noFx)},_useAdsorbr:function(h,j,a){var g=this,b=g._info,h=parseFloat(h)||0,e=b._range,c=b._accuracyZone.slice(0),f=c.length,d=0,m=h,l;if(h==0||h>e[1]){l=h}else{if(b.accuracy){for(;d<f;d++){var k=Math.abs(c[d]-h);if(k<=m){m=k;l=c[d]}}}else{l=h}}g._slide(l,j,a)},_setAccuracy:function(e){var g=this._info,b=g._range,f=g._accuracyKey,d=e*g[f],a=0,c=[0],h;if(e==0){g.accuracy=0;delete g._accuracyZone}g.accuracy=e;while((h=a+d)&&h<b[1]){a=h;c.push(h)}g._accuracyZone=c.concat(g[f])},_eventControl:function(b){var c=this,a=c.getElement("knob"),d=c.getElement("process");b.preventDefault();c._resize();if(c._info._status=="enable"){if(b.target==a&&b.type=="mousedown"){c._startDrag(b)}else{if(b.type=="mousedown"){if(c.fire("onbeforeslideclick")){c._setPosition(b);c.fire("onslideclick")}}}}}});magic.Slider=baidu.lang.createClass(function(a){},{type:"magic.Slider",superClass:magic.control.Slider});magic.Slider.extend({render:function(a){var b=this;a=baidu.dom("#"+a).get(0);a||document.body.appendChild(a=document.createElement("div"));if(/tang-slider/.test(a.className)){return}baidu.dom(a).addClass("tang-ui tang-slider tang-slider-"+b._info._suffix);a.innerHTML=b.toHTMLString();b.$mappingDom("",a);b.fire("load")},toHTMLString:function(){var d=this,e=d._info,c="tang-process-"+e.direction,a=e._oppsite?"-backward":"",b=baidu.string.format(magic.Slider.template,{id:d.$getId(),viewId:d.$getId("view"),innerId:d.$getId("inner"),cornerClass:a,processId:d.$getId("process"),processClass:c,knobId:d.$getId("knob")});return b},$dispose:function(){var b=this,a;if(b.disposed){return}a=b.getElement("");magic.Base.prototype.$dispose.call(b);baidu.dom(a).remove();a=null}});magic.Slider.template='<div id="#{viewId}" class="tang-view"><div class="tang-content"><div class="tang-corner tang-start#{cornerClass}"></div><div class="tang-corner tang-last#{cornerClass}"></div><div id="#{innerId}" class="tang-inner"><div id="#{processId}" class="tang-process #{processClass}"></div></div></div><a id="#{knobId}" href="javascript:;" class="tang-knob"></a></div>';magic.setup.slider=function(c,b){var d=magic.setup(baidu.dom("#"+c).get(0),magic.control.Slider,b),a=d.getElement();d.$mappingDom("view",baidu(".tang-view",a)[0]);d.$mappingDom("knob",baidu(".tang-knob",a)[0]);d.$mappingDom("process",baidu(".tang-process",a)[0]);d.$mappingDom("inner",baidu(".tang-inner",a)[0]);d.fire("load");return d};baidu.lang.register(magic.control.Slider,function(a){var b=this,c=b._info;c.cache&&c.cache.enable&&b.on("load",function(){var d=b.getElement("inner"),f=c._accuracyKey,h=c._oppsite?"tang-cache-backward":"tang-cache-forward",g=b.$getId("cache"),e=c._oppsite?'<div id="#{id}" class="tang-cache #{cacheClass}"><div class="tang-cache-corner tang-cache-start"></div>':'<div id="#{id}" class="tang-cache #{cacheClass}"><div class="tang-cache-corner tang-cache-last"></div>';baidu.dom(d).prepend(baidu.string.format(e,{id:g,cacheClass:h}))})},{setCache:function(e){var d=this,f=d._info,b=d.getElement("cache"),c=e*f._limit,a=d._cachePercent(c);e==0?baidu.dom(b).css("overflow","hidden"):baidu.dom(b).css("overflow","");baidu.dom(b).css(f._accuracyKey,d._cachePercent(c))},_cachePercent:function(a){return a/this._info._limit*100+"%"}});baidu.lang.register(magic.control.Slider,function(a){var c=this,b=c._info.fx;c.on("startFx",function(d){if(b&&b.enable){c._fx&&c._fx.end();c._recover();c._fxMove(d.knob,d.process,d.pos,d.fn);d.returnValue=false}})},{setValue:function(c,a){var b=this,e=b._info,d=e._accuracyKey,c=c||0,f=e[d]*c;if(e._oppsite){f=e[d]*b._accSub(1,c)}b._setPosition({target:null,noAccuracy:true,noFx:a},f);e.currentValue=c},_fxMove:function(d,b,i,j){var h=this,e=h._info,c=e.fx,f=e._knobKey,g=e._accuracyKey,i=parseFloat(h._getKnobPos(i)),a=e._isVertical?[0,i]:[i,0];h._setCurrentValue(i);h._fx=baidu.fx.moveTo(d,a,{duration:c.duration||200,onbeforestart:function(){h.fire("onfxstart")},onafterupdate:function(){var k=h._getProcessPos(h._getRealPos(d,f));baidu.dom(b).css(g,k);h.fire("onfx")},onafterfinish:function(){h.fire("onfxstop");h._reset(i);j&&j(i);delete h._fx}})||j&&j()}});magic.control.Tab=baidu.lang.createClass(function(a){var c=this,b=baidu.fn.bind("_toggleHandler",c);c._options=baidu.object.extend({selectEvent:"click",selectDelay:0,originalIndex:0},a);c._selectedIndex=c._options.originalIndex;c.on("onload",function(e){var d=c.getElement();c.$mappingDom("title",baidu(".tang-title",d)[0]).$mappingDom("body",baidu(".tang-body",d)[0]);baidu.dom(c.getElement("title")).on(c._options.selectEvent,b);c.on("ondispose",function(){baidu.dom(c.getElement("title")).off(c._options.selectEvent,b)});c.select(c._selectedIndex)})},{type:"magic.control.Tab",superClass:magic.Base}).extend({_toggleHandler:function(a){if(a.target.className=="tang-title"){return}var c=this,d=a.target;function b(){var h=baidu.dom(d).closest(".tang-title-item").get(0),j=baidu.dom(c.getElement("title")).children(),e=j.length,f=0;if(!h){return}for(var g=0;g<e;g++){if(j[g]===h){f=g;break}}c._selectedIndex!=f&&c.select(f)}if(/^(on)?mouseover$/i.test(c._options.selectEvent)){clearTimeout(c._timeOut);c._timeOut=setTimeout(b,c._options.selectDelay)}else{b()}},select:function(b){var c=this,d=baidu.dom(c.getElement("title")).children(),a=baidu.dom(c.getElement("body")).children();if(!c.fire("onbeforeselect",{index:c._selectedIndex})){return}baidu.dom(d[c._selectedIndex]).removeClass("tang-title-item-selected");baidu.dom(a[c._selectedIndex]).removeClass("tang-body-item-selected");c._selectedIndex=b;baidu.dom(d[b]).addClass("tang-title-item-selected");baidu.dom(a[b]).addClass("tang-body-item-selected");c.fire("onselect",{index:c._selectedIndex})},getCurrentTitle:function(){var a=this;return baidu.dom(a.getElement("title")).children()[a._selectedIndex]},getCurrentContent:function(){var a=this;return baidu.dom(a.getElement("body")).children()[a._selectedIndex]},$dispose:function(){var a=this;if(a.disposed){return}magic.Base.prototype.$dispose.call(a)}});magic.Tab=baidu.lang.createClass(function(a){var b=this;b._items=a.items||[]},{type:"magic.Tab",superClass:magic.control.Tab}).extend({tplTitle:'<li class="#{titleClass}"><a href="#" onclick="return false" hidefocus="true"><span>#{content}</span></a></li>',tplBody:'<div class="#{bodyClass}">#{content}</div>',toHTMLString:function(){var c=this,b='<ul class="#{titleClass}">#{titleContent}</ul><div class="#{bodyClass}">#{bodyContent}</div>',a=[],d=[];baidu(c._items).each(function(e,f){a.push(baidu.string.format(c.tplTitle,{titleClass:"tang-title-item"+(c._selectedIndex==e?" tang-title-item-selected":""),content:f.title}));d.push(baidu.string.format(c.tplBody,{bodyClass:"tang-body-item"+(c._selectedIndex==e?" tang-body-item-selected":""),content:f.content}))});return baidu.string.format(b,{titleClass:"tang-title",titleContent:a.join(""),bodyClass:"tang-body",bodyContent:d.join("")})},render:function(c){var b=this,a;if(b.getElement()){return}b.$mappingDom("",baidu.dom("#"+c).get(0)||document.body);a=b.getElement();baidu.dom(a).addClass("tang-ui tang-tab");baidu.dom(a).append(b.toHTMLString());b.fire("onload")},$dispose:function(){var b=this,c,a;if(b.disposed){return}c=b.getElement("title");a=b.getElement("body");baidu.dom(b.getElement()).removeClass("tang-ui tang-tab");magic.Base.prototype.$dispose.call(b);baidu.dom(c).remove();baidu.dom(a).remove();c=a=null}});magic.setup.tab=function(c,b){var a=magic.setup(baidu.dom("#"+c).get(0),magic.control.Tab,b);a.fire("onload");return a};magic.control.ScrollPanel=baidu.lang.createClass(function(a){var b=this;b._active=false;b._options=baidu.extend({autoUpdateDelay:500,arrowButtonStep:20,mousewheelStep:50,scrollbarStep:80,intervalScrollDelay:300,intervalScrollFreq:100,scrollbarMinHeight:10},a);b.on("load",function(){var d=b._target=baidu(b.getElement("target")),c=b._options;d.addClass("tang-scrollpanel");b.on("installpanel",b._installSlider);b.on("uninstallpanel",b._uninstallSlider);b._installPanel();b.update();if(c.autoUpdateDelay){(function(){var e=arguments.callee;b._updateTimer=setTimeout(function(){b.update();e()},c.autoUpdateDelay)})()}})},{type:"magic.control.ScrollPanel",superClass:magic.Base}).extend({_installPanel:function(){var d=this,b=d._options,e=baidu('<div id="'+d.$getId("wrapper")+'" class="tang-scrollpanel-wrapper"></div>').css({width:d._target.width(),height:d._target.height()}),c=baidu('<div id="'+d.$getId("content")+'" class="tang-scrollpanel-content"></div>');c.append(d._target.children());e.append(c);d._target.append(e);function a(f){if(!d._active){return}d.scrollBy(f.wheelDelta>0?-b.mousewheelStep:b.mousewheelStep);f.preventDefault()}e.on("mousewheel",a);d.on("dispose",function(){e.off("mousewheel",a)});d.fire("installpanel")},_uninstallPanel:function(){var a=this;a._target.append(baidu(a.getElement("content")).children()).removeClass("tang-scrollpanel");baidu(a.getElement("wrapper")).remove();a.fire("uninstallpanel")},_installSlider:function(){var b=this,d=baidu(b.getElement("wrapper")),c=baidu('<div id="'+b.$getId("slider")+'"></div>').css({height:b._target.height()}),a;d.append(c);b._slider=a=new magic.Slider({orientation:"vertical",currentValue:0});a.on("change",function(f){b.scrollTo(b._pctToPixel(f.value))});a.render(b.$getId("slider"));b._hackSlider()},_hackSlider:function(){var j=this,d=j._options,i=baidu(j.getElement("slider")),c=j._slider,e=baidu(c.getElement("knob")),k=c.getElement("view"),h=baidu(".tang-start",k),g=baidu(".tang-last",k),k=baidu(k);j.$mappingDom("arrowTop",h.get(0));j.$mappingDom("arrowBottom",g.get(0));i.append(h);i.append(g);k.css({width:e.outerWidth()});function b(r,m){r.stopPropagation();r.preventDefault();j.scrollBy(m);var p,q,l=function(s){s.preventDefault()},o=function(s){if(s.target.releaseCapture){s.target.releaseCapture()}else{if(window.releaseEvents){window.releaseEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}},n=function(){clearInterval(p);clearInterval(q);baidu(document).off("mouseup",n);baidu(document).off("selectstart",l);o(r)};p=setTimeout(function(){q=setInterval(function(){if((m<0&&r.pageY>e.offset().top)||(m>0&&r.pageY<e.offset().top+e.outerHeight())){n();return}j.scrollBy(m)},d.intervalScrollFreq)},d.intervalScrollDelay);baidu(document).on("mouseup",n);baidu(document).on("selectstart",l);if(r.target.setCapture){r.target.setCapture()}else{if(window.captureEvents){window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}}var f=function(l){var m=l.target==h.get(0)?-1:1;b(l,m*d.arrowButtonStep)};var a=function(l){if(l.target==c.getElement("knob")){return}if(l.pageY<e.offset().top){b(l,-d.scrollbarStep)}else{if(l.pageY>e.offset().top+e.outerHeight()){b(l,d.scrollbarStep)}}};h.on("mousedown",f);g.on("mousedown",f);i.on("mousedown",a);j.on("dispose",function(){h.off("mousedown",f);g.off("mousedown",f);i.off("mousedown",a)});c.on("beforeslideclick",function(l){l.returnValue=false})},_uninstallSlider:function(){if(this._slider){this._slider.$dispose()}},_resetSliderUnitsPos:function(){var j=this,a=j._options,k=baidu(j._slider.getElement("view")),b=baidu(j._slider.getElement("knob")),h=baidu(j.getElement("content")),i=j.getElement("slider"),f=baidu(".tang-start",i),e=baidu(".tang-last",i),d=f.css("display")=="none"?0:f.outerHeight(),c=e.css("display")=="none"?0:e.outerHeight(),i=baidu(i),g=Math.round((j._target.height()/h.outerHeight())*(i.height()-d-c));b.css({height:g>a.scrollbarMinHeight?g:a.scrollbarMinHeight});k.css({top:d,height:i.height()-c-d-b.outerHeight()});if(baidu.browser.ie<7){if(i.height()%2!=0){e.css({bottom:-1})}if(k.height()%2!=0){k.css({height:k.height()+1});b.css({height:b.height()-1})}}},_pixelToPct:function(a){return a/(baidu(this.getElement("content")).height()-baidu(this.getElement("wrapper")).height())},_pctToPixel:function(a){return(baidu(this.getElement("content")).height()-baidu(this.getElement("wrapper")).height())*a},_setActive:function(){var b=this,c=baidu(b.getElement("slider")),e=baidu(b._slider.getElement("view")),a=baidu(b.getElement("content")),d=baidu(b.getElement("wrapper"));c.show();c.css({width:e.width()});a.css({width:d.width()-c.width()});b._resetSliderUnitsPos();b._active=true;b._oldContentHeight=a.outerHeight()},_setInactive:function(){var b=this,c=baidu(b.getElement("slider")),a=baidu(b.getElement("content"));a.css({width:a.width()+c.width()});c.hide();b._active=false},update:function(){var a=this;if(a._isScrollable(a._target).y){if(!a._active){a._setActive()}else{if(a._oldContentHeight!=baidu(a.getElement("content")).outerHeight()){a._resetSliderUnitsPos();a._oldContentHeight=baidu(a.getElement("content")).outerHeight();a._scrollTo(a.getScroll())}}}else{if(a._active){a._setInactive();a.scrollTo(0)}}},clearAutoUpdate:function(){if(!this._updateTimer){return}clearTimeout(this._updateTimer);delete this._updateTimer},_isScrollable:function(){var d=this,e=d._target,c=e.innerWidth(),b=e.innerHeight(),a=baidu(d.getElement("content")).innerWidth()>c,f=baidu(d.getElement("content")).innerHeight()>b;return{x:a,y:f}},scrollTo:function(g){var d=this,a=g,f=baidu(d.getElement("wrapper")),c=baidu(d.getElement("content")),e=f.height(),b=c.outerHeight();if(g>b-e){g=b-e}if(g<0){g=0}if(d.getScroll()==g){return}d.fire("beforescroll",{pos:g});d._scrollTo(g);d.fire("afterscroll",{pos:g})},_scrollTo:function(c){var b=this,a=b._slider;baidu(b.getElement("content")).css({top:-c});a.un("change");a.setValue(b._pixelToPct(c));a.on("change",function(d){b.scrollTo(b._pctToPixel(d.value))})},scrollToTop:function(){this.scrollTo(0);return this},scrollToBottom:function(){this.scrollTo(baidu(this.getElement("content")).height());return this},scrollToElement:function(a){var b=baidu(a).offset().top-baidu(this.getElement("content")).offset().top;this.scrollTo(b);return this},scrollBy:function(a){this.scrollTo(this.getScroll()+a);return this},getScroll:function(){return -Math.round(parseFloat(baidu(this.getElement("content")).css("top")))},getScrollPct:function(){var a=baidu(this.getElement("content")).outerHeight()-baidu(this.getElement("wrapper")).height();return Math.round(this.getScroll()/a*100)/100},$dispose:function(){var a=this;if(a.disposed){return}a.clearAutoUpdate();a._uninstallPanel();magic.Base.prototype.$dispose.call(a)}});magic.setup.scrollPanel=function(c,b){if(baidu.type(c)==="string"){c="#"+c}var c=baidu(c)[0],a=magic.setup(c,magic.control.ScrollPanel,b);a.$mappingDom("target",c);a.fire("load");return a};magic.control.Tooltip=baidu.lang.createClass(function(a){var c=this,b=c._options=baidu.object.extend({autoHide:true,hasCloseBtn:true,hasArrow:true,offsetX:0,offsetY:0,target:null,content:"",showEvent:"mouseover,focus",hideEvent:"mouseout,blur",position:"bottom",arrowPosition:null},a||{});c._isShow=false;c._refresh=false;c.styleBox=true;c.on("load",function(){c._posInfo=baidu.array(["top","bottom","left","right"]);c._posCache={};c._eventList=[];c.arrowPosGap={top:1,bottom:5,left:3,right:5};var i=c._eventDeal=function(l,o,p,n){l=l&&baidu.string(l).trim();l=l.replace(","," ");if(l){var m=function(){p.off(l,o)};p.on(l,o);n?n.push(m):c.on("dispose",m)}},g=function(){c._refresh=true;b.autoHide&&c.hide()},d=27,j=baidu.fn.bind("show",c),k=baidu.fn.bind("hide",c);c._bindCustomEvent(b.target);b.hasCloseBtn?i("click",k,baidu(c.getElement("close"))):baidu(c.getElement("close")).hide();b.autoHide&&(i("scroll",k,baidu(document))||i("click",k,baidu(document))||i("keydown",function(l){l.keyCode==d&&c.hide()},baidu(document)));i("resize",g,baidu(window));c.on("dispose",function(){for(var n=0,m=c._eventList.length;n<m;n++){c._eventList[n].call(c)}});var h=baidu(c.getElement("arrow"));b.hasArrow&&h.addClass("arrow-"+c._getOpositePos(b.position))||h.hide();b.content&&c._setContent(b.content);var f=0,e=/<img\s[\w\=\"\/\.\_\:]*\/?>\w*(<\/img>)?/ig;typeof b.content=="string"&&e.test(b.content)&&(f=150);setTimeout(function(){c.reposition()},f)})},{type:"magic.control.Tooltip",superClass:magic.Base}).extend({_calcTop:function(g,a,c,f){var e=parseFloat(g.css("margin-left")),d=parseFloat(g.css("margin-top")),b=this._options;isNaN(e)&&(e=0);isNaN(d)&&(d=0);return{top:a.top+d-c.outerHeight(true)-(b.hasArrow?f.outerHeight(true)-this.arrowPosGap.bottom:0)+b.offsetY,left:a.left+e+b.offsetX,position:"top"}},_calcArrowTop:function(a,b){return this._arrowPos("left","bottom",{start:2,end:a.outerWidth(true)-b.outerWidth(true)-7,gap:this.arrowPosGap.bottom},true)},_calcBottom:function(f,a,c,e){var d=parseFloat(f.css("margin-left")),g=parseFloat(f.css("margin-bottom")),b=this._options;isNaN(d)&&(d=0);isNaN(g)&&(g=0);return{top:a.top-g+f.outerHeight(true)+(b.hasArrow?e.outerHeight(true)-this.arrowPosGap.top:0)+b.offsetY,left:a.left+d+b.offsetX,position:"bottom"}},_calcArrowBottom:function(a,b){return this._arrowPos("left","top",{start:2,end:a.outerWidth(true)-b.outerWidth(true)-7,gap:this.arrowPosGap.top},true)},_calcLeft:function(g,a,c,f){var e=parseFloat(g.css("margin-left")),d=parseFloat(g.css("margin-top")),b=this._options;isNaN(e)&&(e=0);isNaN(d)&&(d=0);return{top:a.top+d+b.offsetY,left:a.left+e-c.outerWidth(true)-(b.hasArrow?f.outerWidth(true)-this.arrowPosGap.right:0)+b.offsetX,position:"left"}},_calcArrowLeft:function(a,b){return this._arrowPos("top","right",{start:2,end:a.outerHeight(true)-b.outerHeight(true)-7,gap:this.arrowPosGap.right})},_calcRight:function(g,a,c,f){var e=parseFloat(g.css("margin-right")),d=parseFloat(g.css("margin-top")),b=this._options;isNaN(e)&&(e=0);isNaN(d)&&(d=0);return{top:a.top+d+b.offsetY,left:a.left+g.outerWidth(true)-e+(b.hasArrow?f.outerWidth(true)-this.arrowPosGap.left:0)+b.offsetX,position:"right"}},_calcArrowRight:function(a,b){return this._arrowPos("top","left",{start:2,end:a.outerHeight(true)-b.outerHeight(true)-7,gap:this.arrowPosGap.left})},_arrowPos:function(i,l,e,p){var k=this,c=k._options,n=c.arrowPosition,o=baidu(k.getElement("arrow")),h=baidu(c.target),f=baidu(k.getElement("")),b=p?"outerWidth":"outerHeight",j=p?-o.outerHeight(true):-o.outerWidth(true),m=h[b]()-o[b](),g=/\d+%/ig,a={};n&&g.test(n)&&(n=f[b](true)*parseFloat(n)*0.01);n&&typeof n!="number"&&(n=parseFloat(n));n===null&&(n=(m>>1)-(p?c.offsetX:c.offsetY));n<e.start&&(n=e.start);n>e.end&&(n=e.end);a[i]=n;a[l]=j+e.gap;return a},_clearArrowClass:function(){var a=baidu(this.getElement("arrow"));baidu.forEach(this._posInfo,function(b){a.removeClass("arrow-"+b)})},_posControl:function(c,d,b,a,k,i){var f=this,h=f[f._CamelCaseName("_calc",c)](d,b,a,k,i);if(i){return h}var j=a.offsetParent(),g={w:j.outerWidth(true),h:j.outerHeight(true)};f._posCache[c]=1;if(h.left>=0&&h.left+a.outerWidth(true)<=g.w&&h.top>=0&&h.top+a.outerHeight(true)<=g.h){return h}var e=f._getFuturePos(c);if(!f._posCache[e]){return f._posControl(e,d,b,a,k)}return h},_getFuturePos:function(a){return this._getOpositePos(a)},_getOpositePos:function(a){var b=this._posInfo.indexOf(a);return this._posInfo[b%2==0?b+1:b-1]},_CamelCaseName:function(b,a){return b+a.charAt(0).toUpperCase()+a.substr(1)},reposition:function(){var d=this,b=d._options,c=baidu(d.getElement("")),e=baidu(d.getElement("arrow")),f=baidu(b.target),a=f.position(),g=d._posControl(b.position,f,a,c,e);c.css("left",g.left);c.css("top",g.top);d._posCache={};if(!b.hasArrow){return}d._clearArrowClass();e.addClass("arrow-"+d._getOpositePos(g.position));g=d[d._CamelCaseName("_calcArrow",g.position)](c,e);e.css("top",g.top==undefined?null:g.top);e.css("left",g.left==undefined?null:g.left);e.css("bottom",g.bottom==undefined?null:g.bottom);e.css("right",g.right==undefined?null:g.right)},_setContent:function(c){var b=baidu(this.getElement("content")),a=this._options;a.content=c;b.empty();typeof c=="function"?b.html(c(a.target)):b.append(c)},_bindCustomEvent:function(f){var d=this,c=d._options,e=baidu.fn.bind("show",d),g=baidu.fn.bind("hide",d);for(var b=0,a=d._eventList.length;b<a;b++){d._eventList[b].call(d)}d._eventDeal(c.showEvent,e,baidu(f),d._eventList);d._eventDeal(c.hideEvent,g,baidu(f),d._eventList)},show:function(){var b=this,a=b._options;if(b._isShow){return}if(b.fire("beforeshow")===false){return}b._refresh&&((b._refresh=false)||b.reposition());typeof a.content=="function"&&b._setContent(a.content);baidu(b.getElement("")).show();b._isShow=true;b.fire("show")},hide:function(){if(!this._isShow){return}if(this.fire("beforehide")===false){return}baidu(this.getElement("")).hide();this._isShow=false;this.fire("hide")},setTarget:function(c){var b=this,a=b._options;if(c==a.target){return}b._bindCustomEvent(c);a.target=c;b.reposition();b.fire("targetchange",{target:c})},setContent:function(c){var b=this,a=b._options;if(a.content==c){return}if(!c||(a.content&&(c.toString()==a.content.toString()))){return}b._setContent(c)},setPosition:function(c){var b=this,a=baidu(b.getElement(""));c.x&&a.css("left",parseFloat(c.x));c.y&&a.css("top",parseFloat(c.y))},$dispose:function(){var a=this.getElement("");magic.Base.prototype.$dispose.call(this);a.parentNode.removeChild(a)}});baidu.lang.register(magic.Background,function(a){if(this.styleBox){this._innerHTML=["<table borde='0' cellpadding='0' cellspacing='0' ",(baidu.browser.ie<7?"class='gif__' ":""),"style='width:100%;height:100%;'>","<tr class='top__'>","<td class='left__ corner__'>&nbsp;</td>","<td class='center__ vertical__'>&nbsp;</td>","<td class='right__ corner__'>&nbsp;</td>","</tr>","<tr class='middle__'>","<td class='left__ horizontal__'>&nbsp;</td>","<td class='center__ midland__'>",(this._innerHTML||"&nbsp;"),"</td>","<td class='right__ horizontal__'>&nbsp;</td>","</tr>","<tr class='bottom__'>","<td class='left__ corner__'>&nbsp;</td>","<td class='center__ vertical__'>&nbsp;</td>","<td class='right__ corner__'>&nbsp;</td>","</tr>","</table>"].join("")}});magic.Tooltip=baidu.lang.createClass(function(a){},{type:"magic.Tooltip",superClass:magic.control.Tooltip}).extend({render:function(d){var e=this,b=e._options;if(baidu.type(d)==="string"){d="#"+d}d=baidu(d)[0];d||(d=(b.target&&b.target.parentNode)||(b.target=document.body));b.target||(b.target=d);var c=magic.Tooltip.template.join("");baidu(d).append(baidu.string.format(c,{containerId:e.$getId(""),closeId:e.$getId("close"),contentId:e.$getId("content"),arrowId:e.$getId("arrow")}));var a=e.getElement("");baidu(a).hide();a.style.zIndex=baidu.global.getZIndex("popup");e.background=new magic.Background({coverable:true,styleBox:e.styleBox});e.background.render(a);e.on("dispose",function(){e.background.$dispose()});e.fire("load")}});magic.Tooltip.template=["<div class='magic-tooltip magic-ui' id='#{containerId}'>","<div class='tang-foreground'>","<div class='magic-tooltip-close' id='#{closeId}'><a href='' onmousedown='event.stopPropagation && event.stopPropagation(); event.cancelBubble = true; return false;' onclick='return false;'></a></div>","<div class='magic-tooltip-content' id='#{contentId}'></div>","<div class='magic-tooltip-arrow' id='#{arrowId}'></div>","</div>","</div>"];magic.setup.tooltip=function(e,c){if(baidu.type(e)==="string"){e="#"+e}e=baidu(e)[0];var d=c||{};d.target||(d.target=document.body);var a=magic.setup(e,magic.control.Tooltip,d),b=a.getElement();b.style.zIndex=baidu.global.getZIndex("popup");a.background=new magic.Background({coverable:true,styleBox:true});a.background.render(b);a.on("dispose",function(){a.background.$dispose()});a.$mappingDom("",baidu(".magic-tooltip",b)[0]);a.$mappingDom("close",baidu(".magic-tooltip-close",b)[0]);a.$mappingDom("closeBtn",baidu("a",a.getElement("close"))[0]);a.$mappingDom("content",baidu(".magic-tooltip-content",b)[0]);a.$mappingDom("arrow",baidu(".magic-tooltip-arrow",a.getElement("body"))[0]);a._isShow=true;a.hide();a.fire("load");return a};