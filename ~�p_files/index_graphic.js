/*! qianjing02 2014-03-28 */
(function(){var t={version:"1.0.0",author:["qianjing","xieshiwei"]};t.debug=function(t){throw Error(t)},t._count={},t.guid=function(e){return void 0===t._count[e]&&(t._count[e]=1),e+"$"+t._count[e]++},t.fn={},t.Time={},t.Utils={},t.canvas=function(){return Raphael.apply({},arguments)},window.G=t})(),function(){G.CONFIG={BASE_IMG_SRC:"/static/imgs/chart/",ANIMATION:Raphael.svg?"on":"off",COLORS:["#6E87D7","#11C897","#FA7256","#B172C5","#F367A7"],TEXT_STYLE:{fill:"#9A9A9A","text-anchor":"start"},PATH_STYLE:{stroke:"#E4E6E9",fill:"none"},GUIDE_STYLE:{stroke:"#CDCDCD",fill:"none"},DATAZOOM:{ZOOM_COLOR:"#90c5ed",HANDLE_CURSOR:"cursor.png",HANDLE_IMG:"datazoom_handle.png"},TOPLINETEXT:["A","B","C","D","E","F","G","H","I","J"],ICON_AGE_IMG:["icon_age1.png","icon_age2.png","icon_age3.png","icon_age4.png","icon_age5.png"],ICON_AGE_TEXT:["19\u5c81\u53ca\u4ee5\u4e0b","20~29\u5c81","30~39\u5c81","40~49\u5c81","50\u5c81\u53ca\u4ee5\u4e0a"]}}(),Raphael.el.popup=function(t,e,a,r){var i,n,s,o,l,h=this.paper||this[0].paper;if(h){switch(this.type){case"text":case"circle":case"ellipse":s=!0;break;default:s=!1}t=null==t?"up":t,e=e||5,i=this.getBBox(),a="number"==typeof a?a:s?i.x+i.width/2:i.x,r="number"==typeof r?r:s?i.y+i.height/2:i.y,o=Math.max(i.width/2-e,0),l=Math.max(i.height/2-e,0),this.translate(a-i.x-(s?i.width/2:0),r-i.y-(s?i.height/2:0)),i=this.getBBox();var f={up:["M",a,r,"l",-e,-e,-o,0,"a",e,e,0,0,1,-e,-e,"l",0,-i.height,"a",e,e,0,0,1,e,-e,"l",2*e+2*o,0,"a",e,e,0,0,1,e,e,"l",0,i.height,"a",e,e,0,0,1,-e,e,"l",-o,0,"z"].join(","),down:["M",a,r,"l",e,e,o,0,"a",e,e,0,0,1,e,e,"l",0,i.height,"a",e,e,0,0,1,-e,e,"l",-(2*e+2*o),0,"a",e,e,0,0,1,-e,-e,"l",0,-i.height,"a",e,e,0,0,1,e,-e,"l",o,0,"z"].join(","),left:["M",a,r,"l",-e,e,0,l,"a",e,e,0,0,1,-e,e,"l",-i.width,0,"a",e,e,0,0,1,-e,-e,"l",0,-(2*e+2*l),"a",e,e,0,0,1,e,-e,"l",i.width,0,"a",e,e,0,0,1,e,e,"l",0,l,"z"].join(","),right:["M",a,r,"l",e,-e,0,-l,"a",e,e,0,0,1,e,-e,"l",i.width,0,"a",e,e,0,0,1,e,e,"l",0,2*e+2*l,"a",e,e,0,0,1,-e,e,"l",-i.width,0,"a",e,e,0,0,1,-e,-e,"l",0,-l,"z"].join(",")};return n={up:{x:-!s*(i.width/2),y:2*-e-(s?i.height/2:i.height)},down:{x:-!s*(i.width/2),y:2*e+(s?i.height/2:i.height)},left:{x:2*-e-(s?i.width/2:i.width),y:-!s*(i.height/2)},right:{x:2*e+(s?i.width/2:i.width),y:-!s*(i.height/2)}}[t],this.translate(n.x,n.y),h.path(f[t]).attr({fill:"#000",stroke:"none"}).insertBefore(this.node?this:this[0])}},Raphael.el.tag=function(t,e,a,r){var i=3,n=this.paper||this[0].paper;if(n){var s,o,l,h=n.path().attr({fill:"#000",stroke:"#000"}),f=this.getBBox();switch(this.type){case"text":case"circle":case"ellipse":l=!0;break;default:l=!1}return t=t||0,a="number"==typeof a?a:l?f.x+f.width/2:f.x,r="number"==typeof r?r:l?f.y+f.height/2:f.y,e=null==e?5:e,o=.5522*e,f.height>=2*e?h.attr({path:["M",a,r+e,"a",e,e,0,1,1,0,2*-e,e,e,0,1,1,0,2*e,"m",0,2*-e-i,"a",e+i,e+i,0,1,0,0,2*(e+i),"L",a+e+i,r+f.height/2+i,"l",f.width+2*i,0,0,-f.height-2*i,-f.width-2*i,0,"L",a,r-e-i].join(",")}):(s=Math.sqrt(Math.pow(e+i,2)-Math.pow(f.height/2+i,2)),h.attr({path:["M",a,r+e,"c",-o,0,-e,o-e,-e,-e,0,-o,e-o,-e,e,-e,o,0,e,e-o,e,e,0,o,o-e,e,-e,e,"M",a+s,r-f.height/2-i,"a",e+i,e+i,0,1,0,0,f.height+2*i,"l",e+i-s+f.width+2*i,0,0,-f.height-2*i,"L",a+s,r-f.height/2-i].join(",")})),t=360-t,h.rotate(t,a,r),this.attrs?(this.attr(this.attrs.x?"x":"cx",a+e+i+(l?f.width/2:"text"==this.type?f.width:0)).attr("y",l?r:r-f.height/2),this.rotate(t,a,r),t>90&&270>t&&this.attr(this.attrs.x?"x":"cx",a-e-i-(l?f.width/2:f.width)).rotate(180,a,r)):t>90&&270>t?(this.translate(a-f.x-f.width-e-i,r-f.y-f.height/2),this.rotate(t-180,f.x+f.width+e+i,f.y+f.height/2)):(this.translate(a-f.x+e+i,r-f.y-f.height/2),this.rotate(t,f.x-e-i,f.y+f.height/2)),h.insertBefore(this.node?this:this[0])}},Raphael.el.drop=function(t,e,a){var r,i,n,s,o,l=this.getBBox(),h=this.paper||this[0].paper;if(h){switch(this.type){case"text":case"circle":case"ellipse":r=!0;break;default:r=!1}return t=t||0,e="number"==typeof e?e:r?l.x+l.width/2:l.x,a="number"==typeof a?a:r?l.y+l.height/2:l.y,i=Math.max(l.width,l.height)+Math.min(l.width,l.height),n=h.path(["M",e,a,"l",i,0,"A",.4*i,.4*i,0,1,0,e+.7*i,a-.7*i,"z"]).attr({fill:"#000",stroke:"none"}).rotate(22.5-t,e,a),t=(t+90)*Math.PI/180,s=e+i*Math.sin(t)-(r?0:l.width/2),o=a+i*Math.cos(t)-(r?0:l.height/2),this.attrs?this.attr(this.attrs.x?"x":"cx",s).attr(this.attrs.y?"y":"cy",o):this.translate(s-l.x,o-l.y),n.insertBefore(this.node?this:this[0])}},Raphael.el.flag=function(t,e,a){var r=3,i=this.paper||this[0].paper;if(i){var n,s=i.path().attr({fill:"#000",stroke:"#000"}),o=this.getBBox(),l=o.height/2;switch(this.type){case"text":case"circle":case"ellipse":n=!0;break;default:n=!1}return t=t||0,e="number"==typeof e?e:n?o.x+o.width/2:o.x,a="number"==typeof a?a:n?o.y+o.height/2:o.y,s.attr({path:["M",e,a,"l",l+r,-l-r,o.width+2*r,0,0,o.height+2*r,-o.width-2*r,0,"z"].join(",")}),t=360-t,s.rotate(t,e,a),this.attrs?(this.attr(this.attrs.x?"x":"cx",e+l+r+(n?o.width/2:"text"==this.type?o.width:0)).attr("y",n?a:a-o.height/2),this.rotate(t,e,a),t>90&&270>t&&this.attr(this.attrs.x?"x":"cx",e-l-r-(n?o.width/2:o.width)).rotate(180,e,a)):t>90&&270>t?(this.translate(e-o.x-o.width-l-r,a-o.y-o.height/2),this.rotate(t-180,o.x+o.width+l+r,o.y+o.height/2)):(this.translate(e-o.x+l+r,a-o.y-o.height/2),this.rotate(t,o.x-l-r,o.y+o.height/2)),s.insertBefore(this.node?this:this[0])}},Raphael.el.label=function(){var t=this.getBBox(),e=this.paper||this[0].paper,a=Math.min(20,t.width+10,t.height+10)/2;if(e)return e.rect(t.x-a/2,t.y-a/2,t.width+a,t.height+a,a).attr({stroke:"none",fill:"#000"}).insertBefore(this.node?this:this[0])},Raphael.el.blob=function(t,e,a){var r,i,n,s=this.getBBox(),o=Math.PI/180,l=this.paper||this[0].paper;if(l){switch(this.type){case"text":case"circle":case"ellipse":i=!0;break;default:i=!1}r=l.path().attr({fill:"#000",stroke:"none"}),t=(+t+1?t:45)+90,n=Math.min(s.height,s.width),e="number"==typeof e?e:i?s.x+s.width/2:s.x,a="number"==typeof a?a:i?s.y+s.height/2:s.y;var h=Math.max(s.width+n,25*n/12),f=Math.max(s.height+n,25*n/12),u=e+n*Math.sin((t-22.5)*o),p=a+n*Math.cos((t-22.5)*o),c=e+n*Math.sin((t+22.5)*o),d=a+n*Math.cos((t+22.5)*o),g=(c-u)/2,v=(d-p)/2,x=h/2,m=f/2,y=-Math.sqrt(Math.abs(x*x*m*m-x*x*v*v-m*m*g*g)/(x*x*v*v+m*m*g*g)),w=y*x*v/m+(c+u)/2,M=y*-m*g/x+(d+p)/2;return r.attr({x:w,y:M,path:["M",e,a,"L",c,d,"A",x,m,0,1,1,u,p,"z"].join(",")}),this.translate(w-s.x-s.width/2,M-s.y-s.height/2),r.insertBefore(this.node?this:this[0])}},Raphael.fn.label=function(t,e,a){var r=this.set();return a=this.text(t,e,a).attr(Raphael.g.txtattr),r.push(a.label(),a)},Raphael.fn.popup=function(t,e,a,r,i){var n=this.set();return a=this.text(t,e,a).attr(Raphael.g.txtattr),n.push(a.popup(r,i),a)},Raphael.fn.tag=function(t,e,a,r,i){var n=this.set();return a=this.text(t,e,a).attr(Raphael.g.txtattr),n.push(a.tag(r,i),a)},Raphael.fn.flag=function(t,e,a,r){var i=this.set();return a=this.text(t,e,a).attr(Raphael.g.txtattr),i.push(a.flag(r),a)},Raphael.fn.drop=function(t,e,a,r){var i=this.set();return a=this.text(t,e,a).attr(Raphael.g.txtattr),i.push(a.drop(r),a)},Raphael.fn.blob=function(t,e,a,r){var i=this.set();return a=this.text(t,e,a).attr(Raphael.g.txtattr),i.push(a.blob(r),a)},Raphael.el.lighter=function(t){t=t||2;var e=[this.attrs.fill,this.attrs.stroke];return this.fs=this.fs||[e[0],e[1]],e[0]=Raphael.rgb2hsb(Raphael.getRGB(e[0]).hex),e[1]=Raphael.rgb2hsb(Raphael.getRGB(e[1]).hex),e[0].b=Math.min(e[0].b*t,1),e[0].s=e[0].s/t,e[1].b=Math.min(e[1].b*t,1),e[1].s=e[1].s/t,this.attr({fill:"hsb("+[e[0].h,e[0].s,e[0].b]+")",stroke:"hsb("+[e[1].h,e[1].s,e[1].b]+")"}),this},Raphael.el.darker=function(t){t=t||2;var e=[this.attrs.fill,this.attrs.stroke];return this.fs=this.fs||[e[0],e[1]],e[0]=Raphael.rgb2hsb(Raphael.getRGB(e[0]).hex),e[1]=Raphael.rgb2hsb(Raphael.getRGB(e[1]).hex),e[0].s=Math.min(e[0].s*t,1),e[0].b=e[0].b/t,e[1].s=Math.min(e[1].s*t,1),e[1].b=e[1].b/t,this.attr({fill:"hsb("+[e[0].h,e[0].s,e[0].b]+")",stroke:"hsb("+[e[1].h,e[1].s,e[1].b]+")"}),this},Raphael.el.resetBrightness=function(){return this.fs&&(this.attr({fill:this.fs[0],stroke:this.fs[1]}),delete this.fs),this},function(){var t=["lighter","darker","resetBrightness"],e=["popup","tag","flag","label","drop","blob"];for(var a in e)(function(t){Raphael.st[t]=function(){return Raphael.el[t].apply(this,arguments)}})(e[a]);for(var a in t)(function(t){Raphael.st[t]=function(){for(var e=0;this.length>e;e++)this[e][t].apply(this[e],arguments);return this}})(t[a])}(),Raphael.g={shim:{stroke:"none",fill:"#000","fill-opacity":0},txtattr:{fill:"#fff"},colors:function(){for(var t=[.6,.2,.05,.1333,.75,0],e=[],a=0;10>a;a++)t.length>a?e.push("hsb("+t[a]+",.75, .75)"):e.push("hsb("+t[a-t.length]+", 1, .5)");return e}()},function(){var t=G.Time;t.daysBetween=function(t,e){var a=(this.getParse(t)-this.getParse(e))/864e5;return Math.abs(a)},t.getParse=function(t){var e=t.split("-");return Date.parse(e[1]+"/"+e[2]+"/"+e[0])},t.getDay=function(t){var e=new Date(this.getParse(t)).getDay();return{k:e,v:"\u661f\u671f"+"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".charAt(e)}},t.isLeapYear=function(t){var e=new Date(this.getParse(t)).getYear();return 0==e%4&&(0!=e%100||0==e%400)},t.getPartOfTheYear=function(t,e){var a=this.isLeapYear(t)?366:365,e=e||"before";if("before"===e){var r=new Date(this.getParse(t)).getFullYear()+"-01-01";return this.daysBetween(r,t)/a}if("after"===e){var i=new Date(this.getParse(t)).getFullYear()+"-12-31";return this.daysBetween(t,i)/a}},t.getCommonDate=function(t){var e=new Date(t),a=e.getFullYear(),r=e.getMonth()+1,i=e.getDate();return 10>r&&(r="0"+r),10>i&&(i="0"+i),a+"-"+r+"-"+i},t.getYearArray=function(t,e){for(var a=[],r=new Date(this.getParse(t)).getFullYear(),i=new Date(this.getParse(e)).getFullYear(),n=r;i>=n;n++)a.push(n);return a},t.getMonthArray=function(t,e){for(var a=t.split("-"),r=e.split("-"),i=a[0],n=r[0],s=+a[1],o=12*(n-i)+Math.floor(r[1]),l=[],h=i,f=s,u=o;n>=h;h++)for(;u>=f;f++)if(l.push(h+"-"+(f>9?f:"0"+f)),12===f){f=1,u-=12;break}return l},t.getSeasonArray=function(t,e){for(var a,r,i=this.getMonthArray(t,e),n=[],s=0,o=i.length;o>s;s++)a=i[s].split("-"),r=a[1],("01"===r||"04"===r||"07"===r||"10"===r)&&n.push(i[s]);return n},t.getTimeArray=function(t,e,a){var r=this.daysBetween(t,e),a=a-1,i=[],n=0,s=0,o=Math.floor(r/a),l=r%a;for(i.push(t);a>s;s++)n+=o,n+=l-->0?1:0,i.push(this.getDate(t,n));return i},t.getDate=function(t,e){var a=864e5,r=new Date(this.getParse(t)).getTime();return r+=e*a,this.getCommonDate(r)},t.fixedtime=function(t){for(var e=t.split("|"),a=0,r=e.length;r>a;a++){var t=e[a];e[a]=t.slice(0,4)+"-"+t.slice(4,6)+"-"+t.slice(6,8)}return e},t.checkTimeLength=function(t){var e=t[0],a=t[1];return this.daysBetween(e,a)},t.dateformat=function(t,e){var a=t.split("-"),r=a[0],i=a[1],n=a[2];return arguments[2]===!0&&(r=Math.floor(r),i=Math.floor(i),n=Math.floor(n)),e.replace("Y",""+r).replace("M",""+i).replace("D",""+n)},t.getYearWeek=function(t,e){t=new Date(this.getParse(t)),e=new Date(this.getParse(e));var a=new Date(t.getFullYear(),0,1),r=Math.round((t.getTime()-a.getTime()+864e5*(a.getDay()-t.getDay()))/864e5),i=Math.round((e.getTime()-a.getTime()+864e5*(a.getDay()-e.getDay()))/864e5);return Math.ceil(i/7)-Math.ceil(r/7)}}(),function(){var t=G.Utils,e=G.Time;t.isString=function(t){return"[object String]"==Object.prototype.toString.call(t)},t.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},t.getPointerPosition=function(t){var e=t||window.event,a=e.pageX||e.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),r=e.pageY||e.clientY+(document.documentElement.scrollTop||document.body.scrollTop);return{x:a,y:r}},t.getPosition=function(t){for(var e=0,a=0;t.offsetParent;)e+=t.offsetLeft,a+=t.offsetTop,t=t.offsetParent;return e+=t.offsetLeft,a+=t.offsetTop,{x:e,y:a}},t.truncate=function(t,e){var a=e,r=t.replace(/[^\x00-\xff]/g,"**"),i=r.substring(0,a),n=i.split("*").length-1,s=n/2;a-=s;var o=t.substring(0,a);if(t.length>a)var l=o+"\u2026";else var l=o;return l},t.checkLength=function(t){for(var e=0,a=0,r=t.length;r>a;a++)e+=t.charCodeAt(a)>255?2:1;return e},t.getBeautifyValue=function(t,e){var a=this.getMinMaxValue(t);return this.getAxisStep(a.max,a.min,e)},t.getMinMaxValue=function(t){for(var e,a,r=0,i=0,n=t.length;n>i;i++)if(null!==t[i])if(this.isArray(t[i]))for(var s=0,o=t[i].length;o>s;s++){var l=void 0===t[i][s]||""===t[i][s]?0:parseFloat(t[i][s]);void 0===e&&void 0===a?(e=l,a=l):e>l?e=l:l>a&&(a=l),r++}else{var l=void 0===t[i]||""===t[i]?0:parseFloat(t[i]);void 0===e&&void 0===a?(e=l,a=l):e>l?e=l:l>a&&(a=l),r++}return 0===r?{min:0,max:0}:{min:e,max:a}},t.getAverageValue=function(t){if(this.isArray(t[0])){for(var e=[],a=0,r=t.length;r>a;a++){var i=0,n=0,s=t[a].length;if(1>s)e.push(0);else{for(;s>n;n++){var o=void 0===t[a][n]||""===t[a][n]?0:parseFloat(t[a][n]);i+=o}e.push(Math.floor(i/s))}}return e}for(var i=0,a=0,r=t.length;r>a;a++){var o=void 0===t[a]||""===t[a]?0:parseFloat(t[a]);i+=o}return Math.floor(i/r)},t.getAxisStep=function(t,e,a){a=a||7,e=e||0,a-=1,a>t-e&&(t=e+a);for(var r=t-e,i=Math.floor(Math.log(r)/Math.LN10),n=Math.pow(10,i-1),s=r/n,o=n*Math.ceil(s/a),l=Math.floor(e/n)*n,h=l+o*a;t>h;)o+=n,h=l+o*a;return[h,l,o]},t.getMaxLength=function(t){for(var e,a=0,r=t.length;r>a;a++){var i=t[a];if(this.isArray(i)){var n=i.length;(void 0===e||n>e)&&(e=n)}}return e},t.textrow=function(t,e){for(var a,r=0,i=0,n=t.length;n>i;i++)if(r+=t.charCodeAt(i)>255?2:1,r>e){a=i-1;break}if(a){var s=t.substring(0,a),o=t.substring(a);return s+"\n"+o}return t},t.clearpaperset=function(t){for(var e=0,a=t.length;a>e;e++)t[e].length>1?this.clearpaperset(t[e]):t[e].remove()},t.showpaperset=function(t){for(var e=0,a=t.length;a>e;e++)t[e].show()},t.hidepaperset=function(t){for(var e=0,a=t.length;a>e;e++)t[e].hide()},t.fireeventpaperset=function(t,e){for(var a=0,r=t.length;r>a;a++)t[a][e]()},t.settimefuc=function(t,e){t&&(clearTimeout(t),t=null);var a=arguments[2]||300;t=setTimeout(function(){e()},a)},t.extendparam=function(t,e,a){for(var r in e){var i=a[r];if(-1!==r.indexOf(".")){var n=r.split(".");i=a[n[0]],t[i][n[1]]=e[r]}else t[i]=e[r]}},t.rectToPath=function(t,e,a,r){return"M"+t+","+e+"L"+(t+a)+","+e+"L"+(t+a)+","+(e+r)+"L"+t+","+(e+r)+"L"+t+","+e},t.millesimal=function(t){return(""+t).replace(/(\d{1,3})(?=(\d{3})+(?:$|\.))/g,"$1,")},t.getTimeaxisXpoint=function(t,a,r,i){var n=e.daysBetween(r[0],r[1]),s=e.daysBetween(r[0],t);return s*i/n+a},t.getTimeaxisDatepoint=function(t,a,r,i){var n=e.daysBetween(r[0],r[1]),s=Math.floor((t-a)*n/i);return e.getDate(r[0],s)}}(),function(){var t=G.CONFIG,e=G.Utils;G.fn.categoryAxis=function(a,r,i,n,s,o,l){var h=this,f=h.paper,l=l||{},u=h.chartid,p=l.typeid||G.guid("categoryAxis"),c=h.getpaperset(p),d=function(a,r,i,n,s,o,l){var l=l||{},h=l.format;e.clearpaperset(c);var u,p=0,d=o.length,g=l.dir||"x",v=l.step||d/s,x=l.textStyle||t.TEXT_STYLE;if("x"===g){u=l.part||i/s;for(var m=d>s?s:d;m>p;p++){var y=o[Math.floor(v*p)];h&&(y=h(y)),c.push(f.text(a+u*p,r,y).attr(x))}}};return d(a,r,i,n,s,o,l),eve.on(u+"."+p+".refresh",function(t){var t=t||{},e=t.type,a=t.value;"data"===e&&a&&d.apply(null,a)}),{typeid:p,paperset:c,refresh:d}}}(),function(){var t=G.CONFIG,e=G.Utils;G.fn.column=function(a,r,i,n,s,o,l){var h=this,f=h.paper,l=l||{},u=h.chartid,p=l.typeid||G.guid("column"),c=h.getpaperset(p),d=function(a,r,i,n,s,o,l){var h,u=o[0],p=o[1],l=l||{},d=l.k,g=l.limit,v=l.minheight||0,x=l.kspace,m=l.popup,y=(l.popupfn,l.rectwithfn),w=l.formatfn,M=l.colorfn;h=void 0!==l.ANIMATION?"on"===l.ANIMATION?"on":"off":"on"===t.ANIMATION?"on":"off",e.hidepaperset(c);var A,G,T=0,k=s.length,E=l.dir||"up",_=l.color;for(g&&k>g&&(k=g),d?(x?(A=i/(k*d+k+1),a+=A):A=i/(k*d+k-1),G=d*A):(A=l.space||0,G=l.col_w||(i-A*(k-1))/k);k>T;T++){var b=0===s[T]?0:n*(s[T]-p)/(u-p),S=l.col_h||b;v>S&&(S=v,b=v);var I,L=a+A*T+G*T,C=G,F=S;I="down"===E?r+b-S:r+n-b;var B=e.millesimal(s[T]);if(c[T])c[T].d=B,"on"===h?c[T].show().animate(Raphael.animation({x:L,y:I,width:C,height:F},300,"<>")):c[T].show().attr({x:L,y:I,width:C,height:F});else{var O=M?M(T):_||t.COLORS[T],R=f.rect(L,I,C,F).attr({fill:O,stroke:"none"});R.d=B,R.i=T,m&&R.hover(function(){var t=this.attr("x"),e=this.attr("y"),a=this.attr("width");this.flag=f.popup(t+a/2,e,w?w(this.d,this.i,{x:t,y:e,w:a}):this.d||"0"),l.popupStyle&&this.flag[0].attr(l.popupStyle),l.popupText&&this.flag[1].attr(l.popupText)},function(){this.flag.animate({opacity:0},300,function(){this.remove()})}),c.push(R)}y&&y(f,R,T,L,I,C,F)}};return d(a,r,i,n,s,o,l),eve.on(u+"."+p+".refresh",function(t){var t=t||{},e=t.type,a=t.value;"data"===e&&a&&d.apply(null,a)}),{typeid:p,paperset:c,refresh:d}}}(),function(){var t=(G.CONFIG,G.Time),e=G.Utils;G.fn.cover=function(a,r,i,n,s,o){var l,h,f,u,p=this,c=p.paper,o=o||{},d=p.chartid,g=o.typeid||G.guid("guide"),v=p.getpaperset(g),x=v[0],m=!1,y=function(){m=!0},w=function(a){if(m!==!1){var r=h[0],i=h[1],n=h[2],s=h[3],o=e.getPointerPosition(a),f=o.x,u=o.y,v=c.canvas.parentNode,x=e.getPosition(v),y=x.x,w=x.y,M=p.coverdata,A=M[0],G=Math.round((f-y-r)*A/n);if("time"===type)var T=M[1],k=t.getDate(T,G);else var k=G;l&&eve(d+"."+g+".refresh",null,{type:"move",value:[f-y,u-w,k,[r,i,n,s]]})}},M=function(){m=!1,u&&u()},A=function(a,r,i,n,s,o){h=arguments;var d,g=o.style||{fill:"#f00",stroke:"none",opacity:0};if(u=o.outfn||null,type=e.isArray(s)?"time":"category",l=o.fn||null,"time"===type){d=t.daysBetween(s[0],s[1]);var m=s[0];p.coverdata=[d,m]}else d=s-1,p.coverdata=[d];f=i/d,x?x.attr({x:a,y:r,width:i,height:n}):(x=c.rect(a,r,i,n).attr(g),v.push(x),x.mouseover(y),x.mousemove(w),x.mouseout(M))};return A(a,r,i,n,s,o),eve.on(d+"."+g+".refresh",function(t){var t=t||{},e=t.type,a=t.value;"data"===e?a&&A.apply(null,a):"move"===e&&l&&l.apply(null,a)}),{typeid:g,paperset:v,refresh:A}}}(),function(){var t=G.CONFIG,e=G.Time,a=G.Utils,r=8,i=30;G.fn.datazoom=function(n,s,o,l,h,f,u){var p,c,d,g,v,x,m,y,w,M,A,T,k=this,E=k.paper,u=u||{},_=this.chartid,b=u.typeid||G.guid("datazoom"),S=k.getpaperset(b),I=E.canvas,L=function(n,s,o,l,h,f,u){p=arguments,a.clearpaperset(S);var G,u=u||{},L=u.series,C=f[0],F=f[1],B=h[0],O=h[1],R=[];C>F&&(G=C,C=F,F=G),B>C&&(C=B),F>O&&(F=O),c=u.fn||null,L&&k.draw(b+"line",["line",n,s,o,l,L,L.length,a.getBeautifyValue(L,3),{colors:["#E0E0E0"],areaopacity:1,ANIMATION:"off",type:"area"}]);var D,N,Y=e.getYearArray(B,O),j=e.getPartOfTheYear(B,"after"),P=e.getPartOfTheYear(O,"before"),X=n,U=0,z=Y.length,V=o/(z-2+j+P),H=3,Z=V/H;for(R.push("M"+n+","+s+"L"+n+","+(s+l)),R.push("M"+(n+o)+","+s+"L"+(n+o)+","+(s+l)),R.push("M"+n+","+(s+l)+"L"+(n+o)+","+(s+l));z>U;U++){var $,q=!0;if(0===U)for(50>V*j&&(q=!1),D=1;H>D&&!(n>X+V*j-Z*D);D++)$="M"+(X+V*j-Z*D)+","+(s+l-5)+"L"+(X+V*j-Z*D)+","+(s+l),R.push($);else if(U===z-1&&50>V*P&&(q=!1),$="M"+X+","+(s+l-8)+"L"+X+","+(s+l),R.push($),z-1>U)for(D=1;H>D;D++)$="M"+(X+Z*D)+","+(s+l-5)+"L"+(X+Z*D)+","+(s+l),R.push($);else if(U===z-1)for(D=1;H>D&&!(Z*D>V*P);D++)$="M"+(X+Z*D)+","+(s+l-5)+"L"+(X+Z*D)+","+(s+l),R.push($);q&&(N=E.text(X,s+l/2,Y[U]).attr({fill:"#9A9A9A"}),0===U&&N.attr({"text-anchor":"start"}),S.push(N)),X+=0===U?V*j:V}S.push(E.path(R.join("")).attr({stroke:"#999",fill:"none"}));var J=e.daysBetween(B,O),W=e.daysBetween(B,C),K=e.daysBetween(B,F),Q=n+o*W/J,te=n+o*K/J,ee=te>Q?te-Q:0,ae=t.BASE_IMG_SRC+t.DATAZOOM.HANDLE_IMG;m=function(t){for(var a=[],r=0,i=t.length;i>r;r++){var s=t[r],l=Math.floor((s-n)*e.daysBetween(B,O)/o);a.push(e.getDate(B,l))}return a},y=function(){this.ox=this.attr("x"),this.ow=this.attr("width"),this.animate({"fill-opacity":.2},500)},w=function(){var t=d.attr("x"),e=d.attr("width");this.animate({"fill-opacity":1},500),eve(_+"."+b+".refresh",null,{type:"drag",value:m([t,t+e])})},M=function(t){var e=this.ox+t,a=this.ow,r=p[0],i=p[1],n=p[2],s=p[3];r>e&&(e=r),e+a>r+n&&(e=r+n-a),g.attr({x:e-5}),d.attr({x:e}),v.attr({x:e+a-5});var o=e,l=e+a;return x[0].attr({path:"M"+r+","+i+"L"+o+","+i}),x[1].attr({path:"M"+(l-1)+","+i+"L"+(r+n)+","+i}),x[2].attr({path:"M"+o+","+(i+s)+"L"+l+","+(i+s)}),E.safari(),!1},A=function(t){var e=this.ox+t,a=p[0],r=p[1],i=p[2],n=p[3];a-5>e&&(e=a-5),e>a+i-5&&(e=a+i-5),g.attr({x:e});var s=v.attr("x"),o=s>e?e:s,l=Math.abs(e-s);d.attr({x:o+5,width:l});var h=o+5,f=o+5+l;return x[0].attr({path:"M"+a+","+r+"L"+h+","+r}),x[1].attr({path:"M"+(f-1)+","+r+"L"+(a+i)+","+r}),x[2].attr({path:"M"+h+","+(r+n)+"L"+f+","+(r+n)}),E.safari(),!1},T=function(t){var e=this.ox+t,a=p[0],r=p[1],i=p[2],n=p[3];a-5>e&&(e=a-5),e>a+i-5&&(e=a+i-5),v.attr({x:e});var s=g.attr("x"),o=e>s?s:e,l=Math.abs(s-e);d.attr({x:o+5,width:l});var h=o+5,f=o+5+l;return x[0].attr({path:"M"+a+","+r+"L"+h+","+r}),x[1].attr({path:"M"+(f-1)+","+r+"L"+(a+i)+","+r}),x[2].attr({path:"M"+h+","+(r+n)+"L"+f+","+(r+n)}),E.safari(),!1},d?(d.attr({x:Q,y:s,width:ee}),I.appendChild(d[0])):(d=E.rect(Q,s,ee,30).attr({fill:t.DATAZOOM.ZOOM_COLOR,stroke:"none",opacity:.5,cursor:"e-resize"}),d.drag(M,y,w)),g?(g.attr({x:Q-5,y:s}),I.appendChild(g[0])):(g=E.image(ae,Q-5,s,r,i).attr({cursor:"e-resize"}),g.drag(A,y,w)),v?(v.attr({x:te-5,y:s}),I.appendChild(v[0])):(v=E.image(ae,te-5,s,r,i).attr({cursor:"e-resize"}),v.drag(T,y,w)),x?(x[0].attr({path:"M"+n+","+s+"L"+Q+","+s}),x[1].attr({path:"M"+te+","+s+"L"+(n+o)+","+s}),x[2].attr({path:"M"+Q+","+(s+l)+"L"+te+","+(s+l)})):(x=[],x.push(E.path("M"+n+","+s+"L"+Q+","+s).attr({stroke:"#4284E2",fill:"none"})),x.push(E.path("M"+(te-1)+","+s+"L"+(n+o)+","+s).attr({stroke:"#4284E2",fill:"none"})),x.push(E.path("M"+Q+","+(s+l)+"L"+te+","+(s+l)).attr({stroke:"#4284E2",fill:"none"})))};L(n,s,o,l,h,f,u);var C={x:0,y:1,w:2,h:3,datatimes:4,usertimes:5,opts:6};return eve.on(_+"."+b+".refresh",function(t){var t=t||{},e=t.type,r=t.value;"data"===e?r&&(a.extendparam(p,r,C),L.apply(null,p)):"drag"===e&&c&&c(r)}),{typeid:b,paperset:S,refresh:L}}}(),function(){var t=G.CONFIG;G.fn.guide=function(e,a,r,i,n,s){var o=this,l=o.paper,s=s||{},h=s.typeid||G.guid("guide"),f=o.getpaperset(h),u=function(e,a,r,i,n,s){var o,s=s||{},h=s.firstline||"visible",u=s.lastline||"visible",p=s.guideStyle||t.GUIDE_STYLE,c=s.dir||"y",d=[],g=0;if("x"===c){for(o=r/n;n>=g;g++)if(!(0===g&&"hidden"===h||g===n&&"hidden"===u)){var v=e+o*g;d.push("M"+v+","+a+"L"+v+","+(a+i))}}else if("y"===c)for(o=i/n;n>=g;g++)if(!(0===g&&"hidden"===h||g===n&&"hidden"===u)){var x=a+o*g;d.push("M"+e+","+x+"L"+(e+r)+","+x)}f[0]?f[0].show().attr({path:d}).attr(p):f.push(l.path(d.join("")).attr(p))};return u(e,a,r,i,n,s),{typeid:h,paperset:f,refresh:u}}}(),function(){var t=G.CONFIG,e=(G.Time,G.Utils);G.fn.legend=function(a,r,i,n,s,o){var l,h=this,f=h.paper,o=o||{},u=h.chartid,p=o.typeid||G.guid("legend"),c=h.getpaperset(p),d=f.set(),g=f.set(),v=function(a,r,i,n,s,o){l&&e.fireeventpaperset(d,"unclick"),e.clearpaperset(d),e.clearpaperset(c),e.clearpaperset(g);var o=o||{},h=o.textlimit;l=o.fn||null;for(var v=6,x=24,m=a,y=0,w=s.length;w>y;y++){var M=s[y],A=M,G=v*e.checkLength(M);h&&(M=e.truncate(M,h),G=v*e.checkLength(M)-10),function(e){c.push(f.rect(m,r,10,10).attr({fill:t.COLORS[e],stroke:"#fff"})),g.push(f.text(m+18,r+5,M).attr({fill:"#333","text-anchor":"start"}));var a=f.rect(m,r,28+G,13).attr({title:A,fill:"#ff0000",stroke:"none",opacity:0});d.push(a),l&&(a.attr({cursor:"pointer"}),a.click(function(){var t,a=c[e],r=g[e];"off"!==a.data("state")?(a.data("dt",a.attrs.fill),a.attr({fill:"#ccc",stroke:"#fff"}),r.attr({fill:"#999"}),a.data("state","off"),t=!0):(a.attr({fill:a.data("dt"),stroke:"#fff"}),r.attr({fill:"#333"}),a.data("state","on"),t=!1),eve(u+"."+p+".refresh",null,{type:"click",value:[e,t]})}),a.hover(function(){g[e].attr({fill:"#6e87d7"})},function(){g[e].attr({fill:"#333"})}))}(y),m+=G+x+10}};return v(a,r,i,n,s,o),eve.on(u+"."+p+".refresh",function(t){var t=t||{},e=t.type,a=t.value;"data"===e?a&&v.apply(null,a):"click"===e&&l&&l.apply(null,a)}),{typeid:p,paperset:c,refresh:v}}}(),function(){function t(t,e,a,r,i,n){var s=(a-t)/2,o=(i-a)/2,l=Math.atan((a-t)/Math.abs(r-e)),h=Math.atan((i-a)/Math.abs(r-n));l=r>e?Math.PI-l:l,h=r>n?Math.PI-h:h;var f=Math.PI/2-(l+h)%(2*Math.PI)/2,u=s*Math.sin(f+l),p=s*Math.cos(f+l),c=o*Math.sin(f+h),d=o*Math.cos(f+h);return{x1:a-u,y1:r+p,x2:a+c,y2:r+d}}var e=G.CONFIG,a=G.Time,r=G.Utils;G.fn.line=function(i,n,s,o,l,h,f,u){var p=this,c=p.paper,u=u||{},d=p.chartid,g=u.typeid||G.guid("legend"),v=p.getpaperset(g);c.set();var x,m=function(i,n,s,o,l,h,f,u){function p(e,a){if(null===e||void 0===e||1>e.length)return v[a]?v[a].attr({path:""}):v.push(c.path("")),void 0;var r,l,h=0,f=[];if(1===e.length){var p=e[0],_=o*(p-M)/(w-M),b=n+o-_;f.push("M"+i+","+b+"L"+(i+s)+","+b)}else for(;y>=h;h++){var S=e[h],p=void 0===S||""===S?0:S,_=o*(p-M)/(w-M),I=i+E*h,b=n+o-_;if(u.smooth){if(h&&h!=y){var L=i+E*(h-1),C=n+o-o*((e[h-1]||0)-M)/(w-M),F=i+E*(h+1),B=n+o-o*((e[h+1]||0)-M)/(w-M),O=t(L,C,I,b,F,B);f=f.concat([O.x1,O.y1,I,b,O.x2,O.y2])}h||(f=["M",I,b,"C",I,b])}else f.push((0===h?"M":"L")+I+","+b)}if(u.smooth&&(f=f.concat([I,b,I,b])),"line"===A)r=u.smooth?f.join(","):f.join(""),l={stroke:G[a],"stroke-width":2,fill:"none"},k&&(l["stroke-dasharray"]=k);else if("area"===A){if(u.smooth)r=f.join(",");else if(1===e.length)r="M"+i+","+(n+o)+f[0].replace("M","L")+"L"+(i+s)+","+(n+o)+"L"+i+","+(n+o);else{var R=f[f.length-1],D=R.replace("L","").replace("M","").split(","),N=D[0],Y="M"+i+", "+(n+o),j="L"+N+", "+(n+o),P="L"+i+", "+(n+o);r=Y+f.join("")+j+P}l={fill:G[a],stroke:"none",opacity:T}}if(v[a])if(v[a].attr(l).show(),"on"===m){var X=Raphael.animation({path:r},400,"<>");""!==v[a].attr("path")?v[a].stop(X).animate(X):v[a].stop(X).attr({path:r})}else v[a].attr({path:r});else{var U=c.path(r).attr(l);x&&U.hover(function(){eve(d+"."+g+".refresh",null,{type:"hover",value:[U,v]})},function(){}),v.push(U)}}var m,y,w=f[0],M=f[1],u=u||{},A=(u.hasborder,u.type||"line"),G=u.colors||e.COLORS,T=u.areaopacity||.3,k=u.dasharray;m=void 0!==u.ANIMATION?"on"===u.ANIMATION?"on":"off":"on"===e.ANIMATION?"on":"off",x=u.line_f_in,r.hidepaperset(v),y=r.isArray(h)?a.daysBetween(h[0],h[1]):h-1;var E=s/y;if(r.isArray(l[0])||null===l[0]&&l.length)for(var _=0,b=l.length;b>_;_++)p(l[_],_);else p(l,0)};return m(i,n,s,o,l,h,f,u),eve.on(d+"."+g+".refresh",function(t){var t=t||{},e=t.type,a=t.value;"data"===e?a&&m.apply(null,a):"hover"===e&&x&&x.apply(null,a)}),{typeid:g,paperset:v,refresh:m}}}(),function(){var t=G.CONFIG,e=G.Time,a=G.Utils;G.fn.timeAxis=function(r,i,n,s,o,l,h){var f=this,u=f.paper,h=h||{},p=f.chartid,c=h.typeid||G.guid("timeAxis"),d=f.getpaperset(c),g=function(r,i,n,s,o,l,h){var h=h||{},f=h.textStyle||t.TEXT_STYLE,p=h.dir||"x",c=h.format;a.clearpaperset(d);var g,v,x=0,o=o||10,m=l[0],y=l[1],w=e.daysBetween(m,y),M=h.formattype||"Y-M-D";o>w+1&&(o=w);var A=w/o;if("x"===p)for(g=n/o;o>=x;x++){v=e.getDate(m,A*x),c&&(v=c(v,x));var G=u.text(r+g*x,i,v).attr(f);0===x&&G.attr({"text-anchor":"start"}),d.push(G)}else if("y"===p)for(g=s/o;o>=x;x++)v=e.dateformat(labels[x],M),c&&(v=c(v,x)),d.push(u.text(r,i+g*(o-x),v).attr(f))};return g(r,i,n,s,o,l,h),eve.on(p+"."+c+".refresh",function(t){var t=t||{},e=t.type,a=t.value;"data"===e&&a&&g.apply(null,a)}),{typeid:c,paperset:d,refresh:g}}}(),function(){var t=(G.CONFIG,G.Time),e=G.Utils;G.fn.trendtimeAxis=function(a,r,i,n,s,o,l){var h=this,f=h.paper,l=l||{},u=h.chartid,p=l.typeid||G.guid("trendtimeAxis"),c=h.getpaperset(p),d=f.set(),g=function(a,r,i,n,s,o,l){function h(t,e){L.push(["M",e,t[0],"L",e,t[1]].join(","))}function u(t,a){if(e.isArray(t[0]))for(var r=0,i=t.length;i>r;r++)h(t[r],a);else h(t,a)}var l=l||{},p={fill:"#9A9A9A"},g=(l.dir||"x",l.guide),v={stroke:"#F1F1F1",fill:"none"};l.format,e.clearpaperset(c);var x,m,y,w,M,A,G,T,k,E,_=0,s=s||10,b=o[0],S=o[1],I=t.daysBetween(b,S),L=[];if(b===S)return y=t.dateformat(b,"Y\u5e74M\u6708D\u65e5",!0),T=f.text(a+i/2,r,y).attr(p),c.push(T),void 0;if(s>I+1&&(s=I+1),60>=I){for(m=t.getTimeArray(b,S,s),_=0,x=m.length;x>_;_++)y=m[_],A=y.substr(0,4),0===_?(w=A,M="Y\u5e74M\u6708D\u65e5"):A>w?(w=A,M="Y\u5e74M\u6708D\u65e5"):M="M\u6708D\u65e5",k=e.getTimeaxisXpoint(y,a,o,i),y=t.dateformat(y,M,!0),T=f.text(k,r,y).attr(p),0===_?T.attr({"text-anchor":"start"}):_===x-1&&T.attr({"text-anchor":"end"}),c.push(T),g&&0!==_&&u(g,k);g&&(d[0]?d[0].attr({path:L.join(",")}):d.push(f.path(L.join(",")).attr(v)))}else if(30*i/I>65){for(m=t.getMonthArray(b,S),_=0,x=m.length;x>_;_++)y=m[_],k=0===_?a:e.getTimeaxisXpoint(y+"-01",a,o,i),E=m[_+1]?e.getTimeaxisXpoint(m[_+1]+"-01",a,o,i):a+i,A=y.substr(0,4),0===_?(w=A,M="M\u6708"):A>w?(w=A,M="Y\u5e74M\u6708"):M="M\u6708",y=t.dateformat(y,M,!0),0===_?E-a>40&&(T=f.text(a,r,y).attr(p),T.attr({"text-anchor":"start"}),c.push(T)):_===x-1?a+i-k>40&&(T=f.text(a+i,r,y).attr(p),T.attr({"text-anchor":"end"}),c.push(T)):(T=f.text((k+E)/2,r,y).attr(p),c.push(T)),g&&0!==_&&u(g,k);g&&(d[0]?d[0].attr({path:L.join(",")}):d.push(f.path(L.join(",")).attr(v)))}else if(90*i/I>75){for(m=t.getSeasonArray(b,S),_=0,x=m.length;x>_;_++)if(y=m[_],_!==x-1){k=e.getTimeaxisXpoint(y+"-01",a,o,i),E=m[_+1]?e.getTimeaxisXpoint(m[_+1]+"-01",a,o,i):a+i;var C=y.split("-");A=C[0],G=C[1];var F;switch(G){case"01":F="1~3\u6708";break;case"04":F="4~6\u6708";break;case"07":F="7~9\u6708";break;case"10":F="10~12\u6708";break;default:F=""}1===_?(w=A,M=F):A>w?(w=A,M="Y\u5e74"+F):M=F,y=t.dateformat(y,M,!0),T=f.text((k+E)/2,r,y).attr(p),c.push(T),g&&(u(g,k),_===x-2&&u(g,E))}g&&(d[0]?d[0].attr({path:L.join(",")}):d.push(f.path(L.join(",")).attr(v)))}else{for(m=t.getYearArray(b,S),_=0,x=m.length;x>_;_++)y=m[_],k=0===_?a:e.getTimeaxisXpoint(y+"-01-01",a,o,i),E=m[_+1]?e.getTimeaxisXpoint(m[_+1]+"-01-01",a,o,i):a+i,0===_?E-a>50&&(T=f.text(a,r,y+"\u5e74").attr(p).attr({"text-anchor":"start"}),c.push(T)):_===x-1?a+i-k>50&&(T=f.text(a+i,r,y+"\u5e74").attr(p).attr({"text-anchor":"end"}),c.push(T)):(T=f.text((k+E)/2,r,y+"\u5e74").attr(p),c.push(T),g&&(u(g,k),_===x-2&&L.push(["M",E,g[0],"L",E,g[1]].join(","))));g&&(d[0]?d[0].attr({path:L.join(",")}):d.push(f.path(L.join(",")).attr(v)))}};return g(a,r,i,n,s,o,l),eve.on(u+"."+p+".refresh",function(t){var t=t||{},e=t.type,a=t.value;"data"===e&&a&&g.apply(null,a)}),{typeid:p,paperset:c,refresh:g}}}(),function(){var t=G.CONFIG,e=(G.Time,G.Utils);G.fn.valueAxis=function(a,r,i,n,s,o,l){var h=this,f=h.paper,l=l||{},u=h.chartid,p=l.typeid||G.guid("valueAxis"),c=h.getpaperset(p),d=function(a,r,i,n,s,o,l){var l=l||{},h=o[0],u=o[1],p=l.textFormat,d=l.firstvalue,g=l.lastvalue,v=l.textStyle||t.TEXT_STYLE,x=l.dir||"y";e.clearpaperset(c);var m,y,w=0,s=s||5,M=(h-u)/s;if("x"===x)for(y=i/s;s>=w;w++)"hidden"===d&&0===w||"hidden"===g&&w===s||(m=parseInt(u+M*w),p&&(m=p(m)),c.push(f.text(a+y*w,r,m).attr(v)));else if("y"===x)for(y=n/s;s>=w;w++)"hidden"===d&&0===w||"hidden"===g&&w===s||(m=parseInt(u+M*w),p&&(m=p(m)),c.push(f.text(a,r+y*(s-w),m).attr(v)))};return d(a,r,i,n,s,o,l),eve.on(u+"."+p+".refresh",function(t){var t=t||{},e=t.type,a=t.value;"data"===e&&a&&d.apply(null,a)}),{typeid:p,paperset:c,refresh:d}}}(),function(){var t=G.CONFIG,e=(G.Time,G.Utils),a='<div class="view-bd"><div class="view-table-wrap">#{0}</div><div class="view-bg"></div></div>',r='<tr><td class="view-dot"><span style="background:#{0}"></span></td><td class="view-label">#{1}\uff1a</td><td class="view-value">#{2}</td></tr>';G.fn.viewbox=function(i,n,s,o){var l=this.paper,o=o||{},h=o.id||"viewbox",f=o.close,u=(o.limit,s||{});1>T("#"+h).length&&T(document.body).append('<div id="'+h+'" class="viewbox" style="display:none;"></div>');var p=T("#"+h),c="";if(void 0!==u.title&&(c+=new T.string(a).format([u.title])),void 0!==u.content)if(e.isArray(u.content)){for(var d="",g=u.content,v=0,x=g.length;x>v;v++)d+=new T.string(r).format([t.COLORS[v],e.truncate(g[v][0],10),e.millesimal(g[v][1])||0,g[v][0]]);c+=new T.string(a).format(['<table class="view-table">'+d+"</table>"])}else c+=new T.string(a).format([u.content]);""!==c&&(f&&(c+='<div onclick="this.parentNode.style.display=\'none\'" class="view-close">X</div>'),p.html(c));var m=l.canvas.parentNode,y=e.getPosition(m),w=y.x,M=y.y;return p.css({left:w+i,top:M+n,display:"block"}),p}}(),function(){function t(t){var e=t[0],a=t.slice(1);if(r.isFunction(this[e])){var i=e;
void 0!==this.list[e]&&(i=G.guid(e)),this.list[i]=this[e].apply(this,a)}else G.debug(e+" \u4e0d\u5b58\u5728")}function e(e){if(r.isArray(e[0]))for(var a=0,i=e.length;i>a;a++){var n=e[a]||{};t.call(this,n)}else t.call(this,e)}function a(a,r){switch(this.chartid=G.guid("chart"),this.paper=a,this.list={},this.paperset={},r[0]){case"list":e.call(this,r[1]);break;case"fn":r[1].call(this);break;default:t.call(this,r)}}var r=G.Utils,i=function(){};i.prototype=G.fn,a.prototype=new i,a.prototype.getpaperset=function(t){return void 0===this.paperset[t]&&(this.paperset[t]=this.paper.set()),this.paperset[t]},a.prototype.draw=function(t){var e=this.paperset;if(arguments[2]){var a=arguments[1],r=arguments[2];e[t]?r.apply(e[t],[]):e[t]=a()}else{var i=arguments[1][0],n=arguments[1].slice(1);e[t]?e[t].refresh&&e[t].refresh.apply(this,n):e[t]=this[i].apply(this,n)}},a.prototype.refresh=function(t,e){var e=e||{},a=this.chartid;if("*"===t){var i=eve._events.n[a].n;for(var n in i)i[n].n.hasOwnProperty("refresh")&&this.eve(a+"."+n+".refresh",e)}else if(r.isArray(t))for(var s=0,o=t.length;o>s;s++)this.eve(a+"."+t[s]+".refresh",e);else t?this.eve(a+"."+t+".refresh",e):G.debug("\u7f3a\u5c11typeid\u53c2\u6570")},a.prototype.eve=function(t,e){eve(t,null,e)},Raphael.fn.chart=function(){return new a(this,Array.prototype.slice.call(arguments))}}(),function(){var t=G.CONFIG;G.Time,G.Utils;var e=t.ICON_AGE_IMG,a=t.ICON_AGE_TEXT;G.fn.agemorecolumn=function(r,i,n,s,o,l){var h=this,f=h.paper,u=this.chartid,l=l||{},p=l.typeid||G.guid("agemorecolumn"),c=function(r,i,n,s,o,l){var u=0,c=o.length,d=12,g=50,v=r+10+d*c+g*c;for(h.draw(p+"text",function(){return f.text(r+10,i+15,"\u5e74\u9f84\u5206\u5e03\uff1a").attr(t.TEXT_STYLE)},function(){this.attr({x:r+10,y:i+15})}),h.draw(p+"guide",["guide",r,i+30,v-r-5,110,5,{dir:"y",guideStyle:{stroke:"#F1F1F1",fill:"none"}}]);c>u;u++){var x=r+10+d*u+g*u;h.draw(p+"column"+u,["column",x,i+30,g,110,o[u],[100,0],{popup:!0,formatfn:function(t){return t+"%"},k:o[u].length>2?10:5,minheight:1,kspace:o[u].length>2?!1:!0}]),h.draw(p+"list"+u,function(){return{image:f.image(t.BASE_IMG_SRC+e[u],x,i+145,50,45),text:f.text(x+25,i+145+55,a[u]).attr({fill:"#9A9A9A"})}},function(){this.image.attr({x:x,y:i+145}),this.text.attr({x:x+25,y:i+145+55})})}h.draw(p+"path",function(){return f.path("M"+r+","+(i+140)+"L"+v+","+(i+140)).attr({stroke:"#ccc",fill:"none"})},function(){this.attr({path:"M"+r+","+(i+140)+"L"+v+","+(i+140)})}),h.draw(p+"valueAxis",["valueAxis",v+30,i+30,20,110,4,[100,0],{textFormat:function(t){return t+"%"},textStyle:{fill:"#9A9A9A","text-anchor":"end"}}])};return eve.on(u+"."+p+".refresh",function(t){var t=t||{},e=t.type,a=t.value;"data"===e&&a&&c.apply(null,a)}),c(r,i,n,s,o,l),{typeid:p,refresh:c}}}(),function(){var t=G.CONFIG;G.Time,G.Utils;var e=t.ICON_AGE_IMG,a=t.ICON_AGE_TEXT;G.fn.ageonecolumn=function(r,i,n,s,o,l){var h=this,f=h.paper,u=this.chartid,l=l||{},p=l.typeid||G.guid("ageonecolumn"),c=function(r,i,n,s,o,l){var u=o.length;h.draw(p+"text",function(){return f.text(r+10,i+15,"\u5e74\u9f84\u5206\u5e03\uff1a").attr(t.TEXT_STYLE)},function(){this.attr({x:r+10,y:i+15})}),h.draw(p+"guide",["guide",r+17,i+30+10,n-70,110,4,{dir:"y",guideStyle:{stroke:"#F1F1F1",fill:"none"}}]),h.draw(p+"column",["column",r+17,i+30+10,n-70,110,o,[100,0],{popup:!0,formatfn:function(t){return t+"%"},color:t.COLORS[0],minheight:1,k:1,kspace:u>2?!1:!0,rectwithfn:function(r,i,n,s,o,l,h){r.image(t.BASE_IMG_SRC+e[n],s+l/2-24,o+h+5,50,45),r.text(s+l/2+1,o+h+60,a[n]).attr({fill:"#9A9A9A"})}}]),h.draw(p+"valueAxis",["valueAxis",r+n-20,i+30+10,20,110,4,[100,0],{textFormat:function(t){return t+"%"},textStyle:{fill:"#9A9A9A","text-anchor":"end"}}])};return eve.on(u+"."+p+".refresh",function(t){var t=t||{},e=t.type,a=t.value;"data"===e&&a&&c.apply(null,a)}),c(r,i,n,s,o,l),{typeid:p,refresh:c}}}(),function(){var t=G.CONFIG,e=G.Utils;G.fn.boxtitle=function(t,a,r,i,n,s){var o=this.paper;this.chartid,o.rect(t,a,r,i).attr({fill:"#F6F6F6",stroke:"none"}),n[0]&&o.text(t+20,a+28,n[0]).attr({font:"16px Arial",fill:"#9A9A9A","text-anchor":"start"});var l=t+20+8*e.checkLength(n[0])+10;n[1]&&o.text(l,a+31,n[1]).attr({fill:"#999","text-anchor":"start"})};var a="icon_all.png",r="icon_pc.png",i="icon_wise.png",n="tab_on.png",s="tab_off.png";G.fn.boxtab=function(e,o,l,h,f,u){var p=this.paper,c=(this.chartid,e+15),d=[],u=u||{},g=u.curnum;p.path("M"+e+","+(o+31)+"L"+(e+l)+","+(o+31)).attr({stroke:"#E1E1E1","stroke-width":1,fill:"#E1E1E1"});for(var v=0,x=f.length;x>v;v++)(function(e){var l,h,u=f[e],v=[];void 0===g&&0===e||void 0!==g&&e===g?(v[0]=p.image(t.BASE_IMG_SRC+n,c,o,98,32),d[0]=v[0]):v[0]=p.image(t.BASE_IMG_SRC+s,c,o,98,32),"all"===u.title?(p.image(t.BASE_IMG_SRC+a,c+14,o+10,10,10),h=p.text(c+30,o+16,"\u6574\u4f53\u8d8b\u52bf").attr(t.TEXT_STYLE).attr({fill:"#333"}),d[1]=h):"pc"===u.title?(p.image(t.BASE_IMG_SRC+r,c+14,o+10,12,12),h=p.text(c+34,o+16," PC\u8d8b\u52bf").attr(t.TEXT_STYLE)):"wise"===u.title?(p.image(t.BASE_IMG_SRC+i,c+14,o+10,9,12),h=p.text(c+30,o+16,"\u79fb\u52a8\u8d8b\u52bf").attr(t.TEXT_STYLE)):h=p.text(c+34,o+16,u.title).attr({fill:"#9A9A9A"}),v[1]=h,l=p.rect(c,o,90,32).attr({fill:"#ff0000",stroke:"none",opacity:0}),l[0].style.cursor="pointer",l.click(function(){return v!==d?(d[0].attr({src:t.BASE_IMG_SRC+s}),d[1].attr({fill:"#9A9A9A"}),v[0].attr({src:t.BASE_IMG_SRC+n}),v[1].attr({fill:"#333"}),d=v,u.fn(),!1):void 0}),l.hover(function(){v!==d&&h.attr({fill:"#333"})},function(){v!==d&&h.attr({fill:"#9A9A9A"})}),c+=98})(v)}}(),function(){var t=(G.CONFIG,G.Time,G.Utils);G.fn.industrycolumn=function(e,a,r,i,n,s){var o,l=this,h=l.paper,f=this.chartid,s=s||{},u=s.typeid||G.guid("industrycolumn"),p=h.set(),c=h.set(),d=function(e,a,r,i,n){t.clearpaperset(p),p.push(h.path("M"+e+","+(a+170)+"L"+(e+r)+","+(a+170)).attr({stroke:"#999",fill:"none"}));var s=n[1].length;l.draw(u+"guide",["guide",e,a+10,r,160,4,{lastline:"hidden",guideStyle:{stroke:"#EBEBEB",fill:"none"}}]),t.clearpaperset(c),o=function(e,a,r,i,s,o,l){var h=3>r?"#ED992D":"#475A74";c.push(e.rect(i+o,s,7,l).attr({fill:h,stroke:"none"}));var f=G.CONFIG.BASE_IMG_SRC+"icon_star.png";3>r&&l>40&&(c.push(e.image(f,i+o/2-13,s+6,27,31)),c.push(e.text(i+o/2,s+27,r+1).attr({fill:"#ED992D"}))),c.push(e.text(i+o/2,s+l+15,t.textrow(t.truncate(n[0][r],18),12)).attr({title:n[0][r],fill:"#9A9A9A"}))},l.draw(u+"column",["column",e+26,a+10,r-52,160,n[1],[100,0],{k:s>4?2:1,kspace:s>4?!1:!0,limit:10,minheight:1,colorfn:function(t){return 3>t?"#FFB049":"#606E82"},ANIMATION:"off",rectwithfn:o}])};return eve.on(f+"."+u+".refresh",function(t){var t=t||{},e=t.type,a=t.value;"data"===e&&a&&d.apply(null,a)}),d(e,a,r,i,n,s),{typeid:u,refresh:d}}}(),function(){function t(t,e,r,i){return{x1:t+r*Math.cos(-i*a),y1:e+r*Math.sin(-i*a)}}var e=G.CONFIG;G.Time,G.Utils;var a=Math.PI/180,r="icon_arrow.png";G.fn.interestspider=function(a,i,n,s,o,l){var h=this.paper,f=a+n/2,u=i+s/2,p=o[0],c=o[1],d=0,g=112,v=p.length,x=360/v,m=[],y=[];h.text(f-150,u-150,"\u5174\u8da3\u4eba\u7fa4\u5206\u5e03\u5360\u6bd4\uff1a").attr({fill:"#9A9A9A"});for(var w=[[],[],[]];v>d;d++){var M=t(f,u,g+28,d*x),A=h.text(M.x1,M.y1,p[d]).attr({fill:"#9A9A9A"}),G=t(f,u,g+10,d*x);m.push("M"+f+","+u+"L"+G.x1+","+G.y1),d*x>=0&&80>d*x||d*x>280&&350>=d*x?A.attr({"text-anchor":"start"}):d*x>100&&260>d*x&&A.attr({"text-anchor":"end"});var T=t(f,u,40,d*x);w[0].push(0===d?"M"+T.x1+","+T.y1:"L"+T.x1+","+T.y1),T=t(f,u,80,d*x),w[1].push(0===d?"M"+T.x1+","+T.y1:"L"+T.x1+","+T.y1),T=t(f,u,120,d*x),w[2].push(0===d?"M"+T.x1+","+T.y1:"L"+T.x1+","+T.y1);var k,E,_=c[d]*g/100,T=t(f,u,_,d*x);_>=80?(k=6,E=1):_>50?(k=5,E=.5):(k=4,E=.5),y.push([T.x1,T.y1,k,E])}for(h.path(m.join("")).attr(e.PATH_STYLE),d=0;v>d;d++){var G=t(f,u,g+15,d*x);h.image(e.BASE_IMG_SRC+r,G.x1-4,G.y1-3,8,7).rotate(-d*x,G.x1,G.y1)}for(var d=0,b=w.length;b>d;d++)h.path(w[d].join("")+"Z").attr(e.PATH_STYLE);var S=[];for(d=0,v=y.length;v>d;d++){var I=y[d];h.circle(I[0],I[1],I[2]).attr({fill:"#4284E2",stroke:"none",stroke:"none",opacity:I[3]}),0===d?S.push("M"+I[0]+","+I[1]):S.push("L"+I[0]+","+I[1])}var L=h.path(S.join("")+"Z").attr({stroke:"#4284E2","stroke-width":2,"stroke-opacity":0,fill:"#4284e2","fill-opacity":.1});L.hover(function(){this.attr({"stroke-opacity":1})},function(){this.attr({"stroke-opacity":0})})}}(),function(){function t(t){for(var e=[],a=0,r=t.length;r>a;a++)0===a%2?e.push(6*t[a]/5):e.push(1*t[a]/3);return e.unshift(0),e.push(0),e}var e=(G.CONFIG,G.Time,G.Utils);G.fn.meetingIndex=function(a,r,i,n,s,o){var l,h=this,f=h.paper,u=this.chartid,o=o||{},p=o.typeid||G.guid("meetingindex"),c=f.set(),d=function(a,r,i,n,s,o){l=arguments;for(var f=o.colors||["#5FC2F9","#D6CC6A","#F7DEAE"],u=o.popupStyle||{fill:"#ED2C00"},d=o.popupText||{fill:"#fff"},g=[],v=0,x=s.length;x>v;v++)g.push(s[v].value);var m=t(g),y=e.getMinMaxValue(m),w=e.getAxisStep(y.max,y.min,5);e.clearpaperset(c),h.draw(p+"guide",["guide",a,r+60,i,220,5,{guideStyle:{stroke:"#B5B5B5",fill:"none","stroke-dasharray":"- "}}]),h.draw(p+"valueAxis",["valueAxis",a,r+50,40,220,5,w,{textFormat:function(t){return(""+t).replace(/(\d{1,3})(?=(\d{3})+(?:$|\.))/g,"$1,")}}]),h.draw(p+"line",["line",a+30,r+60,i-50,220,m,m.length,w,{type:"area",areaopacity:1,smooth:!0,colors:[f[2]]}]),h.draw(p+"column",["column",a+50,r+60,i-50,220,g,w,{k:40/44,limit:10,minheight:1,kspace:!0,space:44,col_w:40,colorfn:function(t){return 0===t%2?f[0]:f[1]},formatfn:function(t){return" \u5173\u6ce8\u5ea6 \n"+t},popup:!0,popupStyle:u,popupText:d,ANIMATION:"on",rectwithfn:function(t,a,r,i,n,o,l){c.push(t.text(i+o/2,n+l+20,e.textrow(e.truncate(s[r].key,18),12)).attr({title:s[r].key,fill:"#000"}))}}])},g={x:0,y:1,w:2,h:3,series:4,opts:5};return eve.on(u+"."+p+".refresh",function(t){var t=t||{},a=t.type,r=t.value;"data"===a&&r&&(e.extendparam(l,r,g),d.apply(null,l))}),d(a,r,i,n,s,o),{typeid:p,refresh:d}}}(),function(){function t(t,e,a,r,i){return{x1:t+a*Math.cos(-r*n),x2:t+a*Math.cos(-i*n),y1:e+a*Math.sin(-r*n),y2:e+a*Math.sin(-i*n)}}function e(e,a,r,i,n){var s=t(e,a,r,i,n);return["M",s.x1,s.y1,"A",r,r,0,+(n-i>180),0,s.x2,s.y2]}function a(t,e,a,r,i,s,o){var l=e+r*Math.cos(-i*n),h=e+r*Math.cos(-s*n),f=a+r*Math.sin(-i*n),u=a+r*Math.sin(-s*n);return t.path(["M",e,a,"L",l,f,"A",r,r,0,+(s-i>180),0,h,u,"z"]).attr(o)}function r(t){var e=t.reverse(),a=e.slice(0,5),r=e.slice(5);return r.concat(a)}var i=G.CONFIG;G.Time,G.Utils;var n=Math.PI/180,s=["icon_sun.png","icon_moon.png","icon_am.png","icon_pm.png"],o="#FFF2E2",l="#E8EDF5";G.fn.searchtimepie=function(n,h,f,u,p,c){var d=this.paper,p=r(p),g=n+f/2,v=h+u/2,x=e(g,v,235,5,45).join(",")+e(g,v,235,135,175).join(","),m=e(g,v,235,315,355).join(",")+e(g,v,235,185,225).join(",");d.path(x).attr({stroke:o,fill:"none","stroke-width":5}),d.path(m).attr({stroke:l,fill:"none","stroke-width":5}),d.image(i.BASE_IMG_SRC+s[0],n,v-36-20,36,36),d.image(i.BASE_IMG_SRC+s[1],n,v+20,36,36),d.image(i.BASE_IMG_SRC+s[2],g-220,v-20,53,15),d.image(i.BASE_IMG_SRC+s[3],g+220-53,v-20,53,15);var y,w=5,M=0,A=150,G=A/w,T=[],k=18;for(M=2;w>M;M++)y=G*(M+1),d.circle(g,v,y).attr({fill:"none",stroke:"#E5E5E5","stroke-width":1});for(M=0;24>M;M++){var E=t(g,v,A,15*M,15*(M+1)),_=["M",g,v,"L",E.x1,E.y1];T.push(_.join(","));var b=Math.floor(p[M])||0,S=b*A/100;if(S>.9*A)var I={stroke:"#fff",fill:"#999","stroke-width":2};else if(S>.8*A)var I={stroke:"#fff",fill:"#B9B9B9","stroke-width":2};else var I={stroke:"#fff",fill:"#DCDCDC","stroke-width":2};var L=a(d,g,v,S-1,15*M+.5,15*(M+1)-.5,I);L.d=b,L.i=M,L.cr=S-1,L.dt=I,L.hover(function(){var e=this.i;12>e?this.attr({stroke:"#FFE7C8",fill:"#FFB049"}):this.attr({stroke:"#CFD3D9",fill:"#606E82"}),this.cr;var a=t(g,v,A+10,15*e+7.5,15*(e+1));this.flag=d.popup(a.x1,a.y1,this.d||"0")},function(){this.attr(this.dt),this.flag.animate({opacity:0},300,function(){this.remove()})}),E=t(g,v,A+22,15*M,15*(M+1)),0===M%2&&6!==k&&18!==k&&(12===k||24===k?d.text(E.x1-15,E.y1,""+k+":00").attr({fill:"#333","text-anchor":"start"}).attr("font-weight","bold"):d.text(E.x1-15,E.y1,""+k+":00").attr(i.TEXT_STYLE)),k--,0===k&&(k=24)}d.path(T.join(",")).attr({fill:"none",stroke:"#E5E5E5","stroke-width":1}),this.valueAxis(g,v+1*A/5,20,4*A/5,4,[20,100],{textStyle:{fill:"#3073D1"}}),d.path(["M",n,v,"L",n+f,v]).attr({stroke:"#666",fill:"none"})}}(),function(){var t=G.CONFIG;G.Time,G.Utils;var e=["icon_man.png","icon_women.png"];G.fn.sexmorecolumn=function(a,r,i,n,s,o){var l=this,h=l.paper,f=this.chartid,o=o||{},u=o.typeid||G.guid("sexmorecolumn"),p=function(a,r,i,n,s,o){l.draw(u+"text",function(){return h.text(a+10,r+15,"\u6027\u522b\u5206\u5e03\uff1a").attr(t.TEXT_STYLE)},function(){this.attr({x:a+10,y:r+15})}),h.path("M"+a+","+(r+n/2)+"L"+(a+i)+","+(r+n/2)).attr(t.PATH_STYLE),h.image(t.BASE_IMG_SRC+e[0],a+15,r+n/2-60,20,50),h.image(t.BASE_IMG_SRC+e[1],a+15,r+n/2+10,23,50);var f=s[0],p=[100,100,100,100,100];p.length=f.length,l.draw(u+"mancolumngray",["column",a+50,r+10+20,i-65-50,n/2-10-12-20,p,[100,0],{dir:"up",colorfn:function(){return"#F4F4F4"},k:1,minheight:1,kspace:f.length>2?!1:!0}]),l.draw(u+"mancolumn",["column",a+50,r+10+20,i-65-50,n/2-10-12-20,f,[100,0],{popup:!0,formatfn:function(t){return t+"%"},dir:"up",k:1,minheight:1,kspace:f.length>2?!1:!0}]),l.draw(u+"manvalueAxis",["valueAxis",a+i-20,r+10+20,20,n/2-10-12-20,2,[100,0],{textFormat:function(t){return t+"%"},textStyle:{fill:"#9A9A9A","text-anchor":"end"}}]);var c=s[1];l.draw(u+"womencolumngray",["column",a+50,r+n/2+12,i-65-50,n/2-20-20,p,[100,0],{dir:"down",colorfn:function(){return"#F4F4F4"},k:1,minheight:1,kspace:c.length>2?!1:!0}]),l.draw(u+"womencolumn",["column",a+50,r+n/2+12,i-65-50,n/2-20-20,c,[100,0],{popup:!0,formatfn:function(t){return t+"%"},dir:"down",k:1,minheight:1,kspace:c.length>2?!1:!0}]),l.draw(u+"womenvalueAxis",["valueAxis",a+i-20,r+n/2+12,i-65-50,n/2-20-20,2,[0,100],{textFormat:function(t){return t+"%"},textStyle:{fill:"#9A9A9A","text-anchor":"end"}}])};return eve.on(f+"."+u+".refresh",function(t){var t=t||{},e=t.type,a=t.value;"data"===e&&a&&p.apply(null,a)}),p(a,r,i,n,s,o),{typeid:u,refresh:p}}}(),function(){var t=G.CONFIG;G.Time,G.Utils;var e=["icon_man.png","icon_women.png"];G.fn.sexonebar=function(a,r,i,n,s,o){var l=this.paper,o=o||{},h=o.width||250;l.text(a+10,r+15,"\u6027\u522b\u5206\u5e03\uff1a").attr(t.TEXT_STYLE);var f=s[0]*h/100,u=s[1]*h/100;l.rect(a+40,r+45,f,26).attr({fill:"#6E7EB2",stroke:"none"}),l.text(a+40+f/2,r+58,s[0]+"%").attr({fill:"#fff"}),l.rect(a+40+f,r+45,u,26).attr({fill:"#fe7487",stroke:"none"}),l.text(a+40+f+u/2,r+58,s[1]+"%").attr({fill:"#fff"}),l.image(t.BASE_IMG_SRC+e[0],a+10,r+35,20,50),l.image(t.BASE_IMG_SRC+e[1],a+50+h,r+35,23,50)}}(),function(){function t(t,e,a,i,n,s,o){var l=e+i*Math.cos(-n*r),h=e+i*Math.cos(-s*r),f=a+i*Math.sin(-n*r),u=a+i*Math.sin(-s*r);return t.path(["M",e,a,"L",l,f,"A",i,i,0,+(s-n>180),0,h,u,"z"]).attr(o)}function e(t,e){var a=360*t/100;return"r"===e?{startAngle:-a/2,endAngle:a/2}:{startAngle:180-a/2,endAngle:180+a/2}}var a=G.CONFIG;G.Time,G.Utils;var r=Math.PI/180,i=["#D9E2FA","#6E7EB2","#ecf0fc"],n=["#fdf3f3","#fe7487","#fce8e8"],s=["icon_man.png","icon_women.png"];G.fn.sexonepie=function(r,o,l,h,f,u){var p=this.paper;p.text(r+10,o+15,"\u6027\u522b\u5206\u5e03\uff1a").attr(a.TEXT_STYLE);var c=r+l/2,d=o+h/2,g=e(f[0],"l"),v=e(f[1],"r");t(p,c,d,109,g.startAngle,g.endAngle,{stroke:"#fff",fill:i[0],"stroke-width":5}),t(p,c,d,109,v.startAngle,v.endAngle,{stroke:"#fff",fill:n[0],"stroke-width":5}),t(p,c,d,100,g.startAngle,g.endAngle,{stroke:"#fff",fill:i[1],"stroke-width":5}),t(p,c,d,100,v.startAngle,v.endAngle,{stroke:"#fff",fill:n[1],"stroke-width":5}),t(p,c,d,50,g.startAngle,g.endAngle,{stroke:"#fff",fill:i[2],"stroke-width":5}),t(p,c,d,50,v.startAngle,v.endAngle,{stroke:"#fff",fill:n[2],"stroke-width":5}),p.image(a.BASE_IMG_SRC+s[0],c-135,d-25,20,50),p.image(a.BASE_IMG_SRC+s[1],c+110,d-25,23,50),p.text(c-54,d,f[0]+"%").attr({fill:"#fff","text-anchor":"end"}),p.text(c+54,d,f[1]+"%").attr({fill:"#fff","text-anchor":"start"})}}(),function(){var t=G.CONFIG,e=G.Time,a=G.Utils,r="\u5e73\u5747\u503c",i="\u5a92\u4f53\u6307\u6570",n=130;G.fn.trendchart=function(s,o,l,h,f,u){function p(t){for(var e=T.object.clone(t)||{},a=0,r=O.length;r>a;a++)"0"===O[a]&&(e.userIndexes&&e.userIndexes[a]&&(e.userIndexes[a]=[]),e.mediaIndexes&&e.mediaIndexes[a]&&(e.mediaIndexes[a]=[]),e.forecastuserIndexes&&e.forecastuserIndexes[a]&&(e.forecastuserIndexes[a]=[]));return e}var c,d,g,v,x,m,y=this,w=y.paper,M=this.chartid,u=u||{},A=u.viewfn,k=u.USERDATA_TEXT||"\u641c\u7d22\u6307\u6570",E=u.USER_N||6,_=u.hidevalues,b=u.typeid||G.guid("trendchart"),S=u.userlimitvalues,I=y.paperset,L=w.set(),C=w.set(),F=w.set(),B=w.set(),x=null,m=null,O=Array(f.userIndexes.length+1).join("1").split(""),R=null,D=function(t,a){var r,i=t.substr(0,4);return 0===a?(R=i,r="Y/M/D"):i>R?(R=i,r="Y/M/D"):r="M/D",e.dateformat(t,r)},N={},Y=null,j=function(r,i,n){function s(t,r){if("week"===u.showtype)var i=a.getMaxLength(u.userIndexes)-1,n=t,s=t*h/i+o;else var n=e.daysBetween(d[0],t),s=a.getTimeaxisXpoint(t,o,d,h);var c=p.getuserdata===!1?u.userIndexes[r][n]:u.getuserdata(t)[r][1],v=l+f-f*(c-g[1])/(g[0]-g[1]);return{x:s,y:v}}Y&&(clearTimeout(Y),Y=null);var o=N.x,l=N.y,h=N.w,f=N.h,u=c[4],p=c[5];p.control||{};var d=N.usertimes,g=N.values;if(d[0]===d[1])a.hidepaperset(B),a.hidepaperset(C);else{var v=s(n,0),x="M"+v.x+","+l+"L"+v.x+","+(l+f);void 0!==B[0]?B[0].attr({path:x}).show():B.push(w.path(x).attr({stroke:"#ccc",fill:"none"}));for(var m=0,M=O.length;M>m;m++)if("0"!==O[m]){var G=s(n,m),T=G.x,k=G.y;void 0!==C[m]?C[m].attr({cx:T,cy:k}).show():C.push(w.circle(T,k,3).attr({fill:"#fff",stroke:t.COLORS[m],"stroke-width":2}))}}r>h-400&&(r-=400),A&&A.apply(y,[r+100,i-50,n])},P=function(s,o,l,h,f,u){c=arguments;var u=u||{},M=u.control||{},A=p(f)||{},G=A.usertimes,R=A.datatimes,P=A.showtype||"day",X=M.topline&&"disable"!==M.topline,U=M.meanline&&"disable"!==M.meanline,z=A.mediaIndexes||null,V=M.forecast&&"disable"!==M.forecast&&A.forecastuserIndexes&&G[1]===R[1];d=A,S=u.userlimitvalues,g=u.line_f_fn||null,v=u.gettopline_fn||null,a.clearpaperset(F),a.clearpaperset(L),L.push(w.text(s,o+10,k).attr(t.TEXT_STYLE));var H=U?n:20,Z=0,$=U?l-H:l-H,q=E,J=178*q/6,W=208+27*(q-6),K=A.userIndexes,Q=a.getMinMaxValue(K);if(V){var te=A.forecastuserIndexes,ee=a.getMinMaxValue(te),ae=A.forecasttimes;Q.min>ee.min&&(Q.min=ee.min),Q.max<ee.max&&(Q.max=ee.max)}var re=a.getAxisStep(Q.max,Q.min,q+1);S&&(re=S),_!==!0&&y.draw(b+"uservalueAxis",["valueAxis",l-2,o+Z+10,20,J,q,re,{firstvalue:"hidden",textFormat:function(t){return a.millesimal(t)},textStyle:{fill:"#9A9A9A","text-anchor":"end"}}]),y.draw(b+"userguide",["guide",H,o+Z,l-20,J,q,{lastline:"hidden",guideStyle:{stroke:"#F1F1F1",fill:"none"}}]);var ie=z?[[o+Z,o+Z+J],[o+W,o+W+50]]:[o+Z,o+Z+J];if(y.draw(b+"trendtimeAxis",["trendtimeAxis",H,o+Z+J+13,$,20,5,[G[0],V?ae[1]:G[1]],{format:D,textStyle:{fill:"#9A9A9A",lastline:"hidden"},guide:ie}]),y.draw(b+"timeAxisguideupline",["guide",H-3,o+Z+J,$+4,25,1,{guideStyle:{stroke:"#ccc",fill:"none"},lastline:"hidden"}]),z&&y.draw(b+"timeAxisguidedownline",["guide",H-3,o+W,$+4,25,1,{guideStyle:{stroke:"#ccc",fill:"none"},lastline:"hidden"}]),I[b+"forecastline"]&&a.hidepaperset(I[b+"forecastline"].paperset),V){var ne=e.daysBetween(G[0],ae[1]),se=e.daysBetween(G[0],G[1]),oe=e.daysBetween(ae[0],ae[1]),le=$*oe/ne;y.draw(b+"forecastline",["line",H+$-le,o+Z,le,J,te,"day"===P?ae:a.getMaxLength(te),re,{dasharray:"- "}]),$=$*se/ne}N={x:H,y:o+Z,w:$,h:J,usertimes:G,values:re},y.draw(b+"usercover",["cover",H,o+Z,$,J,"day"===P?G:a.getMaxLength(K),{fn:j,outfn:function(){a.hidepaperset(C),a.hidepaperset(B),Y=setTimeout(function(){T("#viewbox").hide()},200)}}]),y.draw(b+"userline",["line",H,o+Z,$,J,K,"day"===P?G:a.getMaxLength(K),re,{line_f_in:g}]),X&&v&&v(w,H,o+Z,$,J,G,re,A,F,O);var he,fe,ue=K.length,pe=0;if(ue>=3?(he=50,fe=!1):2===ue?(he=50,pe=10,fe=!0):1===ue&&(he=2,fe=!0),I[b+"mediacolumn"]&&a.hidepaperset(I[b+"mediacolumn"].paperset),U){L.push(w.text(s+30,o+Z+J+15,r).attr(t.TEXT_STYLE));var ce;a.settimefuc(x,function(){ce=void 0===A.usercolumnvalue?a.getAverageValue(K):A.usercolumnvalue,y.draw(b+"usercolumn",["column",s+pe,o+Z,100-2*pe,J,ce,re,{popup:!0,formatfn:u.formatfn,k:he,kspace:fe,minheight:1}])})}else I[b+"usercolumn"]&&a.hidepaperset(I[b+"usercolumn"].paperset);if(z){L.push(w.text(s,o+W+10,i).attr(t.TEXT_STYLE));var de=A.mediaIndexes,ge=a.getMinMaxValue(de),ve=a.getAxisStep(ge.max,ge.min,3);y.draw(b+"mediavalueAxis",["valueAxis",l-3,o+W+10,20,50,2,ve,{firstvalue:"hidden",textFormat:function(t){return(""+t).replace(/(\d{1,3})(?=(\d{3})+(?:$|\.))/g,"$1,")},textStyle:{fill:"#9A9A9A","text-anchor":"end"}}]),y.draw(b+"mediaguide",["guide",H,o+W,l-20,50,2,{firstline:"hidden",guideStyle:{stroke:"#F1F1F1",fill:"none"}}]),U&&a.settimefuc(m,function(){y.draw(b+"mediacolumn",["column",s+pe,o+W,100-2*pe,50,a.getAverageValue(de),ve,{k:he,kspace:fe,minheight:1}])}),y.draw(b+"medialine",["line",H,o+W,$,50,de,"day"===P?G:a.getMaxLength(de),ve,{type:"area"}]),y.draw(b+"medialineborder",["line",H,o+W,$,50,de,"day"===P?G:a.getMaxLength(de),ve])}else I[b+"medialine"]&&a.hidepaperset(I[b+"medialine"].paperset),I[b+"medialineborder"]&&a.hidepaperset(I[b+"medialineborder"].paperset),I[b+"mediaguide"]&&a.hidepaperset(I[b+"mediaguide"].paperset),I[b+"mediavalueAxis"]&&a.hidepaperset(I[b+"mediavalueAxis"].paperset)},X={x:0,y:1,w:2,h:3,series:4,opts:5};return eve.on(M+"."+b+".refresh",function(t){var t=t||{},e=t.type,r=t.value;if("data"===e)r&&(a.extendparam(c,r,X),P.apply(null,c));else if("toggle"===e&&r){var i=r[0],e=r[1],n=r[2];O[i]="on"===e?"1":"0",n&&a.extendparam(c,n,X),P.apply(null,c)}}),P(s,o,l,h,f,u),{typeid:b,refresh:P}}}();

function formattrendseries(b){function m(h,c){if(r[h].forecastdaytimes===void 0&&c&&c.day_start&&c.day_end&&c.week_start&&c.week_end)r[h].forecastdaytimes=[c.day_start,c.day_end],r[h].forecastweektimes=[c.week_start.split("/")[0],c.week_end.split("/")[1]];if(r[h].forecastIndexes===void 0)r[h].forecastIndexes=[],r[h].forecastWeekIndexes=[];c===void 0?(r[h].forecastIndexes.push(null),r[h].forecastWeekIndexes.push(null)):c.str_day&&c.str_week&&(r[h].forecastIndexes.push(c.str_day.split(",")),r[h].forecastWeekIndexes.push(c.str_week.split(",")))}
var d=G.Time,n=G.Utils,e=b||{},f=e.all,b=e.forecast||{},i=e.news,F=e.pc,v=e.wise,x=d.checkTimeLength(d.fixedtime(f[0].period))+1;if(i&&i[0]&&i[0].userIndexes.split(",").length>x)for(var a=0,k=i.length;a<k;a++){var O=i[a].userIndexes.split(",");O.length=x;i[a].userIndexes=O.join(",")}for(var t=[],a=0,k=f.length;a<k;a++)t.push(f[a].key);var a=function(h){if(h===void 0)return null;for(var c=[],l=0,D=h.length;l<D;l++)c.push(h[l].userIndexes===void 0||h[l].userIndexes===""?[]:h[l].userIndexes.split(","));
return c},z=function(h){if(h===void 0)return null;for(var c=0,l=h.length,D=0;c<l;c++)D+=Math.floor(h[c]);return Math.floor(D/l)},k=G._getWeekIndexes=function(h,c){if(h===void 0)return null;for(var l=[],D=d.fixedtime(h[0].period)[0],a=d.getDay(D).k,u=0,b=h.length;u<b;u++){for(var j=h[u].userIndexes===void 0||h[u].userIndexes===""?[]:h[u].userIndexes.split(","),g=a,k=D,s=[],q=[],t=0,e=j.length;t<e;t++)s.push(j[t]),g===6||t===e-1?(c?q.push({t1:k,t2:d.getDate(D,t),v:z(s)}):q.push(z(s)),g=0,s=[]):(g===
0&&(k=d.getDate(D,t)),g++);l.push(q)}return l},A=a(f),E=a(F),C=a(v),w=k(f),s=k(F),j=k(v),q,p;i&&(q=a(i),p=k(i));var r={all:{},pc:{},wise:{}};if(b){a=0;for(k=t.length;a<k;a++)if(f=b[t[a]])m("all",f.all),m("pc",f.pc),m("wise",f.wise)}var o=function(h,c,l){d.daysBetween(c[0],c[1]);for(var D=d.daysBetween(c[0],l[0]),c=d.daysBetween(c[0],l[1]),l=[],a=0,u=h.length;a<u;a++)l.push(h[a].slice(D,c+1));return l},y=function(h,c,l){d.getDay(c[0]);for(var a=d.getYearWeek(c[0],l[0]),c=d.getYearWeek(c[0],l[1]),l=
[],b=0,u=h.length;b<u;b++)l.push(h[b].slice(a,c+1));return l},J={day:{},week:{}},g=function(h,c,l,a){for(var b=d.daysBetween(a[0],l[0]),l=d.daysBetween(a[0],l[1]),a=0,u=h.length;a<u;a++)if(h[a]&&c[a]){var j=h[a].slice(l+1),g=h[a].slice(0,b);h[a]=g.concat(c[a],j)}},L=function(h,c,l,a){for(var b=d.getYearWeek(a[0],l[0]),l=d.getYearWeek(a[0],l[1]),a=0,u=h.length;a<u;a++)if(h[a]&&c[a]){var j=h[a].slice(l+1),g=h[a].slice(0,b);h[a]=g.concat(c[a],j)}},K=function(h,c){var a=c.cur,b=c.usertimes,k=c.datatimes,
u=d.daysBetween(b[0],b[1])+1<=365?"day":"week";u==="day"?a==="all"?g(A,h,b,k):a==="pc"?g(E,h,b,k):a==="wise"&&g(C,h,b,k):u==="week"&&(a==="all"?L(w,h,b,k):a==="pc"?L(s,h,b,k):a==="wise"&&L(j,h,b,k))};return{tabs:["","PC",""],legend:t,getData:function(h,c){if(e.hasOwnProperty(h)){var a=d.fixedtime(e[h][0].period),b,g=a[0],u=a[1];if(c===void 0)var k=d.getDate(u,-29),c=[k,u];else if(n.isString(c))var f=c,c=f!=="all"?[d.getDate(a[1],-f+1),a[1]]:a;var k=c[0],H=c[1];k>H&&(f=k,k=H,H=f);k<g&&(k=
g);H>u&&(H=u);var c=[k,H],i,m,z,B,I=r[h],P=function(){if(d.daysBetween(k,H)+1<=365){if(b="day",h==="all"?(i=o(A,a,c),q&&(m=o(q,a,c))):h==="pc"?i=o(E,a,c):h==="wise"&&(i=o(C,a,c)),I&&I.forecastdaytimes&&I.forecastIndexes)z=I.forecastdaytimes,B=I.forecastIndexes}else if(b="week",h==="all"?(i=y(w,a,c),p&&(m=y(p,a,c))):h==="pc"?i=y(s,a,c):h==="wise"&&(i=y(j,a,c)),I&&I.forecastweektimes&&I.forecastWeekIndexes)z=I.forecastweektimes,B=I.forecastWeekIndexes};P();if(J[b][h])B=J[b][h];else if(B){if(H>z[1])B=
null;else{f=b==="day"?d.daysBetween(k,z[1])+1:d.getYearWeek(k,z[1])+1;g=i[0].length;u=n.getMaxLength(B);f-=g;for(var N=0,R=B.length;N<R;N++){var M=B[N],Q=i[N][g-1];if(M){if(k<=z[0])for(var v=0,O=f-u;v<O;v++)M.unshift(Q);else k>z[0]&&(M=M.slice(u-f));M.unshift(Q)}B[N]=M}z[0]=H}J[b][h]=B}return{type:h,usertimes:[k,H],datatimes:a,showtype:b,userIndexes:i,mediaIndexes:m,getDatazoomIndexes:function(c){switch(c){case "all":return w[0];case "pc":return s[0];case "wise":return j[0];default:return w[0]}},
forecaststate:function(c,h){return r[c]&&r[c].forecastIndexes!==void 0&&r[c].forecastdaytimes!==void 0?h:"disable"},forecasttimes:z,forecastuserIndexes:B,setIndexes:K,setForecastData:function(c,h){var a=h.cur,b=h.usertimes,b=d.daysBetween(b[0],b[1])+1<=365?"day":"week";B=c;J[b][a]=c},getuserdata:function(c){var h=[];P();for(var c=b==="day"?d.daysBetween(k,c):c,a=0,l=i.length;a<l;a++)h.push([t[a],i[a][c]]);return h}}}else G.debug("")}}};function getWeekAvgs(b,m){for(var m=m||0,d=[],n=0,e=0,f=0,i=b.length;f<i;f++)n+=+b[f],e+=1,++m%7===0&&(d.push(n/e),n=e=0);e&&d.push(n/e);return d}function time2Pointime(b,m){var d=G.Time.daysBetween(b,"1970-01-04");return m=="week"?Math.floor(d/7):d}function point2Weektime(b){b=b*6048E5+G.Time.getParse("1970-01-04");return[b,b+6048E5-1]}
function trendChartInit(b){function m(a){var b=T("#trendYimg");a&&a.max_y&&(a=PPval.dataface+"IndexShow/getYaxis/?res="+PPval.ppt+"&res2="+PPval.res2+"&max_y="+a.max_y+"&min_y="+a.min_y+"&axis="+a.step_y,b.attr("src")!==a&&b.attr("src",a).show());b.css({left:T("#trend").width()-125})}function d(a,b,d,t,f){var i=[],e=0;BID.each(BID.getParams().word,function(n,s){var j=(a[s]||{})[t]||{},q=j["str_"+b+"_100"]||"",p=j[b+"_start"],r=j[b+"_end"],j=1;if(!q.length||!p||!r)i.push(null);else{q=q.split(",");
b=="week"&&(p=p.split("/")[0],r=r.split("/")[0],j=7);var p=time2Pointime(p,b),o=time2Pointime(r,b),m=time2Pointime(f,b),r=(d[n]||[0]).slice(-1)[0];if(!p||!o||o<p)q=null;else{var C=Math.abs(m-p),q=q.slice(0,o-p+1),o=q.length;if(p+o<=m)q=null;else{o=[r];m<p?o.length=C:q=q.slice(C+1);for(p=o.length;p--;)o[p]=r;q=o.concat(q)}}i.push(q);q&&(e=Math.max(e,q.length*j))}});var n=[f,BID.fnsDate(f).date(e-1).toString()];e||(n[1]=n[0]);return{values:i,times:n}}function n(a){var b=a.cur,d=a.state,f=BID.getParams(),
e="",b={type:f.type,startdate:a.usertimes[0],enddate:a.usertimes[1],forecast:a[b].forecast===!0?1:0};if(a.usertimes[1]!==a.datatimes[1])b.forecast=0;e=T.url.jsonToQuery(b);if(f.type==1){for(var a=[],i=f.area,f=0;f<i.length;f++)d[f]==="T"&&a.push(i[f]);b.area=a;e+="&area="+a.join(",")}else{a=[];i=f.word;for(f=0;f<i.length;f++)d[f]==="T"&&a.push(i[f]);b.word=a;e+="&word="+encodeURIComponent(a.join(","))}return[e,b]}function e(a,b,f){var a=a||window,d="",e={},n=function(b){for(var b=b||[],f=a.getParams.C32().tags,
d='<table id="trendPopTab" class="view-table" style="font-family:simsun;">',e=0;e<f.length;e++)d+=T.string('<tr>            <td class="view-dot"><span style="background:#{color}"></span></td>            <td class="view-label">#{word}</td><td class="view-value">#{value}</td>            </tr>').format({color:a.getColor(e),word:BID.subStr(f[e]),value:b[e]||""});return d+"</table>"};a.evts.care("trend_viewbox_pop",function(f,i){a.dataInterface("IndexShow/show/",T.url.jsonToQuery({classType:1,"res3[]":f,
className:"view-value"}),function(a){var f=(a.data||{}).code;!f||a.status!=0?location.reload():(i&&(e[b.cur][i]=n(f)),i===d&&T("#trendPopTab .view-value").each(function(a){a=f[a]||"";this.innerHTML=a=a.replace("<style","<br /><style")}))},{noCache:!0})},{gt:200});return function(m,v,w){var s="day",j=String(w),q=b.usertimes[0];j.indexOf("-")<0&&(s="week",j=""+(time2Pointime(q,"week")+ +w));if(j===d)this.viewbox(m,v);else{d=j;var p=(e[b.cur]||(e[b.cur]={}))[j];if(!p){var p=n(),r=[],o=f[b.cur],y="userIndexes_enc";
s==="day"&&(y="userIndexes_enc",w=a.fnsDate(j).difs(q,"d"));for(q=o.length;q--;)typeof o[q][y]==="string"&&(o[q][y]=o[q][y].split(",")),r[q]=o[q][y][w];a.evts("trend_viewbox_pop",null,r,j)}p={limit:4,content:p};if(s==="day")p.title=j+" "+G.Time.getDay(j).v;else{s=point2Weektime(j);if(j=i[b.cur])s[0]=Math.max(s[0],j[0]),s[1]=Math.min(s[1],j[1]);p.title=a.fnsDate(s[0]).toString()+" ~ "+a.fnsDate(s[1]).toString()+" "}this.viewbox(m,v,p)}}}function f(a,b,d,e){function i(){var a=(b.barVals||[])[m],
f=T("#trendBarVal");f.find(".contentWord").html(a||"&nbsp;&nbsp;");var d=26;a&&(d=f.show().width());f.css({top:v.y,left:v.x+v.w/2-d/2}).show();return a}function n(a){BID.dataInterface("IndexShow/show/",T.url.jsonToQuery({classType:1,"res3[]":a,className:"barAvgVal"}),function(a){w=0;var a=((b.barVals=(a.data||{}).code||[])[0]||"").match(/<style>(.*?)<\/style>/)||[],f=T("#innerStyle4BarAvg")[0];if(a[1])f.styleSheet?f.styleSheet.cssText=a[1]:f.innerHTML=a[1];for(a=e.state.length;a--;)e.state[a]!=="T"&&
(b.barVals[a]="0");i()},{noCache:!0})}var m,v,w;f.viewPop=i;f.hidePop=function(){T("#trendBarVal").hide()};return function(a,b,f){v=f;m=b;if(!i()&&!w){w=1;a=[];b=d[e.cur];for(f=b.length;f--;)a[f]=b[f].userIndexes_avg_enc||"";n(a)}return""}}var i={},F=BID.sentimBlock("trend-wrap").title([]).tabTils([]),v=G.Time.fixedtime(BID.getParams.time()[0]),x={};BID.dataInterface("Search/getAllIndex/","startdate="+v[0]+"&enddate="+v[1],function(a){function k(a){for(var c=["all","pc","wise"],b=0,f=c.length;b<f;b++){for(var d=
a[c[b]],u=[],g=BID.getParams().area,e=g.length;e--;)for(var i=d.length;i--;)if(d[i].area==g[e]){u[e]=d[i];break}if((d=a[c[b]]=u)&&d.length>0){i=0;for(u=d.length;i<u;i++)g=d[i]||{},g.key=g.areaName}}return a}function v(){T("#trend-topline").css("display","none");g.all.topline="disable";g.pc.topline="disable";g.wise.topline="disable"}function t(a,c){var l=g.cur,e=n(g),i=e[0],e=e[1];f.hidePop();delete x.barVals;BID.dataInterface("Search/getSubIndex/",i,function(a){if(!a.data||a.status!=0)T("#trend").html('<div style="padding-top:120px;text-align:center;"><p class="nodata"></p></div>');
else{a.data=function(a){for(var c=["all","pc","wise"],h=0,f=c.length;h<f;h++){var d=a[c[h]];if(b.isarea)for(var g=[],e=BID.getParams().area,i=e.length;i--;)for(var l=d.length;l--;){if(d[l].area==e[i]){g[i]=d[l];break}}else{g=[];e=BID.getParams().word;for(i=e.length;i--;)for(l=d.length;l--;)if(d[l].key===e[i]){g[i]=d[l];break}}if((d=a[c[h]]=g)&&d.length>0){l=0;for(g=d.length;l<g;l++)if(e=d[l]||{},e.userIndexes_100)e.userIndexes=e.userIndexes_100}}return a}(a.data);var h=a.data[l],f=g.usertimes,i=G.Time.daysBetween(f[0],
f[1])+1<=365?"day":"week",k=[];m(h[0]);BID.each(h,function(a,c){var b=A[l][a],h=c.userIndexes_100;b.userIndexes_enc=c.userIndexes_enc;b.userIndexes_avg_enc=c.userIndexes_avg_enc;h=h&&h.length?h.split(","):[];k.push(h)});c.type==="toggle"?(c.value[2]=c.value[2]||{},c.value[2]["series.userIndexes"]=k):c.value.series===void 0?c.value["series.userIndexes"]=k:c.value.series.userIndexes=k;a=e.forecast&&a.data.forecast?d(a.data.forecast,i,k,g.cur,f[1]):{values:[],times:[f[1],f[1]]};c.type==="toggle"?(c.value[2]=
c.value[2]||{},c.value[2]["series.forecasttimes"]=a.times,c.value[2]["series.forecastuserIndexes"]=a.values):c.value.series===void 0?(c.value["series.forecasttimes"]=a.times,c.value["series.forecastuserIndexes"]=a.values):(c.value.series.forecasttimes=a.times,c.value.series.forecastuserIndexes=a.values);K.refresh(["trend"],c);window.pageStatus=!0}},{loading:T("#trend").parent()[0]})}function z(a){g.cur=a;var c=460,b=430;a!=="all"&&(c=400,b=370);for(var f in g[a]){var d=T("#trend-"+f),e=g[a][f];e===
"disable"?d.css("display","none"):(d.css("display","block"),e===!0?d.addClass("select"):e===!1&&d.removeClass("select"))}s.setSize(s.width,c);T("#trend").css({height:c+20+"px"});c=j.getData(a,g.chartselect||[p,r]);g.usertimes=c.usertimes;F.title(["",c.usertimes.join("  ")]);t(["trend"],{type:"data",value:{series:c,"opts.control":g[a]}});a=o.getDatazoomIndexes(g.cur);K.refresh(["datazoom"],{type:"data",value:{y:b,"opts.series":a,datatimes:c.datatimes,usertimes:c.usertimes}})}BID.evts("trendProfile_data",
null,a);if(a.status!==0)T("#trend").html('<div style="padding-top:120px;text-align:center;"><p class="nodata"></p></div>');else{var A=a.data||{},E=T("#trend").width();if(b.isarea||BID.getParams().area[0]!="0"||!A.is_forecast)b.forecast="disable";if(BID.getParams().time[0].length>2)b.forecast="disable";a=0;b.cur==="pc"?a=1:b.cur==="wise"&&(a=2);A=function(a){for(var c=["all","pc","wise"],f=0,d=c.length;f<d;f++){var e=a[c[f]];if(!b.isarea){for(var g=[],k=BID.getParams().word,n=k.length;n--;)for(var j=
e.length;j--;)if(e[j].key===k[n]){g[n]=e[j];break}e=a[c[f]]=g}if(e&&e.length>0){e[0].period&&(j=e[0].period.split("|"),j[0]=+BID.fnsDate(j[0]),j[1]=+BID.fnsDate(j[1]),i[c[f]]=j);j=0;for(g=e.length;j<g;j++)if(k=e[j]||{},k.userIndexes_30)k.userIndexes=k.userIndexes_30}}return a}(A);b.isarea&&(A=k(A));m(A[b.cur][0]);var C=G.Time,w=BID.getParams.time(),w=C.fixedtime(w[0]);b.usertime1!==""&&b.usertime2!==""&&(w=[b.usertime1,b.usertime2]);var s=G.canvas("trend",E,b.cur==="all"?460:400),j=formattrendseries(A),
q=j.legend,E=w,p=E[0],r=E[1],o=j.getData(b.cur,E),w=o.datatimes,y=o.forecaststate(b.cur,!1);F.title(["",E.join("  ")]);var J=function(a,c){for(var b=[],f=(a||[]).length,d=0;d<f;d++){var e=a[d].userIndexes_100;e?(e=e.split(","),e.length>365&&(e=getWeekAvgs(e,G.Time.getDay(c).k)),b.push(e)):b.push([])}return b}(A[b.cur],p);if(J.length>0)o.userIndexes=J;if(b.forecast!=="")y=b.forecast;A.is_forecast==0&&(y="disable");(y==="disable"||b.forecast==="disable")&&T("#trend-forecast").css("display","none");
var g={cur:b.cur,chartselect:null,datatimes:w,usertimes:E,state:["T","T","T","T","T"].slice(0,o.userIndexes.length),all:{topline:!1,meanline:!1,forecast:y},pc:{topline:"disable",meanline:!1,forecast:y},wise:{topline:"disable",meanline:!1,forecast:y}};if(b.topline!=="")g[b.cur].topline=b.topline;if(b.meanline!=="")g[b.cur].meanline=b.meanline;BID.dataInterface("News/getNews/","startdate="+w[0]+"&enddate="+w[1],function(a){if(a&&a.data){for(var c=!1,b=0,f=a.data.length;b<f;b++){var e=a.data[b];if(e&&
e.news&&e.news.length>1){c=!0;break}}c===!1&&v()}else v()});var L,K=s.chart("list",[["boxtitle",0,0,2E3,83,["",p+"  "+r+" "]],["boxtab",0,51,2E3,32,[{title:"all",fn:function(){z("all")}},{title:"pc",fn:function(){z("pc")}},{title:"wise",fn:function(){z("wise")}}],{curnum:a}],["legend",20,100,s.width-20,30,q,{textlimit:12,fn:function(a,b){b?(g.state[a]="F",t(["trend"],{type:"toggle",value:[a,"off"]})):(g.state[a]="T",t(["trend"],{type:"toggle",value:[a,"on"]}))}}],["trendchart",20,130,s.width-
20,290,o,{typeid:"trend",control:g[g.cur],USER_N:7,userlimitvalues:[99,0],getuserdata:!1,hidevalues:!0,viewfn:e(BID,g,A),line_f_fn:function(){},formatfn:f(BID,x,A,g),gettopline_fn:function(a,c,f,e,d,g,i,k,j,n){function m(a,b){var h=C.daysBetween(g[0],g[1]),h=C.daysBetween(g[0],a)*e/h+c,j=k.showtype==="week"?C.getYearWeek(g[0],a):C.daysBetween(g[0],a);return{x:h,y:f+d-d*(k.userIndexes[b][j]-i[1])/(i[0]-i[1])}}function v(a){for(var b=[],c=0,h=a.length;c<h;c++){for(var f=a[c]||{},e={},d=0,g=f.datePoints.length;d<
g;d++)e[f.datePoints[d]]=f.news[d];b.push(e)}return b}var p=G.CONFIG,r=j||a.set();G.Utils.clearpaperset(r);L=g[0].replace(/-/g,"")+"|"+g[1].replace(/-/g,"");BID.dataInterface("News/getNews/","startdate="+g[0]+"&enddate="+g[1],function(c){if(c&&c.data&&c.data[0]&&c.data[0].period&&c.data[0].period===L){var c=v(c.data),f=g[0],e=g[1];if(b.isarea)for(var d=BID.getParams().area.length;d-- >1;)c[d]=c[0];for(var d=0,i=c.length;d<i;d++){var l=0;if(n[d]!=="0")for(var k in c[d]){var j=k;if(f<=j&&e>=j){var o=
m(j,d),t=o.x,o=o.y,w=a.rect(t-6,o-6-12,13,13).attr({fill:p.COLORS[d],stroke:"none",opacity:0}),y=a.path("M"+t+","+o+"L"+t+","+(o-5)).attr({stroke:p.COLORS[d],fill:"none"}),F=a.text(t,o-12,p.TOPLINETEXT[l]).attr({fill:p.COLORS[d]}),x=a.rect(t-6,o-6-12,13,13).attr({fill:"#fff",cursor:"pointer",stroke:"none",opacity:0});r.push(w,y,F,x);(function(a,c,b,d,f){x.hover(function(){b[2].attr({fill:"#fff"});b[0].attr({opacity:1})},function(){b[2].attr({fill:p.COLORS[a]});b[0].attr({opacity:0})});x.click(function(){T("#newsbox")&&
T("#newsbox").hide();BID.dataInterface("News/getTopNews/","wd="+q[a]+"&dt="+d.replace(/-/g,""),function(a){var c="";if(a&&a.data)for(var b=0,h=a.data.length;b<h;b++){var e=a.data[b];e.title&&(c+='<a target="_blank" href="'+e.url+'">'+e.title+"</a>")}c===""&&(e=f,c='<a target="_blank" href="'+e.title_url+'">'+e.title+"</a>");s.chart("viewbox",200,100,{title:d,content:c===""?"":c},{id:"newsbox",close:!0});T("#newsbox").show()})})})(d,k,[w,y,F,x],j,c[d][k]);l++}}}}})}}],["datazoom",20,g.cur===
"all"?430:370,s.width-40,30,w,E,{typeid:"datazoom",series:o.getDatazoomIndexes("all"),fn:function(a){g.usertimes=a;F.title(["",a.join("  ")]);t(["trend"],{type:"data",value:{series:j.getData(g.cur,a)}})}}]]);T("#trend_copyright").show();T(".chartselect").click(function(){var a=this.rel;T(this).addClass("chartselect-click").siblings().removeClass("chartselect-click");g.chartselect=T(this).attr("rel");var c=j.getData(g.cur).datatimes,b;a!=="all"?(b=c[1],a=C.getDate(b,-a+1)):(a=c[0],b=c[1]);g.usertimes=
[a,b];t(["trend"],{type:"data",value:{series:j.getData(g.cur,[a,b])}});K.refresh(["datazoom"],{type:"data",value:{datatimes:c,usertimes:[a,b]}});F.title(["",a+"  "+b])});T("#trend-control label").click(function(a){if(!(T.browser.ie==7&&a.target.tagName=="LABEL")){var b=T(this).attr("id").replace("trend-","");T(this).toggleClass("select");var a=g.cur,d=T(this).hasClass("select");g.all[b]!=="disable"&&(g.all[b]=d);g.pc[b]!=="disable"&&(g.pc[b]=d);g.wise[b]!=="disable"&&(g.wise[b]=d);b==="meanline"&&
T("#trend_copyright").css({left:d?"130px":"20px"});b==="forecast"?(b=j.getData(a,g.chartselect||[p,r]),g.usertimes=b.usertimes.slice(),K.refresh(["datazoom"],{type:"data",value:{datatimes:b.datatimes,usertimes:b.usertimes}}),t(["trend"],{type:"data",value:{series:b,"opts.control":g[a]}})):t(["trend"],{type:"data",value:{"opts.control":g[a]}})}});BID.evts.care("width_resize",function(){var a=T("#trend").width();s.setSize(a,g.cur!=="all"?400:460);t(["trend"],{type:"data",value:{w:a-20}});K.refresh(["datazoom"],
{type:"data",value:{w:s.width-40}});m()},{gt:500});b.show_share&&T("#trend-wrap .titlBar .ttools").show().click(function(){var a={tpl:"trendKey",cur:g.cur,usertime1:g.usertimes[0],usertime2:g.usertimes[1],topline:g[g.cur].topline,meanline:g[g.cur].meanline,forecast:g[g.cur].forecast,topline:"disable",meanline:"disable"};if(b.isarea)a.isarea="true";BID.shareBlockImg(a)});window.pageStatus=!0}},{loading:T("#trend").parent()[0]})};(function(b){var b=b||window,m=b.tProfile={};m.enc2viwCode=function(d,n){b.dataInterface("IndexShow/show/",T.url.jsonToQuery({classType:2,"res3[]":d,className:n.className}),function(b){var d=(b.data||{}).code;d&&b.status==0&&n.funCbk(d)})};m.setimgVal=function(b,n){for(var e=b.find(".enc2imgVal"),f=e.length;f--;)e.eq(f).html(n[f])};m.c2r_wm=function(d,n,e){var f=[],i=[];b.each(d.all,function(b,m){var x={word:m[n]},a=d.wise[b].ratio;x.all_qoq=m.ratio["qoq_"+e];x.all_yoy=m.ratio["yoy_"+e];x.wise_qoq=
a["qoq_"+e];x.wise_yoy=a["yoy_"+e];f.push(x);i.push(m.ratio["agv_"+e+"_enc"],a["agv_"+e+"_enc"])});return{items:f,encArr:i}};m.setData=function(d,n,e){var f=n.children(".tabCont"),d=d.data||{};d.all=d.all||{};d.pc=d.pc||{};d.wise=d.wise||{};var n=b.getParams().type=="0"?"key":"areaName",i=m.c2r_wm(d,n,"w");f.eq(0).html(T.template(e,{items:i.items,tbClass:"profWagv"}));b.tProfile.enc2viwCode(i.encArr,{className:"profWagv",funCbk:function(b){m.setimgVal(f.eq(0),b)}});i=m.c2r_wm(d,n,"m");f.eq(1).html(T.template(e,
{items:i.items,tbClass:"profMagv"}));b.tProfile.enc2viwCode(i.encArr,{className:"profMagv",funCbk:function(b){m.setimgVal(f.eq(1),b)}})};m.init=function(d){var n=b.fnsDate,e=n(PPval.dataStm).toString(),f=b.getParams.timeDay,i=[n(e).date(-f["12"]).toString()+"  "+e,n(e).date(-f["13"]).toString()+"  "+e],m=b.getParams().type,n=[" ",i[0]];m!="0"&&(n=["",i[0]," "]);var v=b.sentimBlock(d).title(n).tabTils(["7","30"]),x=v.getEl("tabConts");x.children(".tabCont");var a=v.getEl("baiduTpl")[0].id;
v.getEl("tabTitle").show();b.toLoading(x[0]);b.evts.care(d+"_data",function(d){b.tProfile.setData(d,x,a);T.browser.ie<=8&&(d=v.getEl("tabUl").find(".tabLi"),d.eq(1).click(),d.eq(0).click());b.toLoading(x[0],1)}).care(v.getEl("tabUl")[0].id+"_tabClick",function(a){var b=[" ",i[a]];m!="0"&&(b=["",i[a]," "]);v.title(b)})}})(BID);
